\chapter{Use in Lobster}
\hypertarget{flatbuffers_guide_use_lobster}{}\label{flatbuffers_guide_use_lobster}\index{Use in Lobster@{Use in Lobster}}
\doxysection*{Before you get started}

Before diving into the Flat\+Buffers usage in Lobster, it should be noted that the \doxysectlink{flatbuffers_guide_tutorial}{Tutorial}{0} page has a complete guide to general Flat\+Buffers usage in all of the supported languages (including Lobster). This page is designed to cover the nuances of Flat\+Buffers usage, specific to Lobster.

You should also have read the \doxysectlink{flatbuffers_guide_building}{Building}{0} documentation to build {\ttfamily flatc} and should be familiar with \doxysectlink{flatbuffers_guide_using_schema_compiler}{Using the schema compiler}{0} and \doxysectlink{flatbuffers_guide_writing_schema}{Writing a schema}{0}.

\doxysection*{Flat\+Buffers Lobster library code location}

The code for the Flat\+Buffers Lobster library can be found at {\ttfamily flatbuffers/lobster}. You can browse the library code on the \href{https://github.com/google/flatbuffers/tree/master/
lobster}{\texttt{ Flat\+Buffers Git\+Hub page}}.

\doxysection*{Testing the Flat\+Buffers Lobster library}

The code to test the Lobster library can be found at {\ttfamily flatbuffers/tests}. The test code itself is located in \href{https://github.com/google/
flatbuffers/blob/master/tests/lobstertest.lobster}{\texttt{ lobstertest.\+lobster}}.

To run the tests, run {\ttfamily lobster lobstertest.\+lobster}. To obtain Lobster itself, go to the \href{http://strlen.com/lobster}{\texttt{ Lobster homepage}} or \href{https://github.com/aardappel/lobster}{\texttt{ github}} to learn how to build it for your platform.

\doxysection*{Using the Flat\+Buffers Lobster library}

{\itshape Note\+: See \doxysectlink{flatbuffers_guide_tutorial}{Tutorial}{0} for a more in-\/depth example of how to use Flat\+Buffers in Lobster.}

There is support for both reading and writing Flat\+Buffers in Lobster.

To use Flat\+Buffers in your own code, first generate Lobster classes from your schema with the {\ttfamily -\/-\/lobster} option to {\ttfamily flatc}. Then you can include both Flat\+Buffers and the generated code to read or write a Flat\+Buffer.

For example, here is how you would read a Flat\+Buffer binary file in Lobster\+: First, import the library and the generated code. Then read a Flat\+Buffer binary file into a string, which you pass to the {\ttfamily Get\+Root\+As\+Monster} function\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{include\ "{}monster\_generated.lobster"{}}
\DoxyCodeLine{}
\DoxyCodeLine{let\ fb\ =\ read\_file("{}monsterdata\_test.mon"{})}
\DoxyCodeLine{assert\ fb}
\DoxyCodeLine{let\ monster\ =\ MyGame\_Example\_GetRootAsMonster(fb)}

\end{DoxyCode}


Now you can access values like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{let\ hp\ =\ monster.hp}
\DoxyCodeLine{let\ pos\ =\ monster.pos}

\end{DoxyCode}


As you can see, even though {\ttfamily hp} and {\ttfamily pos} are functions that access Flat\+Buffer data in-\/place in the string buffer, they appear as field accesses.

\doxysection*{Speed}

Using Flat\+Buffers in Lobster should be relatively fast, as the implementation makes use of native support for writing binary values, and access of vtables. Both generated code and the runtime library are therefore small and fast.

Actual speed will depend on whether you use Lobster as bytecode VM or compiled to C++.

\doxysection*{Text Parsing}

Lobster has full support for parsing JSON into Flat\+Buffers, or generating JSON from Flat\+Buffers. See {\ttfamily samples/sample\+\_\+test.\+lobster} for an example.

This uses the C++ parser and generator underneath, so should be both fast and conformant.

~\newline
 