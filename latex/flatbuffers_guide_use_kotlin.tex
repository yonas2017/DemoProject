\chapter{Use in Kotlin}
\hypertarget{flatbuffers_guide_use_kotlin}{}\label{flatbuffers_guide_use_kotlin}\index{Use in Kotlin@{Use in Kotlin}}
\doxysection*{Before you get started}

Before diving into the Flat\+Buffers usage in Kotlin, it should be noted that the \doxysectlink{flatbuffers_guide_tutorial}{Tutorial}{0} page has a complete guide to general Flat\+Buffers usage in all of the supported languages (including K).

This page is designed to cover the nuances of Flat\+Buffers usage, specific to Kotlin.

You should also have read the \doxysectlink{flatbuffers_guide_building}{Building}{0} documentation to build {\ttfamily flatc} and should be familiar with \doxysectlink{flatbuffers_guide_using_schema_compiler}{Using the schema compiler}{0} and \doxysectlink{flatbuffers_guide_writing_schema}{Writing a schema}{0}.

\doxysection*{Kotlin and Flat\+Buffers Java code location}

Code generated for Kotlin currently uses the flatbuffers java runtime library. That means that Kotlin generated code can only have Java virtual machine as target architecture (which includes Android). Kotlin \doxylink{namespaceNative}{Native} and Kotlin.\+js are currently not supported.

The code for the Flat\+Buffers Java library can be found at {\ttfamily flatbuffers/java/com/google/flatbuffers}. You can browse the library on the \href{https://github.com/google/flatbuffers/tree/master/
java/com/google/flatbuffers}{\texttt{ Flat\+Buffers Git\+Hub page}}.

\doxysection*{Testing Flat\+Buffers Kotlin}

The test code for Java is located in \href{https://github.com/google
/flatbuffers/blob/master/tests/KotlinTest.kt}{\texttt{ Kotlin\+Test.\+java}}.

To run the tests, use \href{https://github.com/google/
flatbuffers/blob/master/tests/KotlinTest.sh}{\texttt{ Kotlin\+Test.\+sh}} shell script.

{\itshape Note\+: These scripts require that \href{https://kotlinlang.org/}{\texttt{ Kotlin}} is installed.}

\doxysection*{Using the Flat\+Buffers Kotlin library}

{\itshape Note\+: See \doxysectlink{flatbuffers_guide_tutorial}{Tutorial}{0} for a more in-\/depth example of how to use Flat\+Buffers in Kotlin.}

Flat\+Buffers supports reading and writing binary Flat\+Buffers in Kotlin.

To use Flat\+Buffers in your own code, first generate Java classes from your schema with the {\ttfamily -\/-\/kotlin} option to {\ttfamily flatc}. Then you can include both Flat\+Buffers and the generated code to read or write a Flat\+Buffer.

For example, here is how you would read a Flat\+Buffer binary file in Kotlin\+: First, import the library and generated code. Then, you read a Flat\+Buffer binary file into a {\ttfamily Byte\+Array}. You then turn the {\ttfamily Byte\+Array} into a {\ttfamily Byte\+Buffer}, which you pass to the {\ttfamily get\+Root\+As\+My\+Root\+Type} function\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ MyGame.Example.*}
\DoxyCodeLine{import\ com.google.flatbuffers.FlatBufferBuilder}
\DoxyCodeLine{}
\DoxyCodeLine{//\ This\ snippet\ ignores\ exceptions\ for\ brevity.}
\DoxyCodeLine{val\ data\ =\ RandomAccessFile(File("{}monsterdata\_test.mon"{}),\ "{}r"{}).use\ \{}
\DoxyCodeLine{\ \ \ \ val\ temp\ =\ ByteArray(it.length().toInt())}
\DoxyCodeLine{\ \ \ \ it.readFully(temp)}
\DoxyCodeLine{\ \ \ \ temp}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{val\ bb\ =\ ByteBuffer.wrap(data)}
\DoxyCodeLine{val\ monster\ =\ Monster.getRootAsMonster(bb)}

\end{DoxyCode}


Now you can access the data from the {\ttfamily Monster monster}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{val\ hp\ =\ monster.hp}
\DoxyCodeLine{val\ pos\ =\ monster.pos!!;}

\end{DoxyCode}


\doxysection*{Differences between Kotlin and Java code}

Kotlin generated code was designed to be as close as possible to the java counterpart, as for now, we only support kotlin on java virtual machine. So the differences in implementation and usage are basically the ones introduced by the Kotlin language itself. You can find more in-\/depth information \href{https://kotlinlang.org/docs/reference/comparison-to-java.html}{\texttt{ here}}.

The most obvious ones are\+:


\begin{DoxyItemize}
\item Fields as accessed as Kotlin \href{https://kotlinlang.org/docs/reference/properties.html}{\texttt{ properties}}
\item Static methods are accessed in \href{https://kotlinlang.org/docs/reference/classes.html\#companion-objects}{\texttt{ companion object}} 
\end{DoxyItemize}