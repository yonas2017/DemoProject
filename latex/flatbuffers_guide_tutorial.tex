\chapter{Tutorial}
\hypertarget{flatbuffers_guide_tutorial}{}\label{flatbuffers_guide_tutorial}\index{Tutorial@{Tutorial}}
\doxysection*{Overview}

This tutorial provides a basic example of how to work with \doxysectlink{flatbuffers_index_flatbuffers_overview}{Flat\+Buffers}{1}. We will step through a simple example application, which shows you how to\+:


\begin{DoxyItemize}
\item Write a Flat\+Buffer {\ttfamily schema} file.
\item Use the {\ttfamily flatc} Flat\+Buffer compiler.
\item Parse \href{http://json.org}{\texttt{ JSON}} files that conform to a schema into Flat\+Buffer binary files.
\item Use the generated files in many of the supported languages (such as C++, Java, and more.)
\end{DoxyItemize}

During this example, imagine that you are creating a game where the main character, the hero of the story, needs to slay some {\ttfamily orc}s. We will walk through each step necessary to create this monster type using Flat\+Buffers.

Please select your desired language for our quest\+: 



\doxysection*{Where to Find the Example Code}

Samples demonstating the concepts in this example are located in the source code package, under the {\ttfamily samples} directory. You can browse the samples on Git\+Hub \href{https://github.com/google/flatbuffers/tree/master/samples}{\texttt{ here}}.

 {\itshape Note\+: The above does not apply to C, instead \href{https://github.com/dvidelabs/flatcc/tree/master/samples}{\texttt{ look here}}.} 

For your chosen language, please cross-\/reference with\+:

 \href{https://github.com/google/flatbuffers/blob/master/samples/sample_binary.cpp}{\texttt{ sample\+\_\+binary.\+cpp}}   \href{https://github.com/google/flatbuffers/blob/master/samples/SampleBinary.java}{\texttt{ Sample\+Binary.\+java}}   \href{https://github.com/google/flatbuffers/blob/master/samples/SampleBinary.kt}{\texttt{ Sample\+Binary.\+kt}}   \href{https://github.com/google/flatbuffers/blob/master/samples/SampleBinary.cs}{\texttt{ Sample\+Binary.\+cs}}   \href{https://github.com/google/flatbuffers/blob/master/samples/sample_binary.go}{\texttt{ sample\+\_\+binary.\+go}}   \href{https://github.com/google/flatbuffers/blob/master/samples/sample_binary.py}{\texttt{ sample\+\_\+binary.\+py}}   No sample binary is provided, since JS needs to be transpiled from Type\+Script. Please see Type\+Script support.   {\itshape none yet}   \href{https://github.com/google/flatbuffers/blob/master/samples/SampleBinary.php}{\texttt{ Sample\+Binary.\+php}}   \href{https://github.com/dvidelabs/flatcc/blob/master/samples/monster/monster.c}{\texttt{ monster.\+c}}   \href{https://github.com/google/flatbuffers/blob/master/dart/example/example.dart}{\texttt{ example.\+dart}}   \href{https://github.com/google/flatbuffers/blob/master/samples/sample_binary.lua}{\texttt{ sample\+\_\+binary.\+lua}}   \href{https://github.com/google/flatbuffers/blob/master/samples/sample_binary.lobster}{\texttt{ sample\+\_\+binary.\+lobster}}   \href{https://github.com/google/flatbuffers/blob/master/samples/sample_binary.rs}{\texttt{ sample\+\_\+binary.\+rs}}   \href{https://github.com/google/flatbuffers/blob/master/samples/sample_binary.swift}{\texttt{ sample\+\_\+binary.\+swift}} 

\doxysection*{Writing the Monsters\textquotesingle{} Flat\+Buffer Schema}

To start working with Flat\+Buffers, you first need to create a {\ttfamily schema} file, which defines the format for each data structure you wish to serialize. Here is the {\ttfamily schema} that defines the template for our monsters\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Example\ IDL\ file\ for\ our\ monster's\ schema.}
\DoxyCodeLine{}
\DoxyCodeLine{namespace\ MyGame.Sample;}
\DoxyCodeLine{}
\DoxyCodeLine{enum\ Color:byte\ \{\ Red\ =\ 0,\ Green,\ Blue\ =\ 2\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{union\ Equipment\ \{\ Weapon\ \}\ //\ Optionally\ add\ more\ tables.}
\DoxyCodeLine{}
\DoxyCodeLine{struct\ Vec3\ \{}
\DoxyCodeLine{\ \ x:float;}
\DoxyCodeLine{\ \ y:float;}
\DoxyCodeLine{\ \ z:float;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{table\ Monster\ \{}
\DoxyCodeLine{\ \ pos:Vec3;\ //\ Struct.}
\DoxyCodeLine{\ \ mana:short\ =\ 150;}
\DoxyCodeLine{\ \ hp:short\ =\ 100;}
\DoxyCodeLine{\ \ name:string;}
\DoxyCodeLine{\ \ friendly:bool\ =\ false\ (deprecated);}
\DoxyCodeLine{\ \ inventory:[ubyte];\ \ //\ Vector\ of\ scalars.}
\DoxyCodeLine{\ \ color:Color\ =\ Blue;\ //\ Enum.}
\DoxyCodeLine{\ \ weapons:[Weapon];\ \ \ //\ Vector\ of\ tables.}
\DoxyCodeLine{\ \ equipped:Equipment;\ //\ Union.}
\DoxyCodeLine{\ \ path:[Vec3];\ \ \ \ \ \ \ \ //\ Vector\ of\ structs.}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{table\ Weapon\ \{}
\DoxyCodeLine{\ \ name:string;}
\DoxyCodeLine{\ \ damage:short;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{root\_type\ Monster;}

\end{DoxyCode}


As you can see, the syntax for the {\ttfamily schema} \href{https://en.wikipedia.org/wiki/Interface_description_language}{\texttt{ Interface Definition Language (IDL)}} is similar to those of the C family of languages, and other IDL languages. Let\textquotesingle{}s examine each part of this {\ttfamily schema} to determine what it does.

The {\ttfamily schema} starts with a {\ttfamily namespace} declaration. This determines the corresponding package/namespace for the generated code. In our example, we have the {\ttfamily Sample} namespace inside of the {\ttfamily \doxylink{namespaceMyGame}{My\+Game}} namespace.

Next, we have an {\ttfamily enum} definition. In this example, we have an {\ttfamily enum} of type {\ttfamily byte}, named {\ttfamily Color}. We have three values in this {\ttfamily enum}\+: {\ttfamily Red}, {\ttfamily Green}, and {\ttfamily Blue}. We specify {\ttfamily Red = 0} and {\ttfamily Blue = 2}, but we do not specify an explicit value for {\ttfamily Green}. Since the behavior of an {\ttfamily enum} is to increment if unspecified, {\ttfamily Green} will receive the implicit value of {\ttfamily 1}.

Following the {\ttfamily enum} is a {\ttfamily union}. The {\ttfamily union} in this example is not very useful, as it only contains the one {\ttfamily table} (named {\ttfamily Weapon}). If we had created multiple tables that we would want the {\ttfamily union} to be able to reference, we could add more elements to the {\ttfamily union Equipment}.

After the {\ttfamily union} comes a {\ttfamily struct Vec3}, which represents a floating point vector with {\ttfamily 3} dimensions. We use a {\ttfamily struct} here, over a {\ttfamily table}, because {\ttfamily struct}s are ideal for data structures that will not change, since they use less memory and have faster lookup.

The {\ttfamily Monster} table is the main object in our Flat\+Buffer. This will be used as the template to store our {\ttfamily orc} monster. We specify some default values for fields, such as {\ttfamily mana\+:short = 150}. If unspecified, scalar fields (like {\ttfamily int}, {\ttfamily uint}, or {\ttfamily float}) will be given a default of {\ttfamily 0} while strings and tables will be given a default of {\ttfamily null}. Another thing to note is the line {\ttfamily friendly\+:bool = false (deprecated);}. Since you cannot delete fields from a {\ttfamily table} (to support backwards compatibility), you can set fields as {\ttfamily deprecated}, which will prevent the generation of accessors for this field in the generated code. Be careful when using {\ttfamily deprecated}, however, as it may break legacy code that used this accessor.

The {\ttfamily Weapon} table is a sub-\/table used within our Flat\+Buffer. It is used twice\+: once within the {\ttfamily Monster} table and once within the {\ttfamily Equipment} union. For our {\ttfamily Monster}, it is used to populate a {\ttfamily vector of tables} via the {\ttfamily weapons} field within our {\ttfamily Monster}. It is also the only table referenced by the {\ttfamily Equipment} union.

The last part of the {\ttfamily schema} is the {\ttfamily root\+\_\+type}. The root type declares what will be the root table for the serialized data. In our case, the root type is our {\ttfamily Monster} table.

The scalar types can also use alias type names such as {\ttfamily int16} instead of {\ttfamily short} and {\ttfamily float32} instead of {\ttfamily float}. Thus we could also write the {\ttfamily Weapon} table as\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{table\ Weapon\ \{}
\DoxyCodeLine{\ \ name:string;}
\DoxyCodeLine{\ \ damage:int16;}
\DoxyCodeLine{\}}

\end{DoxyCode}


\doxysubsubsection*{More Information About Schemas}

You can find a complete guide to writing {\ttfamily schema} files in the \doxysectlink{flatbuffers_guide_writing_schema}{Writing a schema}{0} section of the Programmer\textquotesingle{}s Guide. You can also view the formal \doxysectlink{flatbuffers_grammar}{Grammar of the schema language}{0}.

\doxysection*{Compiling the Monsters\textquotesingle{} Schema}

After you have written the Flat\+Buffers schema, the next step is to compile it.

If you have not already done so, please follow \doxysectlink{flatbuffers_guide_building}{these instructions}{0} to build {\ttfamily flatc}, the Flat\+Buffer compiler.

Once {\ttfamily flatc} is built successfully, compile the schema for your language\+:

 {\itshape Note\+: If you\textquotesingle{}re working in C, you need to use the separate project \href{https://github.com/dvidelabs/flatcc}{\texttt{ Flat\+CC}} which contains a schema compiler and runtime library in C for C.} ~\newline
 See \href{https://github.com/dvidelabs/flatcc\#building}{\texttt{ flatcc build instructions}}. ~\newline
 Please be aware of the difference between {\ttfamily flatc} and {\ttfamily flatcc} tools. ~\newline
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/cpp\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/java\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/kotlin\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/csharp\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/go\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/python\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/ts-\/flat-\/files\ -\/-\/ts\ monster.fbs}
\DoxyCodeLine{\#\ produces\ ts/js\ modules\ and\ js\ bundle\ monster\_generated.js}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/ts\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/sample}
\DoxyCodeLine{./../flatc\ -\/-\/php\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatcc}
\DoxyCodeLine{mkdir\ -\/p\ build/tmp/samples/monster}
\DoxyCodeLine{bin/flatcc\ -\/a\ -\/o\ build/tmp/samples/monster\ samples/monster/monster.fbs}
\DoxyCodeLine{\#\ or\ just}
\DoxyCodeLine{flatcc/samples/monster/build.sh}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/dart\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/lua\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/lobster\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/rust\ monster.fbs}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ flatbuffers/samples}
\DoxyCodeLine{./../flatc\ -\/-\/swift\ monster.fbs}

\end{DoxyCode}
 

For a more complete guide to using the {\ttfamily flatc} compiler, please read the \doxysectlink{flatbuffers_guide_using_schema_compiler}{Using the schema compiler}{0} section of the Programmer\textquotesingle{}s Guide.

\doxysection*{Reading and Writing Monster Flat\+Buffers}

Now that we have compiled the schema for our programming language, we can start creating some monsters and serializing/deserializing them from Flat\+Buffers.

\doxysubsubsection*{Creating and Writing Orc Flat\+Buffers}

The first step is to import/include the library, generated files, etc.

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{monster__generated_8h}{monster\_generated.h}}"{}}\ \textcolor{comment}{//\ This\ was\ generated\ by\ \`{}flatc`.}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespaceMyGame_1_1Sample}{MyGame::Sample}};\ \textcolor{comment}{//\ Specified\ in\ the\ schema.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{import}\ \mbox{\hyperlink{namespaceMyGame}{MyGame}}.\mbox{\hyperlink{namespaceMyGame_1_1Sample}{Sample}}.*;\ \textcolor{comment}{//The\ \`{}flatc`\ generated\ files.\ (Monster,\ Vec3,\ etc.)}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{import}\ \mbox{\hyperlink{namespacecom}{com}}.\mbox{\hyperlink{namespacecom_1_1google}{google}}.\mbox{\hyperlink{namespacecom_1_1google_1_1flatbuffers}{flatbuffers}}.\mbox{\hyperlink{classcom_1_1google_1_1flatbuffers_1_1FlatBufferBuilder}{FlatBufferBuilder}};}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ MyGame.Sample.*\ //The\ \`{}flatc`\ generated\ files.\ (Monster,\ Vec3,\ etc.)}
\DoxyCodeLine{}
\DoxyCodeLine{import\ com.google.flatbuffers.FlatBufferBuilder}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceGoogle_1_1FlatBuffers}{Google.FlatBuffers}};}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceMyGame_1_1Sample}{MyGame.Sample}};\ \textcolor{comment}{//\ The\ \`{}flatc`\ generated\ files.\ (Monster,\ Vec3,\ etc.)}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ (}
\DoxyCodeLine{\ \ \ \ \ \ \ \ flatbuffers\ "{}github.com/google/flatbuffers/go"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ sample\ "{}MyGame/Sample"{}}
\DoxyCodeLine{)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{import}\ flatbuffers}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ Generated\ by\ \`{}flatc`.}}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Color}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Equipment}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Monster}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Vec3}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Weapon}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ The\ following\ code\ is\ an\ example\ -\/\ use\ your\ desired\ module\ flavor\ by\ transpiling\ from\ TS.\ }
\DoxyCodeLine{var\ flatbuffers\ =\ require('/js/flatbuffers').flatbuffers;}
\DoxyCodeLine{var\ MyGame\ =\ require('./monster\_generated').MyGame;\ //\ Generated\ by\ \`{}flatc`.}
\DoxyCodeLine{}
\DoxyCodeLine{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\///}
\DoxyCodeLine{}
\DoxyCodeLine{//\ The\ following\ code\ is\ for\ browser-\/based\ HTML/JavaScript.\ Use\ the\ above\ code}
\DoxyCodeLine{//\ for\ JavaScript\ module\ loaders\ (e.g.\ Node.js).}
\DoxyCodeLine{<script\ src="{}../js/flatbuffers.js"{}></script>}
\DoxyCodeLine{<script\ src="{}monster\_generated.js"{}></script>\ //\ Generated\ by\ \`{}flatc`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ note:\ import\ flatbuffers\ with\ your\ desired\ import\ method}
\DoxyCodeLine{}
\DoxyCodeLine{import\ \{\ MyGame\ \}\ from\ './monster\_generated';}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ It\ is\ recommended\ that\ your\ use\ PSR\ autoload\ when\ using\ FlatBuffers\ in\ PHP.}}
\DoxyCodeLine{\textcolor{comment}{//\ Here\ is\ an\ example\ from\ \`{}SampleBinary.php`:}}
\DoxyCodeLine{\textcolor{keyword}{function}\ \mbox{\hyperlink{SampleBinary_8php_a80a3892ecad687b96b542109495df0f0}{\_\_autoload}}(\$class\_name)\ \{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ The\ last\ segment\ of\ the\ class\ name\ matches\ the\ file\ name.}}
\DoxyCodeLine{\ \ \$class\ =\ substr(\$class\_name,\ strrpos(\$class\_name,\ \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}})\ +\ 1);}
\DoxyCodeLine{\ \ \$root\_dir\ =\ join(DIRECTORY\_SEPARATOR,\ array(dirname(dirname(\_\_FILE\_\_))));\ \textcolor{comment}{//\ \`{}flatbuffers`\ root.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ Contains\ the\ \`{}*.php`\ files\ for\ the\ FlatBuffers\ library\ and\ the\ \`{}flatc`\ generated\ files.}}
\DoxyCodeLine{\ \ \$paths\ =\ array(join(DIRECTORY\_SEPARATOR,\ array(\$root\_dir,\ \textcolor{stringliteral}{"{}php"{}})),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ join(DIRECTORY\_SEPARATOR,\ array(\$root\_dir,\ \textcolor{stringliteral}{"{}samples"{}},\ \textcolor{stringliteral}{"{}MyGame"{}},\ \textcolor{stringliteral}{"{}Sample"{}})));}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{foreach}\ (\$paths\ as\ \$path)\ \{}
\DoxyCodeLine{\ \ \ \ \$file\ =\ join(DIRECTORY\_SEPARATOR,\ array(\$path,\ \$class\ .\ \textcolor{stringliteral}{"{}.php"{}}));}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (file\_exists(\$file))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ require(\$file);}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}monster\_builder.h"{}}\ \textcolor{comment}{//\ Generated\ by\ \`{}flatcc`.}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Convenient\ namespace\ macro\ to\ manage\ long\ namespace\ prefix.}}
\DoxyCodeLine{\textcolor{preprocessor}{\#undef\ ns}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ ns(x)\ FLATBUFFERS\_WRAP\_NAMESPACE(MyGame\_Sample,\ x)\ }\textcolor{comment}{//\ Specified\ in\ the\ schema.}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ A\ helper\ to\ simplify\ creating\ vectors\ from\ C-\/arrays.}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ c\_vec\_len(V)\ (sizeof(V)/sizeof((V)[0]))}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ 'package:flat\_buffers/flat\_buffers.dart'\ as\ fb;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Generated\ by\ \`{}flatc`.}
\DoxyCodeLine{import\ 'monster\_my\_game.sample\_generated.dart'\ as\ myGame;}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ require\ the\ flatbuffers\ module}
\DoxyCodeLine{local\ flatbuffers\ =\ require("{}flatbuffers"{})}
\DoxyCodeLine{}
\DoxyCodeLine{-\/-\/\ require\ the\ generated\ files\ from\ \`{}flatc`.}
\DoxyCodeLine{local\ color\ =\ require("{}MyGame.Sample.Color"{})}
\DoxyCodeLine{local\ equipment\ =\ require("{}MyGame.Sample.Equipment"{})}
\DoxyCodeLine{local\ monster\ =\ require("{}MyGame.Sample.Monster"{})}
\DoxyCodeLine{local\ vec3\ =\ require("{}MyGame.Sample.Vec3"{})}
\DoxyCodeLine{local\ weapon\ =\ require("{}MyGame.Sample.Weapon"{})}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ from\ "{}../lobster/"{}\ \ //\ Where\ to\ find\ flatbuffers.lobster}
\DoxyCodeLine{import\ monster\_generated}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ import\ the\ flatbuffers\ runtime\ library}
\DoxyCodeLine{extern\ crate\ flatbuffers;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ import\ the\ generated\ code}
\DoxyCodeLine{\#[allow(dead\_code,\ unused\_imports)]}
\DoxyCodeLine{\#[path\ =\ "{}./monster\_generated.rs"{}]}
\DoxyCodeLine{mod\ monster\_generated;}
\DoxyCodeLine{pub\ use\ monster\_generated::my\_game::sample::\{root\_as\_monster,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Color,\ Equipment,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Monster,\ MonsterArgs,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Vec3,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Weapon,\ WeaponArgs\};}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{/**}
\DoxyCodeLine{//\ make\ sure\ that\ monster\_generated.swift\ is\ included\ in\ your\ project}
\DoxyCodeLine{*/}
\DoxyCodeLine{import\ Flatbuffers}
\DoxyCodeLine{}
\DoxyCodeLine{//\ typealiases\ for\ convenience}
\DoxyCodeLine{typealias\ Monster\ =\ MyGame1\_Sample\_Monster}
\DoxyCodeLine{typealias\ Weapon\ =\ MyGame1\_Sample\_Weapon}
\DoxyCodeLine{typealias\ Color\ =\ MyGame1\_Sample\_Color}
\DoxyCodeLine{typealias\ Vec3\ =\ MyGame1\_Sample\_Vec3}

\end{DoxyCode}
 

Now we are ready to start building some buffers. In order to start, we need to create an instance of the {\ttfamily \doxylink{classFlatBufferBuilder}{Flat\+Buffer\+Builder}}, which will contain the buffer as it grows. You can pass an initial size of the buffer (here 1024 bytes), which will grow automatically if needed\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ create\ our}}
\DoxyCodeLine{\textcolor{comment}{//\ monsters'\ FlatBuffers.}}
\DoxyCodeLine{\mbox{\hyperlink{classflatbuffers_1_1FlatBufferBuilderImpl}{flatbuffers::FlatBufferBuilder}}\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}(1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ create\ our}}
\DoxyCodeLine{\textcolor{comment}{//\ monsters'\ FlatBuffers.}}
\DoxyCodeLine{\mbox{\hyperlink{classFlatBufferBuilder}{FlatBufferBuilder}}\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classFlatBufferBuilder}{FlatBufferBuilder}}(1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ create\ our}
\DoxyCodeLine{//\ monsters'\ FlatBuffers.}
\DoxyCodeLine{val\ builder\ =\ FlatBufferBuilder(1024)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ create\ our}}
\DoxyCodeLine{\textcolor{comment}{//\ monsters'\ FlatBuffers.}}
\DoxyCodeLine{var\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classFlatBufferBuilder}{FlatBufferBuilder}}(1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ create\ our}
\DoxyCodeLine{//\ monsters'\ FlatBuffers.}
\DoxyCodeLine{builder\ :=\ flatbuffers.NewBuilder(1024)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{\#\ Create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ create\ our}}
\DoxyCodeLine{\textcolor{comment}{\#\ monsters'\ FlatBuffers.}}
\DoxyCodeLine{builder\ =\ flatbuffers.Builder(1024)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ a\ \`{}flatbuffer.Builder`,\ which\ will\ be\ used\ to\ create\ our}
\DoxyCodeLine{//\ monsters'\ FlatBuffers.}
\DoxyCodeLine{var\ builder\ =\ new\ flatbuffers.Builder(1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ a\ \`{}flatbuffer.Builder`,\ which\ will\ be\ used\ to\ create\ our}
\DoxyCodeLine{//\ monsters'\ FlatBuffers.}
\DoxyCodeLine{let\ builder\ =\ new\ flatbuffers.Builder(1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ create\ our}}
\DoxyCodeLine{\textcolor{comment}{//\ monsters'\ FlatBuffers.}}
\DoxyCodeLine{\$builder\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGoogle_1_1FlatBuffers_1_1FlatbufferBuilder}{Google\(\backslash\)FlatBuffers\(\backslash\)FlatbufferBuilder}}(1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{flatcc\_builder\_t\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}},\ *\mbox{\hyperlink{namespaceMyGame_1_1Example_ae1991218ee8cc642c45550d117f89dc8a9d5ed678fe57bcca610140957afab571}{B}};}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ae1991218ee8cc642c45550d117f89dc8a9d5ed678fe57bcca610140957afab571}{B}}\ =\ \&\mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}};}
\DoxyCodeLine{\textcolor{comment}{//\ Initialize\ the\ builder\ object.}}
\DoxyCodeLine{flatcc\_builder\_init(B);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ the\ fb.Builder\ object\ that\ will\ be\ used\ by\ our\ generated\ builders}
\DoxyCodeLine{//\ Note\ that\ if\ you\ are\ only\ planning\ to\ immediately\ get\ the\ byte\ array\ this\ builder\ would\ create,}
\DoxyCodeLine{//\ you\ can\ use\ the\ convenience\ method\ \`{}toBytes()`\ on\ the\ generated\ builders.}
\DoxyCodeLine{//\ For\ example,\ you\ could\ do\ something\ like\ \`{}new\ myGame.MonsterBuilder(...).toBytes()`}
\DoxyCodeLine{var\ builder\ =\ new\ fb.Builder(initialSize:\ 1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ get\ access\ to\ the\ builder,\ providing\ an\ array\ of\ size\ 1024}
\DoxyCodeLine{local\ builder\ =\ flatbuffers.Builder(1024)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ get\ access\ to\ the\ builder}
\DoxyCodeLine{let\ builder\ =\ flatbuffers\_builder\ \{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Build\ up\ a\ serialized\ buffer\ algorithmically.}
\DoxyCodeLine{//\ Initialize\ it\ with\ a\ capacity\ of\ 1024\ bytes.}
\DoxyCodeLine{let\ mut\ builder\ =\ flatbuffers::FlatBufferBuilder::with\_capacity(1024);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ create\ a\ \`{}FlatBufferBuilder`,\ which\ will\ be\ used\ to\ serialize\ objects}
\DoxyCodeLine{let\ builder\ =\ FlatBufferBuilder(initialSize:\ 1024)}

\end{DoxyCode}
 

After creating the {\ttfamily builder}, we can start serializing our data. Before we make our {\ttfamily orc} Monster, let\textquotesingle{}s create some {\ttfamily Weapon}s\+: a {\ttfamily Sword} and an {\ttfamily Axe}.

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ weapon\_one\_name\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateString(\textcolor{stringliteral}{"{}Sword"{}});}
\DoxyCodeLine{\textcolor{keywordtype}{short}\ weapon\_one\_damage\ =\ 3;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto}\ weapon\_two\_name\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateString(\textcolor{stringliteral}{"{}Axe"{}});}
\DoxyCodeLine{\textcolor{keywordtype}{short}\ weapon\_two\_damage\ =\ 5;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Use\ the\ \`{}CreateWeapon`\ shortcut\ to\ create\ Weapons\ with\ all\ the\ fields\ set.}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ sword\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_a2a04d85d1d0be9eadebeb703bc4c8113}{CreateWeapon}}(builder,\ weapon\_one\_name,\ weapon\_one\_damage);}
\DoxyCodeLine{\textcolor{keyword}{auto}\ axe\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_a2a04d85d1d0be9eadebeb703bc4c8113}{CreateWeapon}}(builder,\ weapon\_two\_name,\ weapon\_two\_damage);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ weaponOneName\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.createString(\textcolor{stringliteral}{"{}Sword"{}})}
\DoxyCodeLine{\textcolor{keywordtype}{short}\ weaponOneDamage\ =\ 3;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ weaponTwoName\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.createString(\textcolor{stringliteral}{"{}Axe"{}});}
\DoxyCodeLine{\textcolor{keywordtype}{short}\ weaponTwoDamage\ =\ 5;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Use\ the\ \`{}createWeapon()`\ helper\ function\ to\ create\ the\ weapons,\ since\ we\ set\ every\ field.}}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ sword\ =\ Weapon.createWeapon(builder,\ weaponOneName,\ weaponOneDamage);}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ axe\ =\ Weapon.createWeapon(builder,\ weaponTwoName,\ weaponTwoDamage);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ weaponOneName\ =\ builder.createString("{}Sword"{})}
\DoxyCodeLine{val\ weaponOneDamage:\ Short\ =\ 3;}
\DoxyCodeLine{}
\DoxyCodeLine{val\ weaponTwoName\ =\ builder.createString("{}Axe"{})}
\DoxyCodeLine{val\ weaponTwoDamage:\ Short\ =\ 5;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Use\ the\ \`{}createWeapon()`\ helper\ function\ to\ create\ the\ weapons,\ since\ we\ set\ every\ field.}
\DoxyCodeLine{val\ sword\ =\ Weapon.createWeapon(builder,\ weaponOneName,\ weaponOneDamage)}
\DoxyCodeLine{val\ axe\ =\ Weapon.createWeapon(builder,\ weaponTwoName,\ weaponTwoDamage)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ weaponOneName\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateString(\textcolor{stringliteral}{"{}Sword"{}});}
\DoxyCodeLine{var\ weaponOneDamage\ =\ 3;}
\DoxyCodeLine{}
\DoxyCodeLine{var\ weaponTwoName\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateString(\textcolor{stringliteral}{"{}Axe"{}});}
\DoxyCodeLine{var\ weaponTwoDamage\ =\ 5;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Use\ the\ \`{}CreateWeapon()`\ helper\ function\ to\ create\ the\ weapons,\ since\ we\ set\ every\ field.}}
\DoxyCodeLine{var\ sword\ =\ Weapon.CreateWeapon(builder,\ weaponOneName,\ (\textcolor{keywordtype}{short})weaponOneDamage);}
\DoxyCodeLine{var\ axe\ =\ Weapon.CreateWeapon(builder,\ weaponTwoName,\ (\textcolor{keywordtype}{short})weaponTwoDamage);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{weaponOne\ :=\ builder.CreateString("{}Sword"{})}
\DoxyCodeLine{weaponTwo\ :=\ builder.CreateString("{}Axe"{})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ the\ first\ \`{}Weapon`\ ("{}Sword"{}).}
\DoxyCodeLine{sample.WeaponStart(builder)}
\DoxyCodeLine{sample.WeaponAddName(builder,\ weaponOne)}
\DoxyCodeLine{sample.WeaponAddDamage(builder,\ 3)}
\DoxyCodeLine{sword\ :=\ sample.WeaponEnd(builder)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ the\ second\ \`{}Weapon`\ ("{}Axe"{}).}
\DoxyCodeLine{sample.WeaponStart(builder)}
\DoxyCodeLine{sample.WeaponAddName(builder,\ weaponTwo)}
\DoxyCodeLine{sample.WeaponAddDamage(builder,\ 5)}
\DoxyCodeLine{axe\ :=\ sample.WeaponEnd(builder)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{weapon\_one\ =\ builder.CreateString(\textcolor{stringliteral}{'Sword'})}
\DoxyCodeLine{weapon\_two\ =\ builder.CreateString(\textcolor{stringliteral}{'Axe'})}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ Create\ the\ first\ \`{}Weapon`\ ('Sword').}}
\DoxyCodeLine{MyGame.Sample.Weapon.Start(builder)}
\DoxyCodeLine{MyGame.Sample.Weapon.AddName(builder,\ weapon\_one)}
\DoxyCodeLine{MyGame.Sample.Weapon.AddDamage(builder,\ 3)}
\DoxyCodeLine{sword\ =\ MyGame.Sample.Weapon.End(builder)}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ Create\ the\ second\ \`{}Weapon`\ ('Axe').}}
\DoxyCodeLine{MyGame.Sample.Weapon.Start(builder)}
\DoxyCodeLine{MyGame.Sample.Weapon.AddName(builder,\ weapon\_two)}
\DoxyCodeLine{MyGame.Sample.Weapon.AddDamage(builder,\ 5)}
\DoxyCodeLine{axe\ =\ MyGame.Sample.Weapon.End(builder)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ weaponOne\ =\ builder.createString('Sword');}
\DoxyCodeLine{var\ weaponTwo\ =\ builder.createString('Axe');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ the\ first\ \`{}Weapon`\ ('Sword').}
\DoxyCodeLine{MyGame.Sample.Weapon.startWeapon(builder);}
\DoxyCodeLine{MyGame.Sample.Weapon.addName(builder,\ weaponOne);}
\DoxyCodeLine{MyGame.Sample.Weapon.addDamage(builder,\ 3);}
\DoxyCodeLine{var\ sword\ =\ MyGame.Sample.Weapon.endWeapon(builder);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ the\ second\ \`{}Weapon`\ ('Axe').}
\DoxyCodeLine{MyGame.Sample.Weapon.startWeapon(builder);}
\DoxyCodeLine{MyGame.Sample.Weapon.addName(builder,\ weaponTwo);}
\DoxyCodeLine{MyGame.Sample.Weapon.addDamage(builder,\ 5);}
\DoxyCodeLine{var\ axe\ =\ MyGame.Sample.Weapon.endWeapon(builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ weaponOne\ =\ builder.createString('Sword');}
\DoxyCodeLine{let\ weaponTwo\ =\ builder.createString('Axe');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ the\ first\ \`{}Weapon`\ ('Sword').}
\DoxyCodeLine{MyGame.Sample.Weapon.startWeapon(builder);}
\DoxyCodeLine{MyGame.Sample.Weapon.addName(builder,\ weaponOne);}
\DoxyCodeLine{MyGame.Sample.Weapon.addDamage(builder,\ 3);}
\DoxyCodeLine{let\ sword\ =\ MyGame.Sample.Weapon.endWeapon(builder);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ the\ second\ \`{}Weapon`\ ('Axe').}
\DoxyCodeLine{MyGame.Sample.Weapon.startWeapon(builder);}
\DoxyCodeLine{MyGame.Sample.Weapon.addName(builder,\ weaponTwo);}
\DoxyCodeLine{MyGame.Sample.Weapon.addDamage(builder,\ 5);}
\DoxyCodeLine{let\ axe\ =\ MyGame.Sample.Weapon.endWeapon(builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ the\ \`{}Weapon`s\ using\ the\ \`{}createWeapon()`\ helper\ function.}}
\DoxyCodeLine{\$weapon\_one\_name\ =\ \$builder-\/>createString(\textcolor{stringliteral}{"{}Sword"{}});}
\DoxyCodeLine{\$sword\ =\ \(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Weapon::CreateWeapon(\$builder,\ \$weapon\_one\_name,\ 3);}
\DoxyCodeLine{}
\DoxyCodeLine{\$weapon\_two\_name\ =\ \$builder-\/>createString(\textcolor{stringliteral}{"{}Axe"{}});}
\DoxyCodeLine{\$axe\ =\ \(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Weapon::CreateWeapon(\$builder,\ \$weapon\_two\_name,\ 5);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ an\ array\ from\ the\ two\ \`{}Weapon`s\ and\ pass\ it\ to\ the}}
\DoxyCodeLine{\textcolor{comment}{//\ \`{}CreateWeaponsVector()`\ method\ to\ create\ a\ FlatBuffer\ vector.}}
\DoxyCodeLine{\$weaps\ =\ array(\$sword,\ \$axe);}
\DoxyCodeLine{\$weapons\ =\ \(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::CreateWeaponsVector(\$builder,\ \$weaps);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{flatbuffers\_string\_ref\_t\ weapon\_one\_name\ =\ flatbuffers\_string\_create\_str(B,\ \textcolor{stringliteral}{"{}Sword"{}});}
\DoxyCodeLine{uint16\_t\ weapon\_one\_damage\ =\ 3;}
\DoxyCodeLine{}
\DoxyCodeLine{flatbuffers\_string\_ref\_t\ weapon\_two\_name\ =\ flatbuffers\_string\_create\_str(B,\ \textcolor{stringliteral}{"{}Axe"{}});}
\DoxyCodeLine{uint16\_t\ weapon\_two\_damage\ =\ 5;}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_ref\_t)\ sword\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_create(B,\ weapon\_one\_name,\ weapon\_one\_damage));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_ref\_t)\ axe\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_create(B,\ weapon\_two\_name,\ weapon\_two\_damage));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ The\ generated\ Builder\ classes\ work\ much\ like\ in\ other\ languages,}
\DoxyCodeLine{final\ int\ weaponOneName\ =\ builder.writeString("{}Sword"{});}
\DoxyCodeLine{final\ int\ weaponOneDamage\ =\ 3;}
\DoxyCodeLine{}
\DoxyCodeLine{final\ int\ weaponTwoName\ =\ builder.writeString("{}Axe"{});}
\DoxyCodeLine{final\ int\ weaponTwoDamage\ =\ 5;}
\DoxyCodeLine{}
\DoxyCodeLine{final\ swordBuilder\ =\ new\ myGame.WeaponBuilder(builder)}
\DoxyCodeLine{\ \ ..begin()}
\DoxyCodeLine{\ \ ..addNameOffset(weaponOneName)}
\DoxyCodeLine{\ \ ..addDamage(weaponOneDamage);}
\DoxyCodeLine{final\ int\ sword\ =\ swordBuilder.finish();}
\DoxyCodeLine{}
\DoxyCodeLine{final\ axeBuilder\ =\ new\ myGame.WeaponBuilder(builder)}
\DoxyCodeLine{\ \ ..begin()}
\DoxyCodeLine{\ \ ..addNameOffset(weaponTwoName)}
\DoxyCodeLine{\ \ ..addDamage(weaponTwoDamage);}
\DoxyCodeLine{final\ int\ axe\ =\ axeBuilder.finish();}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{//\ The\ generated\ ObjectBuilder\ classes\ offer\ an\ easier\ to\ use\ alternative}
\DoxyCodeLine{//\ at\ the\ cost\ of\ requiring\ some\ additional\ reference\ allocations.\ If\ memory}
\DoxyCodeLine{//\ usage\ is\ critical,\ or\ if\ you'll\ be\ working\ with\ especially\ large\ messages}
\DoxyCodeLine{//\ or\ tables,\ you\ should\ prefer\ using\ the\ generated\ Builder\ classes.}
\DoxyCodeLine{//\ The\ following\ code\ would\ produce\ an\ identical\ buffer\ as\ above.}
\DoxyCodeLine{final\ String\ weaponOneName\ =\ "{}Sword"{};}
\DoxyCodeLine{final\ int\ weaponOneDamage\ =\ 3;}
\DoxyCodeLine{}
\DoxyCodeLine{final\ String\ weaponTwoName\ =\ "{}Axe"{};}
\DoxyCodeLine{final\ int\ weaponTwoDamage\ =\ 5;}
\DoxyCodeLine{}
\DoxyCodeLine{final\ myGame.WeaponBuilder\ sword\ =\ new\ myGame.WeaponObjectBuilder(}
\DoxyCodeLine{\ \ name:\ weaponOneName,}
\DoxyCodeLine{\ \ damage:\ weaponOneDamage,}
\DoxyCodeLine{);}
\DoxyCodeLine{}
\DoxyCodeLine{final\ myGame.WeaponBuilder\ axe\ =\ new\ myGame.WeaponObjectBuilder(}
\DoxyCodeLine{\ \ name:\ weaponTwoName,}
\DoxyCodeLine{\ \ damage:\ weaponTwoDamage,}
\DoxyCodeLine{);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{local\ weaponOne\ =\ builder:CreateString("{}Sword"{})}
\DoxyCodeLine{local\ weaponTwo\ =\ builder:CreateString("{}Axe"{})}
\DoxyCodeLine{}
\DoxyCodeLine{-\/-\/\ Create\ the\ first\ 'Weapon'}
\DoxyCodeLine{weapon.Start(builder)}
\DoxyCodeLine{weapon.AddName(builder,\ weaponOne)}
\DoxyCodeLine{weapon.AddDamage(builder,\ 3)}
\DoxyCodeLine{local\ sword\ =\ weapon.End(builder)}
\DoxyCodeLine{}
\DoxyCodeLine{-\/-\/\ Create\ the\ second\ 'Weapon'}
\DoxyCodeLine{weapon.Start(builder)}
\DoxyCodeLine{weapon.AddName(builder,\ weaponTwo)}
\DoxyCodeLine{weapon.AddDamage(builder,\ 5)}
\DoxyCodeLine{local\ axe\ =\ weapon.End(builder)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ weapon\_names\ =\ [\ "{}Sword"{},\ "{}Axe"{}\ ]}
\DoxyCodeLine{let\ weapon\_damages\ =\ [\ 3,\ 5\ ]}
\DoxyCodeLine{}
\DoxyCodeLine{let\ weapon\_offsets\ =\ map(weapon\_names)\ name,\ i:}
\DoxyCodeLine{\ \ \ \ let\ ns\ =\ builder.CreateString(name)}
\DoxyCodeLine{\ \ \ \ MyGame\_Sample\_WeaponBuilder\ \{\ b\ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .start()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .add\_name(ns)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .add\_damage(weapon\_damages[i])}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .end()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Serialize\ some\ weapons\ for\ the\ Monster:\ A\ 'sword'\ and\ an\ 'axe'.}
\DoxyCodeLine{let\ weapon\_one\_name\ =\ builder.create\_string("{}Sword"{});}
\DoxyCodeLine{let\ weapon\_two\_name\ =\ builder.create\_string("{}Axe"{});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Use\ the\ \`{}Weapon::create`\ shortcut\ to\ create\ Weapons\ with\ named\ field}
\DoxyCodeLine{//\ arguments.}
\DoxyCodeLine{let\ sword\ =\ Weapon::create(\&mut\ builder,\ \&WeaponArgs\{}
\DoxyCodeLine{\ \ \ \ name:\ Some(weapon\_one\_name),}
\DoxyCodeLine{\ \ \ \ damage:\ 3,}
\DoxyCodeLine{\});}
\DoxyCodeLine{let\ axe\ =\ Weapon::create(\&mut\ builder,\ \&WeaponArgs\{}
\DoxyCodeLine{\ \ \ \ name:\ Some(weapon\_two\_name),}
\DoxyCodeLine{\ \ \ \ damage:\ 5,}
\DoxyCodeLine{\});}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ weapon1Name\ =\ builder.create(string:\ "{}Sword"{})}
\DoxyCodeLine{let\ weapon2Name\ =\ builder.create(string:\ "{}Axe"{})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ start\ creating\ the\ weapon\ by\ calling\ startWeapon}
\DoxyCodeLine{let\ weapon1Start\ =\ Weapon.startWeapon(\&builder)}
\DoxyCodeLine{Weapon.add(name:\ weapon1Name,\ \&builder)}
\DoxyCodeLine{Weapon.add(damage:\ 3,\ \&builder)}
\DoxyCodeLine{//\ end\ the\ object\ by\ passing\ the\ start\ point\ for\ the\ weapon\ 1}
\DoxyCodeLine{let\ sword\ =\ Weapon.endWeapon(\&builder,\ start:\ weapon1Start)}
\DoxyCodeLine{}
\DoxyCodeLine{let\ weapon2Start\ =\ Weapon.startWeapon(\&builder)}
\DoxyCodeLine{Weapon.add(name:\ weapon2Name,\ \&builder)}
\DoxyCodeLine{Weapon.add(damage:\ 5,\ \&builder)}
\DoxyCodeLine{let\ axe\ =\ Weapon.endWeapon(\&builder,\ start:\ weapon2Start)}

\end{DoxyCode}
 

Now let\textquotesingle{}s create our monster, the {\ttfamily orc}. For this {\ttfamily orc}, lets make him {\ttfamily red} with rage, positioned at {\ttfamily (1.\+0, 2.\+0, 3.\+0)}, and give him a large pool of hit points with {\ttfamily 300}. We can give him a vector of weapons to choose from (our {\ttfamily Sword} and {\ttfamily Axe} from earlier). In this case, we will equip him with the {\ttfamily Axe}, since it is the most powerful of the two. Lastly, let\textquotesingle{}s fill his inventory with some potential treasures that can be taken once he is defeated.

Before we serialize a monster, we need to first serialize any objects that are contained therein, i.\+e. we serialize the data tree using depth-\/first, pre-\/order traversal. This is generally easy to do on any tree structures.

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateString(\textcolor{stringliteral}{"{}Orc"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}}
\DoxyCodeLine{\textcolor{comment}{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ treasure[]\ =\ \{0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9\};}
\DoxyCodeLine{\textcolor{keyword}{auto}\ inventory\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateVector(treasure,\ 10);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.createString(\textcolor{stringliteral}{"{}Orc"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}}
\DoxyCodeLine{\textcolor{comment}{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}}
\DoxyCodeLine{\textcolor{keywordtype}{byte}[]\ treasure\ =\ \{0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9\};}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ inv\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.createInventoryVector(builder,\ treasure);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}
\DoxyCodeLine{val\ name\ =\ builder.createString("{}Orc"{})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}
\DoxyCodeLine{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}
\DoxyCodeLine{val\ treasure\ =\ byteArrayOf(0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9)}
\DoxyCodeLine{val\ inv\ =\ Monster.createInventoryVector(builder,\ treasure)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}}
\DoxyCodeLine{var\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateString(\textcolor{stringliteral}{"{}Orc"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}}
\DoxyCodeLine{\textcolor{comment}{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}}
\DoxyCodeLine{\textcolor{comment}{//\ Note:\ Since\ we\ prepend\ the\ bytes,\ this\ loop\ iterates\ in\ reverse\ order.}}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.StartInventoryVector(builder,\ 10);}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 9;\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}\ >=\ 0;\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}-\/-\/)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.AddByte((\textcolor{keywordtype}{byte})\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{\}}
\DoxyCodeLine{var\ inv\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.EndVector();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}
\DoxyCodeLine{name\ :=\ builder.CreateString("{}Orc"{})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}
\DoxyCodeLine{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}
\DoxyCodeLine{//\ Note:\ Since\ we\ prepend\ the\ bytes,\ this\ loop\ iterates\ in\ reverse.}
\DoxyCodeLine{sample.MonsterStartInventoryVector(builder,\ 10)}
\DoxyCodeLine{for\ i\ :=\ 9;\ i\ >=\ 0;\ i-\/-\/\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ builder.PrependByte(byte(i))}
\DoxyCodeLine{\}}
\DoxyCodeLine{inv\ :=\ builder.EndVector(10)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{\#\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}}
\DoxyCodeLine{name\ =\ builder.CreateString(\textcolor{stringliteral}{"{}Orc"{}})}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}}
\DoxyCodeLine{\textcolor{comment}{\#\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}}
\DoxyCodeLine{\textcolor{comment}{\#\ Note:\ Since\ we\ prepend\ the\ bytes,\ this\ loop\ iterates\ in\ reverse.}}
\DoxyCodeLine{MyGame.Sample.Monster.StartInventoryVector(builder,\ 10)}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ reversed(range(0,\ 10)):}
\DoxyCodeLine{\ \ builder.PrependByte(i)}
\DoxyCodeLine{inv\ =\ builder.EndVector()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ 'Orc'.}
\DoxyCodeLine{var\ name\ =\ builder.createString('Orc');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}
\DoxyCodeLine{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}
\DoxyCodeLine{var\ treasure\ =\ [0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9];}
\DoxyCodeLine{var\ inv\ =\ MyGame.Sample.Monster.createInventoryVector(builder,\ treasure);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ 'Orc'.}
\DoxyCodeLine{let\ name\ =\ builder.createString('Orc');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}
\DoxyCodeLine{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}
\DoxyCodeLine{let\ treasure\ =\ [0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9];}
\DoxyCodeLine{let\ inv\ =\ MyGame.Sample.Monster.createInventoryVector(builder,\ treasure);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}}
\DoxyCodeLine{\$name\ =\ \$builder-\/>createString(\textcolor{stringliteral}{"{}Orc"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}}
\DoxyCodeLine{\textcolor{comment}{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}}
\DoxyCodeLine{\$treasure\ =\ array(0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9);}
\DoxyCodeLine{\$inv\ =\ \(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::CreateInventoryVector(\$builder,\ \$treasure);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}}
\DoxyCodeLine{\textcolor{comment}{//\ The\ \_str\ suffix\ indicates\ the\ source\ is\ an\ ascii-\/z\ string.}}
\DoxyCodeLine{flatbuffers\_string\_ref\_t\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ flatbuffers\_string\_create\_str(B,\ \textcolor{stringliteral}{"{}Orc"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ \`{}vector`\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}}
\DoxyCodeLine{\textcolor{comment}{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}}
\DoxyCodeLine{uint8\_t\ treasure[]\ =\ \{0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9\};}
\DoxyCodeLine{flatbuffers\_uint8\_vec\_ref\_t\ inventory;}
\DoxyCodeLine{\textcolor{comment}{//\ \`{}c\_vec\_len`\ is\ the\ convenience\ macro\ we\ defined\ earlier.}}
\DoxyCodeLine{inventory\ =\ flatbuffers\_uint8\_vec\_create(B,\ treasure,\ c\_vec\_len(treasure));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}
\DoxyCodeLine{final\ int\ name\ =\ builder.writeString('Orc');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ list\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}
\DoxyCodeLine{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}
\DoxyCodeLine{final\ List<int>\ treasure\ =\ [0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9];}
\DoxyCodeLine{final\ inventory\ =\ builder.writeListUint8(treasure);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ The\ following\ code\ should\ be\ used\ instead\ if\ you\ intend\ to\ use\ the}
\DoxyCodeLine{//\ ObjectBuilder\ classes:}
\DoxyCodeLine{//\ Serialize\ a\ name\ for\ our\ monster,\ called\ "{}Orc"{}.}
\DoxyCodeLine{final\ String\ name\ =\ 'Orc';}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Create\ a\ list\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}
\DoxyCodeLine{//\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ is\ slain.}
\DoxyCodeLine{final\ List<int>\ treasure\ =\ [0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9];}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ Serialize\ a\ name\ \textcolor{keywordflow}{for}\ our\ monster,\ called\ \textcolor{stringliteral}{'orc'}}
\DoxyCodeLine{local\ name\ =\ builder:CreateString(\textcolor{stringliteral}{"{}Orc"{}})}
\DoxyCodeLine{}
\DoxyCodeLine{-\/-\/\ Create\ a\ \`{}vector\`{}\ representing\ the\ inventory\ of\ the\ Orc.\ Each\ number}
\DoxyCodeLine{-\/-\/\ could\ correspond\ to\ an\ item\ that\ can\ be\ claimed\ after\ he\ \textcolor{keywordflow}{is}\ slain.}
\DoxyCodeLine{-\/-\/\ Note:\ Since\ we\ prepend\ the\ bytes,\ this\ loop\ iterates\ \textcolor{keywordflow}{in}\ reverse.}
\DoxyCodeLine{monster.StartInventoryVector(builder,\ 10)}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ i=10,1,-\/1\ do}
\DoxyCodeLine{\ \ \ \ builder:PrependByte(i)}
\DoxyCodeLine{end}
\DoxyCodeLine{local\ inv\ =\ builder:EndVector(10)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Name\ of\ the\ monster.}
\DoxyCodeLine{let\ name\ =\ builder.CreateString("{}Orc"{})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Inventory.}
\DoxyCodeLine{let\ inv\ =\ builder.MyGame\_Sample\_MonsterCreateInventoryVector(map(10):\ \_)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Name\ of\ the\ Monster.}
\DoxyCodeLine{let\ name\ =\ builder.create\_string("{}Orc"{});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Inventory.}
\DoxyCodeLine{let\ inventory\ =\ builder.create\_vector(\&[0u8,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9]);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Name\ of\ the\ Monster.}
\DoxyCodeLine{let\ name\ =\ builder.create(string:\ "{}Orc"{})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ create\ inventory}
\DoxyCodeLine{let\ inventory:\ [Byte]\ =\ [0,\ 1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 9]}
\DoxyCodeLine{let\ inventoryOffset\ =\ builder.createVector(inventory)}

\end{DoxyCode}
 

We serialized two built-\/in data types ({\ttfamily string} and {\ttfamily vector}) and captured their return values. These values are offsets into the serialized data, indicating where they are stored, such that we can refer to them below when adding fields to our monster.

{\itshape Note\+: To create a {\ttfamily vector} of nested objects (e.\+g. {\ttfamily table}s, {\ttfamily string}s, or other {\ttfamily vector}s), collect their offsets into a temporary data structure, and then create an additional {\ttfamily vector} containing their offsets.}

If instead of creating a vector from an existing array you serialize elements individually one by one, take care to note that this happens in reverse order, as buffers are built back to front.

For example, take a look at the two {\ttfamily Weapon}s that we created earlier ({\ttfamily Sword} and {\ttfamily Axe}). These are both Flat\+Buffer {\ttfamily table}s, whose offsets we now store in memory. Therefore we can create a Flat\+Buffer {\ttfamily vector} to contain these offsets.

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Place\ the\ weapons\ into\ a\ \`{}std::vector`,\ then\ convert\ that\ into\ a\ FlatBuffer\ \`{}vector`.}}
\DoxyCodeLine{std::vector<flatbuffers::Offset<Weapon>>\ weapons\_vector;}
\DoxyCodeLine{weapons\_vector.push\_back(sword);}
\DoxyCodeLine{weapons\_vector.push\_back(axe);}
\DoxyCodeLine{\textcolor{keyword}{auto}\ weapons\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateVector(weapons\_vector);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Place\ the\ two\ weapons\ into\ an\ array,\ and\ pass\ it\ to\ the\ \`{}createWeaponsVector()`\ method\ to}}
\DoxyCodeLine{\textcolor{comment}{//\ create\ a\ FlatBuffer\ vector.}}
\DoxyCodeLine{\textcolor{keywordtype}{int}[]\ weaps\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[2];}
\DoxyCodeLine{weaps[0]\ =\ sword;}
\DoxyCodeLine{weaps[1]\ =\ axe;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Pass\ the\ \`{}weaps`\ array\ into\ the\ \`{}createWeaponsVector()`\ method\ to\ create\ a\ FlatBuffer\ vector.}}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ weapons\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.createWeaponsVector(builder,\ weaps);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Place\ the\ two\ weapons\ into\ an\ array,\ and\ pass\ it\ to\ the\ \`{}createWeaponsVector()`\ method\ to}
\DoxyCodeLine{//\ create\ a\ FlatBuffer\ vector.}
\DoxyCodeLine{val\ weaps\ =\ intArrayOf(sword,\ axe)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Pass\ the\ \`{}weaps`\ array\ into\ the\ \`{}createWeaponsVector()`\ method\ to\ create\ a\ FlatBuffer\ vector.}
\DoxyCodeLine{val\ weapons\ =\ Monster.createWeaponsVector(builder,\ weaps)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ weaps\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structGoogle_1_1FlatBuffers_1_1Offset}{Offset<Weapon>}}[2];}
\DoxyCodeLine{weaps[0]\ =\ sword;}
\DoxyCodeLine{weaps[1]\ =\ axe;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Pass\ the\ \`{}weaps`\ array\ into\ the\ \`{}CreateWeaponsVector()`\ method\ to\ create\ a\ FlatBuffer\ vector.}}
\DoxyCodeLine{var\ weapons\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.CreateWeaponsVector(builder,\ weaps);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ a\ FlatBuffer\ vector\ and\ prepend\ the\ weapons.}
\DoxyCodeLine{//\ Note:\ Since\ we\ prepend\ the\ data,\ prepend\ them\ in\ reverse\ order.}
\DoxyCodeLine{sample.MonsterStartWeaponsVector(builder,\ 2)}
\DoxyCodeLine{builder.PrependUOffsetT(axe)}
\DoxyCodeLine{builder.PrependUOffsetT(sword)}
\DoxyCodeLine{weapons\ :=\ builder.EndVector(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{\#\ Create\ a\ FlatBuffer\ vector\ and\ prepend\ the\ weapons.}}
\DoxyCodeLine{\textcolor{comment}{\#\ Note:\ Since\ we\ prepend\ the\ data,\ prepend\ them\ in\ reverse\ order.}}
\DoxyCodeLine{MyGame.Sample.Monster.StartWeaponsVector(builder,\ 2)}
\DoxyCodeLine{builder.PrependUOffsetTRelative(axe)}
\DoxyCodeLine{builder.PrependUOffsetTRelative(sword)}
\DoxyCodeLine{weapons\ =\ builder.EndVector()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ an\ array\ from\ the\ two\ \`{}Weapon`s\ and\ pass\ it\ to\ the}
\DoxyCodeLine{//\ \`{}createWeaponsVector()`\ method\ to\ create\ a\ FlatBuffer\ vector.}
\DoxyCodeLine{var\ weaps\ =\ [sword,\ axe];}
\DoxyCodeLine{var\ weapons\ =\ MyGame.Sample.Monster.createWeaponsVector(builder,\ weaps);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ an\ array\ from\ the\ two\ \`{}Weapon`s\ and\ pass\ it\ to\ the}
\DoxyCodeLine{//\ \`{}createWeaponsVector()`\ method\ to\ create\ a\ FlatBuffer\ vector.}
\DoxyCodeLine{let\ weaps\ =\ [sword,\ axe];}
\DoxyCodeLine{let\ weapons\ =\ MyGame.Sample.Monster.createWeaponsVector(builder,\ weaps);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ an\ array\ from\ the\ two\ \`{}Weapon`s\ and\ pass\ it\ to\ the}}
\DoxyCodeLine{\textcolor{comment}{//\ \`{}CreateWeaponsVector()`\ method\ to\ create\ a\ FlatBuffer\ vector.}}
\DoxyCodeLine{\$weaps\ =\ array(\$sword,\ \$axe);}
\DoxyCodeLine{\$weapons\ =\ \(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::CreateWeaponsVector(\$builder,\ \$weaps);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ We\ use\ the\ internal\ builder\ stack\ to\ implement\ a\ dynamic\ vector.}}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_start(B));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_push(B,\ sword));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_push(B,\ axe));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_ref\_t)\ weapons\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_end(B));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ If\ using\ the\ Builder\ classes,\ serialize\ the\ \`{}[sword,axe]`}
\DoxyCodeLine{final\ weapons\ =\ builder.writeList([sword,\ axe]);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ If\ using\ the\ ObjectBuilders,\ just\ create\ an\ array\ from\ the\ two\ \`{}Weapon`s}
\DoxyCodeLine{final\ List<myGame.WeaponBuilder>\ weaps\ =\ [sword,\ axe];}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ Create\ a\ FlatBuffer\ vector\ and\ prepend\ the\ weapons.}
\DoxyCodeLine{-\/-\/\ Note:\ Since\ we\ prepend\ the\ data,\ prepend\ them\ in\ reverse\ order.}
\DoxyCodeLine{monster.StartWeaponsVector(builder,\ 2)}
\DoxyCodeLine{builder:PrependUOffsetTRelative(axe)}
\DoxyCodeLine{builder:PrependUOffsetTRelative(sword)}
\DoxyCodeLine{local\ weapons\ =\ builder:EndVector(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ weapons\ =\ builder.MyGame\_Sample\_MonsterCreateWeaponsVector(weapon\_offsets)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ a\ FlatBuffer\ \`{}vector`\ that\ contains\ offsets\ to\ the\ sword\ and\ axe}
\DoxyCodeLine{//\ we\ created\ above.}
\DoxyCodeLine{let\ weapons\ =\ builder.create\_vector(\&[sword,\ axe]);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ a\ FlatBuffer\ \`{}vector`\ that\ contains\ offsets\ to\ the\ sword\ and\ axe}
\DoxyCodeLine{//\ we\ created\ above.}
\DoxyCodeLine{let\ weaponsOffset\ =\ builder.createVector(ofOffsets:\ [sword,\ axe])}

\end{DoxyCode}
 

~\newline
 Note there are additional convenience overloads of {\ttfamily Create\+Vector}, allowing you to work with data that\textquotesingle{}s not in a {\ttfamily std\+::vector} or allowing you to generate elements by calling a lambda. For the common case of {\ttfamily std\+::vector\texorpdfstring{$<$}{<}std\+::string\texorpdfstring{$>$}{>}} there\textquotesingle{}s also {\ttfamily Create\+Vector\+Of\+Strings}. 

Note that vectors of structs are serialized differently from tables, since structs are stored in-\/line in the vector. For example, to create a vector for the {\ttfamily path} field above\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{Vec3\ points[]\ =\ \{\ Vec3(1.0f,\ 2.0f,\ 3.0f),\ Vec3(4.0f,\ 5.0f,\ 6.0f)\ \};}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{idl__gen__ts_8cpp_a4d455efceee21e97d8e21ee40e9b4a20}{path}}\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.CreateVectorOfStructs(points,\ 2);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.startPathVector(fbb,\ 2);}
\DoxyCodeLine{Vec3.createVec3(builder,\ 1.0f,\ 2.0f,\ 3.0f);}
\DoxyCodeLine{Vec3.createVec3(builder,\ 4.0f,\ 5.0f,\ 6.0f);}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ \mbox{\hyperlink{idl__gen__ts_8cpp_a4d455efceee21e97d8e21ee40e9b4a20}{path}}\ =\ fbb.endVector();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{Monster.startPathVector(fbb,\ 2)}
\DoxyCodeLine{Vec3.createVec3(builder,\ 1.0f,\ 2.0f,\ 3.0f)}
\DoxyCodeLine{Vec3.createVec3(builder,\ 4.0f,\ 5.0f,\ 6.0f)}
\DoxyCodeLine{val\ path\ =\ fbb.endVector()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.StartPathVector(fbb,\ 2);}
\DoxyCodeLine{Vec3.CreateVec3(builder,\ 1.0f,\ 2.0f,\ 3.0f);}
\DoxyCodeLine{Vec3.CreateVec3(builder,\ 4.0f,\ 5.0f,\ 6.0f);}
\DoxyCodeLine{var\ \mbox{\hyperlink{idl__gen__ts_8cpp_a4d455efceee21e97d8e21ee40e9b4a20}{path}}\ =\ fbb.EndVector();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{sample.MonsterStartPathVector(builder,\ 2)}
\DoxyCodeLine{sample.CreateVec3(builder,\ 1.0,\ 2.0,\ 3.0)}
\DoxyCodeLine{sample.CreateVec3(builder,\ 4.0,\ 5.0,\ 6.0)}
\DoxyCodeLine{path\ :=\ builder.EndVector(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{MyGame.Sample.Monster.StartPathVector(builder,\ 2)}
\DoxyCodeLine{MyGame.Sample.Vec3.CreateVec3(builder,\ 1.0,\ 2.0,\ 3.0)}
\DoxyCodeLine{MyGame.Sample.Vec3.CreateVec3(builder,\ 4.0,\ 5.0,\ 6.0)}
\DoxyCodeLine{path\ =\ builder.EndVector()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{MyGame.Sample.Monster.startPathVector(builder,\ 2);}
\DoxyCodeLine{MyGame.Sample.Vec3.createVec3(builder,\ 1.0,\ 2.0,\ 3.0);}
\DoxyCodeLine{MyGame.Sample.Vec3.createVec3(builder,\ 4.0,\ 5.0,\ 6.0);}
\DoxyCodeLine{var\ path\ =\ builder.endVector();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{MyGame.Sample.Monster.startPathVector(builder,\ 2);}
\DoxyCodeLine{MyGame.Sample.Vec3.createVec3(builder,\ 1.0,\ 2.0,\ 3.0);}
\DoxyCodeLine{MyGame.Sample.Vec3.createVec3(builder,\ 4.0,\ 5.0,\ 6.0);}
\DoxyCodeLine{let\ path\ =\ builder.endVector();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Example\(\backslash\)Monster::StartPathVector(\$builder,\ 2);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Vec3::CreateVec3(\$builder,\ 1.0,\ 2.0,\ 3.0);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Vec3::CreateVec3(\$builder,\ 1.0,\ 2.0,\ 3.0);}
\DoxyCodeLine{\$path\ =\ \$builder-\/>endVector();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ TBD}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Using\ the\ Builder\ classes,\ you\ can\ write\ a\ list\ of\ structs\ like\ so:}
\DoxyCodeLine{//\ Note\ that\ the\ intended\ order\ should\ be\ reversed\ if\ order\ is\ important.}
\DoxyCodeLine{final\ vec3Builder\ =\ new\ myGame.Vec3Builder(builder);}
\DoxyCodeLine{vec3Builder.finish(4.0,\ 5.0,\ 6.0);}
\DoxyCodeLine{vec3Builder.finish(1.0,\ 2.0,\ 3.0);}
\DoxyCodeLine{final\ int\ path\ =\ builder.endStructVector(2);\ //\ the\ length\ of\ the\ vector}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Otherwise,\ using\ the\ ObjectBuilder\ classes:}
\DoxyCodeLine{//\ The\ dart\ implementation\ provides\ a\ simple\ interface\ for\ writing\ vectors}
\DoxyCodeLine{//\ of\ structs,\ in\ \`{}writeListOfStructs`.\ This\ method\ takes}
\DoxyCodeLine{//\ \`{}List<ObjectBuilder>`\ and\ is\ used\ by\ the\ generated\ builder\ classes.}
\DoxyCodeLine{final\ List<myGame.Vec3ObjectBuilder>\ path\ =\ [}
\DoxyCodeLine{\ \ new\ myGame.Vec3ObjectBuilder(x:\ 1.0,\ y:\ 2.0,\ z:\ 3.0),}
\DoxyCodeLine{\ \ new\ myGame.Vec3ObjectBuilder(x:\ 4.0,\ y:\ 5.0,\ z:\ 6.0)}
\DoxyCodeLine{];}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ Create\ a\ FlatBuffer\ vector\ and\ prepend\ the\ path\ locations.}
\DoxyCodeLine{-\/-\/\ Note:\ Since\ we\ prepend\ the\ data,\ prepend\ them\ in\ reverse\ order.}
\DoxyCodeLine{monster.StartPathVector(builder,\ 2)}
\DoxyCodeLine{vec3.CreateVec3(builder,\ 1.0,\ 2.0,\ 3.0)}
\DoxyCodeLine{vec3.CreateVec3(builder,\ 4.0,\ 5.0,\ 6.0)}
\DoxyCodeLine{local\ path\ =\ builder:EndVector(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{builder.MyGame\_Sample\_MonsterStartPathVector(2)}
\DoxyCodeLine{builder.MyGame\_Sample\_CreateVec3(1.0,\ 2.0,\ 3.0)}
\DoxyCodeLine{builder.MyGame\_Sample\_CreateVec3(4.0,\ 5.0,\ 6.0)}
\DoxyCodeLine{let\ path\ =\ builder.EndVector(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ the\ path\ vector\ of\ Vec3\ objects.}
\DoxyCodeLine{let\ x\ =\ Vec3::new(1.0,\ 2.0,\ 3.0);}
\DoxyCodeLine{let\ y\ =\ Vec3::new(4.0,\ 5.0,\ 6.0);}
\DoxyCodeLine{let\ path\ =\ builder.create\_vector(\&[x,\ y]);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Note\ that,\ for\ convenience,\ it\ is\ also\ valid\ to\ create\ a\ vector\ of}
\DoxyCodeLine{//\ references\ to\ structs,\ like\ this:}
\DoxyCodeLine{//\ let\ path\ =\ builder.create\_vector(\&[\&x,\ \&y]);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//}
\DoxyCodeLine{let\ points\ =\ fbb.createVector(ofStructs:\ [}
\DoxyCodeLine{\ \ Vec3(x:\ 1,\ y:\ 2,\ z:\ 3),}
\DoxyCodeLine{\ \ Vec3(x:\ 4,\ y:\ 5,\ z:\ 6)}
\DoxyCodeLine{])}
\DoxyCodeLine{}
\DoxyCodeLine{//\ OR}
\DoxyCodeLine{var\ vec3\ =\ [}
\DoxyCodeLine{\ \ Vec3(x:\ 1,\ y:\ 2,\ z:\ 3),}
\DoxyCodeLine{\ \ Vec3(x:\ 4,\ y:\ 5,\ z:\ 6)}
\DoxyCodeLine{]}
\DoxyCodeLine{Monster.startVectorOfVec3(2,\ in:\ \&fbb)}
\DoxyCodeLine{for\ i\ in\ obj\ \{}
\DoxyCodeLine{\ \ \_\ =\ create(struct:\ i)}
\DoxyCodeLine{\}}
\DoxyCodeLine{let\ points\ =\ fbb.endVector(len:\ size)}

\end{DoxyCode}
 

We have now serialized the non-\/scalar components of the orc, so we can serialize the monster itself\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ the\ position\ struct}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ position\ =\ Vec3(1.0f,\ 2.0f,\ 3.0f);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Set\ his\ hit\ points\ to\ 300\ and\ his\ mana\ to\ 150.}}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ hp\ =\ 300;}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ mana\ =\ 150;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Finally,\ create\ the\ monster\ using\ the\ \`{}CreateMonster`\ helper\ function}}
\DoxyCodeLine{\textcolor{comment}{//\ to\ set\ all\ fields.}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ orc\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_a571543608e4de3824e6dad43621e0f46}{CreateMonster}}(builder,\ \&position,\ mana,\ hp,\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}},\ inventory,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{enums__generated_8h_a738b1b8abd03ae11a7632283c3a13ae3a03e71bffe64b5a7e9d60d7e51a43a669}{Color\_Red}},\ weapons,\ Equipment\_Weapon,\ axe.Union(),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ path);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ our\ monster\ using\ \`{}startMonster()`\ and\ \`{}endMonster()`.}}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.startMonster(builder);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addPos(builder,\ Vec3.createVec3(builder,\ 1.0f,\ 2.0f,\ 3.0f));}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addName(builder,\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}});}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addColor(builder,\ \mbox{\hyperlink{enums__generated_8h_a738b1b8abd03ae11a7632283c3a13ae3}{Color}}.Red);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addHp(builder,\ (\textcolor{keywordtype}{short})300);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addInventory(builder,\ inv);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addWeapons(builder,\ weapons);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addEquippedType(builder,\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_add5600c8554383eb7a8c7793a9da2a92}{Equipment}}.Weapon);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addEquipped(builder,\ axe);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addPath(builder,\ path);}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ orc\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.endMonster(builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ our\ monster\ using\ \`{}startMonster()`\ and\ \`{}endMonster()`.}
\DoxyCodeLine{Monster.startMonster(builder)}
\DoxyCodeLine{Monster.addPos(builder,\ Vec3.createVec3(builder,\ 1.0f,\ 2.0f,\ 3.0f))}
\DoxyCodeLine{Monster.addName(builder,\ name)}
\DoxyCodeLine{Monster.addColor(builder,\ Color.Red)}
\DoxyCodeLine{Monster.addHp(builder,\ 300.toShort())}
\DoxyCodeLine{Monster.addInventory(builder,\ inv)}
\DoxyCodeLine{Monster.addWeapons(builder,\ weapons)}
\DoxyCodeLine{Monster.addEquippedType(builder,\ Equipment.Weapon)}
\DoxyCodeLine{Monster.addEquipped(builder,\ axe)}
\DoxyCodeLine{Monster.addPath(builder,\ path)}
\DoxyCodeLine{val\ orc\ =\ Monster.endMonster(builder)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ our\ monster\ using\ \`{}StartMonster()`\ and\ \`{}EndMonster()`.}}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.StartMonster(builder);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddPos(builder,\ Vec3.CreateVec3(builder,\ 1.0f,\ 2.0f,\ 3.0f));}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddHp(builder,\ (\textcolor{keywordtype}{short})300);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddName(builder,\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}});}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddInventory(builder,\ inv);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddColor(builder,\ \mbox{\hyperlink{enums__generated_8h_a738b1b8abd03ae11a7632283c3a13ae3}{Color}}.Red);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddWeapons(builder,\ weapons);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddEquippedType(builder,\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_add5600c8554383eb7a8c7793a9da2a92}{Equipment}}.Weapon);}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddEquipped(builder,\ axe.Value);\ \textcolor{comment}{//\ Axe}}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddPath(builder,\ path);}
\DoxyCodeLine{var\ orc\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.EndMonster(builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ our\ monster\ using\ \`{}MonsterStart()`\ and\ \`{}MonsterEnd()`.}
\DoxyCodeLine{sample.MonsterStart(builder)}
\DoxyCodeLine{sample.MonsterAddPos(builder,\ sample.CreateVec3(builder,\ 1.0,\ 2.0,\ 3.0))}
\DoxyCodeLine{sample.MonsterAddHp(builder,\ 300)}
\DoxyCodeLine{sample.MonsterAddName(builder,\ name)}
\DoxyCodeLine{sample.MonsterAddInventory(builder,\ inv)}
\DoxyCodeLine{sample.MonsterAddColor(builder,\ sample.ColorRed)}
\DoxyCodeLine{sample.MonsterAddWeapons(builder,\ weapons)}
\DoxyCodeLine{sample.MonsterAddEquippedType(builder,\ sample.EquipmentWeapon)}
\DoxyCodeLine{sample.MonsterAddEquipped(builder,\ axe)}
\DoxyCodeLine{sample.MonsterAddPath(builder,\ path)}
\DoxyCodeLine{orc\ :=\ sample.MonsterEnd(builder)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{\#\ Create\ our\ monster\ by\ using\ \`{}Monster.Start()`\ and\ \`{}Monster.End()`.}}
\DoxyCodeLine{MyGame.Sample.Monster.Start(builder)}
\DoxyCodeLine{MyGame.Sample.Monster.AddPos(builder,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MyGame.Sample.Vec3.CreateVec3(builder,\ 1.0,\ 2.0,\ 3.0))}
\DoxyCodeLine{MyGame.Sample.Monster.AddHp(builder,\ 300)}
\DoxyCodeLine{MyGame.Sample.Monster.AddName(builder,\ name)}
\DoxyCodeLine{MyGame.Sample.Monster.AddInventory(builder,\ inv)}
\DoxyCodeLine{MyGame.Sample.Monster.AddColor(builder,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MyGame.Sample.Color.Color().Red)}
\DoxyCodeLine{MyGame.Sample.Monster.AddWeapons(builder,\ weapons)}
\DoxyCodeLine{MyGame.Sample.Monster.AddEquippedType(}
\DoxyCodeLine{\ \ \ \ builder,\ MyGame.Sample.Equipment.Equipment().Weapon)}
\DoxyCodeLine{MyGame.Sample.Monster.AddEquipped(builder,\ axe)}
\DoxyCodeLine{MyGame.Sample.Monster.AddPath(builder,\ path)}
\DoxyCodeLine{orc\ =\ MyGame.Sample.Monster.End(builder)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ our\ monster\ by\ using\ \`{}startMonster()`\ and\ \`{}endMonster()`.}
\DoxyCodeLine{MyGame.Sample.Monster.startMonster(builder);}
\DoxyCodeLine{MyGame.Sample.Monster.addPos(builder,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MyGame.Sample.Vec3.createVec3(builder,\ 1.0,\ 2.0,\ 3.0));}
\DoxyCodeLine{MyGame.Sample.Monster.addHp(builder,\ 300);}
\DoxyCodeLine{MyGame.Sample.Monster.addColor(builder,\ MyGame.Sample.Color.Red)}
\DoxyCodeLine{MyGame.Sample.Monster.addName(builder,\ name);}
\DoxyCodeLine{MyGame.Sample.Monster.addInventory(builder,\ inv);}
\DoxyCodeLine{MyGame.Sample.Monster.addWeapons(builder,\ weapons);}
\DoxyCodeLine{MyGame.Sample.Monster.addEquippedType(builder,\ MyGame.Sample.Equipment.Weapon);}
\DoxyCodeLine{MyGame.Sample.Monster.addEquipped(builder,\ axe);}
\DoxyCodeLine{MyGame.Sample.Monster.addPath(builder,\ path);}
\DoxyCodeLine{var\ orc\ =\ MyGame.Sample.Monster.endMonster(builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ our\ monster\ by\ using\ \`{}startMonster()`\ and\ \`{}endMonster()`.}
\DoxyCodeLine{MyGame.Sample.Monster.startMonster(builder);}
\DoxyCodeLine{MyGame.Sample.Monster.addPos(builder,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MyGame.Sample.Vec3.createVec3(builder,\ 1.0,\ 2.0,\ 3.0));}
\DoxyCodeLine{MyGame.Sample.Monster.addHp(builder,\ 300);}
\DoxyCodeLine{MyGame.Sample.Monster.addColor(builder,\ MyGame.Sample.Color.Red)}
\DoxyCodeLine{MyGame.Sample.Monster.addName(builder,\ name);}
\DoxyCodeLine{MyGame.Sample.Monster.addInventory(builder,\ inv);}
\DoxyCodeLine{MyGame.Sample.Monster.addWeapons(builder,\ weapons);}
\DoxyCodeLine{MyGame.Sample.Monster.addEquippedType(builder,\ MyGame.Sample.Equipment.Weapon);}
\DoxyCodeLine{MyGame.Sample.Monster.addEquipped(builder,\ axe);}
\DoxyCodeLine{MyGame.Sample.Monster.addPath(builder,\ path);}
\DoxyCodeLine{let\ orc\ =\ MyGame.Sample.Monster.endMonster(builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ our\ monster\ by\ using\ \`{}StartMonster()`\ and\ \`{}EndMonster()`.}}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::StartMonster(\$builder);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddPos(\$builder,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)\mbox{\hyperlink{namespaceMyGame}{MyGame}}\(\backslash\)Sample\(\backslash\)Vec3::CreateVec3(\$builder,\ 1.0,\ 2.0,\ 3.0));}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddHp(\$builder,\ 300);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddName(\$builder,\ \$name);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddInventory(\$builder,\ \$inv);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddColor(\$builder,\ \(\backslash\)\mbox{\hyperlink{namespaceMyGame}{MyGame}}\(\backslash\)Sample\(\backslash\)Color::Red);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddWeapons(\$builder,\ \$weapons);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddEquippedType(\$builder,\ \(\backslash\)\mbox{\hyperlink{namespaceMyGame}{MyGame}}\(\backslash\)Sample\(\backslash\)Equipment::Weapon);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddEquipped(\$builder,\ \$axe);}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddPath(\$builder,\ \$path);}
\DoxyCodeLine{\$orc\ =\ \(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::EndMonster(\$builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Set\ his\ hit\ points\ to\ 300\ and\ his\ mana\ to\ 150.}}
\DoxyCodeLine{uint16\_t\ hp\ =\ 300;}
\DoxyCodeLine{uint16\_t\ mana\ =\ 150;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Define\ an\ equipment\ union.\ \`{}create`\ calls\ in\ C\ has\ a\ single}}
\DoxyCodeLine{\textcolor{comment}{//\ argument\ for\ unions\ where\ C++\ has\ both\ a\ type\ and\ a\ data\ argument.}}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Equipment\_union\_ref\_t)\ equipped\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Equipment\_as\_Weapon(axe));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Vec3\_t)\ pos\ =\ \{\ 1.0f,\ 2.0f,\ 3.0f\ \};}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_create\_as\_root(B,\ \&pos,\ mana,\ hp,\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}},\ inventory,\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(\mbox{\hyperlink{enums__generated_8h_a738b1b8abd03ae11a7632283c3a13ae3a03e71bffe64b5a7e9d60d7e51a43a669}{Color\_Red}}),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ weapons,\ equipped,\ path));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Using\ the\ Builder\ API:}
\DoxyCodeLine{//\ Set\ his\ hit\ points\ to\ 300\ and\ his\ mana\ to\ 150.}
\DoxyCodeLine{final\ int\ hp\ =\ 300;}
\DoxyCodeLine{final\ int\ mana\ =\ 150;}
\DoxyCodeLine{}
\DoxyCodeLine{final\ monster\ =\ new\ myGame.MonsterBuilder(builder)}
\DoxyCodeLine{\ \ ..begin()}
\DoxyCodeLine{\ \ ..addNameOffset(name)}
\DoxyCodeLine{\ \ ..addInventoryOffset(inventory)}
\DoxyCodeLine{\ \ ..addWeaponsOffset(weapons)}
\DoxyCodeLine{\ \ ..addEquippedType(myGame.EquipmentTypeId.Weapon)}
\DoxyCodeLine{\ \ ..addEquippedOffset(axe)}
\DoxyCodeLine{\ \ ..addHp(hp)}
\DoxyCodeLine{\ \ ..addMana(mana)}
\DoxyCodeLine{\ \ ..addPos(vec3Builder.finish(1.0,\ 2.0,\ 3.0))}
\DoxyCodeLine{\ \ ..addPathOffset(path)}
\DoxyCodeLine{\ \ ..addColor(myGame.Color.Red);}
\DoxyCodeLine{}
\DoxyCodeLine{final\ int\ orc\ =\ monster.finish();}
\DoxyCodeLine{}
\DoxyCodeLine{//\ -\/Or-\/\ using\ the\ ObjectBuilder\ API:}
\DoxyCodeLine{//\ Set\ his\ hit\ points\ to\ 300\ and\ his\ mana\ to\ 150.}
\DoxyCodeLine{final\ int\ hp\ =\ 300;}
\DoxyCodeLine{final\ int\ mana\ =\ 150;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Note\ that\ these\ parameters\ are\ optional\ -\/\ it\ is\ not\ necessary\ to\ set}
\DoxyCodeLine{//\ all\ of\ them.}
\DoxyCodeLine{//\ Also\ note\ that\ it\ is\ not\ necessary\ to\ \`{}finish`\ the\ builder\ helpers\ above}
\DoxyCodeLine{//\ -\/\ the\ generated\ code\ will\ automatically\ reuse\ offsets\ if\ the\ same\ object}
\DoxyCodeLine{//\ is\ used\ in\ more\ than\ one\ place\ (e.g.\ the\ axe\ appearing\ in\ \`{}weapons`\ and}
\DoxyCodeLine{//\ \`{}equipped`).}
\DoxyCodeLine{final\ myGame.MonsterBuilder\ orcBuilder\ =\ new\ myGame.MonsterBuilder(}
\DoxyCodeLine{\ \ name:\ name,}
\DoxyCodeLine{\ \ inventory:\ treasure,}
\DoxyCodeLine{\ \ weapons:\ weaps,}
\DoxyCodeLine{\ \ equippedType:\ myGame.EquipmentTypeId.Weapon,}
\DoxyCodeLine{\ \ equipped:\ axe,}
\DoxyCodeLine{\ \ path:\ path,}
\DoxyCodeLine{\ \ hp:\ hp,}
\DoxyCodeLine{\ \ mana:\ mana,}
\DoxyCodeLine{\ \ pos:\ new\ myGame.Vec3Builder(x:\ 1.0,\ y:\ 2.0,\ z:\ 3.0),}
\DoxyCodeLine{\ \ color:\ myGame.Color.Red,}
\DoxyCodeLine{\ \ path:\ [}
\DoxyCodeLine{\ \ \ \ \ \ new\ myGame.Vec3ObjectBuilder(x:\ 1.0,\ y:\ 2.0,\ z:\ 3.0),}
\DoxyCodeLine{\ \ \ \ \ \ new\ myGame.Vec3ObjectBuilder(x:\ 4.0,\ y:\ 5.0,\ z:\ 6.0)}
\DoxyCodeLine{\ \ ]);}
\DoxyCodeLine{}
\DoxyCodeLine{final\ int\ orc\ =\ orcBuilder.finish(builder);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ Create\ our\ monster\ by\ using\ Start()\ andEnd()}
\DoxyCodeLine{monster.Start(builder)}
\DoxyCodeLine{monster.AddPos(builder,\ vec3.CreateVec3(builder,\ 1.0,\ 2.0,\ 3.0))}
\DoxyCodeLine{monster.AddHp(builder,\ 300)}
\DoxyCodeLine{monster.AddName(builder,\ name)}
\DoxyCodeLine{monster.AddInventory(builder,\ inv)}
\DoxyCodeLine{monster.AddColor(builder,\ color.Red)}
\DoxyCodeLine{monster.AddWeapons(builder,\ weapons)}
\DoxyCodeLine{monster.AddEquippedType(builder,\ equipment.Weapon)}
\DoxyCodeLine{monster.AddEquipped(builder,\ axe)}
\DoxyCodeLine{monster.AddPath(builder,\ path)}
\DoxyCodeLine{local\ orc\ =\ monster.End(builder)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ orc\ =\ MyGame\_Sample\_MonsterBuilder\ \{\ b\ \}}
\DoxyCodeLine{\ \ \ \ .start()}
\DoxyCodeLine{\ \ \ \ .add\_pos(b.MyGame\_Sample\_CreateVec3(1.0,\ 2.0,\ 3.0))}
\DoxyCodeLine{\ \ \ \ .add\_hp(300)}
\DoxyCodeLine{\ \ \ \ .add\_name(name)}
\DoxyCodeLine{\ \ \ \ .add\_inventory(inv)}
\DoxyCodeLine{\ \ \ \ .add\_color(MyGame\_Sample\_Color\_Red)}
\DoxyCodeLine{\ \ \ \ .add\_weapons(weapons)}
\DoxyCodeLine{\ \ \ \ .add\_equipped\_type(MyGame\_Sample\_Equipment\_Weapon)}
\DoxyCodeLine{\ \ \ \ .add\_equipped(weapon\_offsets[1])}
\DoxyCodeLine{\ \ \ \ .add\_path(path)}
\DoxyCodeLine{\ \ \ \ .end()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Create\ the\ monster\ using\ the\ \`{}Monster::create`\ helper\ function.\ This}
\DoxyCodeLine{//\ function\ accepts\ a\ \`{}MonsterArgs`\ struct,\ which\ supplies\ all\ of\ the\ data}
\DoxyCodeLine{//\ needed\ to\ build\ a\ \`{}Monster`.\ To\ supply\ empty/default\ fields,\ just\ use\ the}
\DoxyCodeLine{//\ Rust\ built-\/in\ \`{}Default::default()`\ function,\ as\ demonstrated\ below.}
\DoxyCodeLine{let\ orc\ =\ Monster::create(\&mut\ builder,\ \&MonsterArgs\{}
\DoxyCodeLine{\ \ \ \ pos:\ Some(\&Vec3::new(1.0f32,\ 2.0f32,\ 3.0f32)),}
\DoxyCodeLine{\ \ \ \ mana:\ 150,}
\DoxyCodeLine{\ \ \ \ hp:\ 80,}
\DoxyCodeLine{\ \ \ \ name:\ Some(name),}
\DoxyCodeLine{\ \ \ \ inventory:\ Some(inventory),}
\DoxyCodeLine{\ \ \ \ color:\ Color::Red,}
\DoxyCodeLine{\ \ \ \ weapons:\ Some(weapons),}
\DoxyCodeLine{\ \ \ \ equipped\_type:\ Equipment::Weapon,}
\DoxyCodeLine{\ \ \ \ equipped:\ Some(axe.as\_union\_value()),}
\DoxyCodeLine{\ \ \ \ path:\ Some(path),}
\DoxyCodeLine{\ \ \ \ ..Default::default()}
\DoxyCodeLine{\});}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ orc\ =\ Monster.createMonster(}
\DoxyCodeLine{\ \ \&builder,}
\DoxyCodeLine{\ \ pos:\ MyGame\_Sample\_Vec3(x:\ 1,\ y:\ 2,\ z:\ 3),}
\DoxyCodeLine{\ \ hp:\ 300,}
\DoxyCodeLine{\ \ nameOffset:\ name,}
\DoxyCodeLine{\ \ inventoryVectorOffset:\ inventoryOffset,}
\DoxyCodeLine{\ \ color:\ .red,}
\DoxyCodeLine{\ \ weaponsVectorOffset:\ weaponsOffset,}
\DoxyCodeLine{\ \ equippedType:\ .weapon,}
\DoxyCodeLine{\ \ equippedOffset:\ axe)}

\end{DoxyCode}
 

Note how we create {\ttfamily Vec3} struct in-\/line in the table. Unlike tables, structs are simple combinations of scalars that are always stored inline, just like scalars themselves.

{\bfseries{Important}}\+: Unlike structs, you should not nest tables or other objects, which is why we created all the strings/vectors/tables that this monster refers to before {\ttfamily start}. If you try to create any of them between {\ttfamily start} and {\ttfamily end}, you will get an assert/exception/panic depending on your language.

{\itshape Note\+: Since we are passing {\ttfamily 150} as the {\ttfamily mana} field, which happens to be the default value, the field will not actually be written to the buffer, since the default value will be returned on query anyway. This is a nice space savings, especially if default values are common in your data. It also means that you do not need to be worried about adding a lot of fields that are only used in a small number of instances, as it will not bloat the buffer if unused.}

 ~\newline
 If you do not wish to set every field in a {\ttfamily table}, it may be more convenient to manually set each field of your monster, instead of calling {\ttfamily Create\+Monster()}. The following snippet is functionally equivalent to the above code, but provides a bit more flexibility. ~\newline
 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ You\ can\ use\ this\ code\ instead\ of\ \`{}CreateMonster()`,\ to\ create\ our\ orc}}
\DoxyCodeLine{\textcolor{comment}{//\ manually.}}
\DoxyCodeLine{\mbox{\hyperlink{structMyGame_1_1Sample_1_1MonsterBuilder}{MonsterBuilder}}\ monster\_builder(builder);}
\DoxyCodeLine{monster\_builder.add\_pos(\&position);}
\DoxyCodeLine{monster\_builder.add\_hp(hp);}
\DoxyCodeLine{monster\_builder.add\_name(\mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}});}
\DoxyCodeLine{monster\_builder.add\_inventory(inventory);}
\DoxyCodeLine{monster\_builder.add\_color(\mbox{\hyperlink{enums__generated_8h_a738b1b8abd03ae11a7632283c3a13ae3a03e71bffe64b5a7e9d60d7e51a43a669}{Color\_Red}});}
\DoxyCodeLine{monster\_builder.add\_weapons(weapons);}
\DoxyCodeLine{monster\_builder.add\_equipped\_type(Equipment\_Weapon);}
\DoxyCodeLine{monster\_builder.add\_equipped(axe.Union());}
\DoxyCodeLine{\textcolor{keyword}{auto}\ orc\ =\ monster\_builder.Finish();}

\end{DoxyCode}
   If you do not wish to set every field in a {\ttfamily table}, it may be more convenient to manually set each field of your monster, instead of calling {\ttfamily create\+\_\+monster\+\_\+as\+\_\+root()}. The following snippet is functionally equivalent to the above code, but provides a bit more flexibility. ~\newline
 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ It\ is\ important\ to\ pair\ \`{}start\_as\_root`\ with\ \`{}end\_as\_root`.}}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_start\_as\_root(B));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_pos\_create(B,\ 1.0f,\ 2.0f,\ 3.0f));}
\DoxyCodeLine{\textcolor{comment}{//\ or\ alternatively}}
\DoxyCodeLine{\textcolor{comment}{//ns(Monster\_pos\_add(\&pos);}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_hp\_add(B,\ hp));}
\DoxyCodeLine{\textcolor{comment}{//\ Notice\ that\ \`{}Monser\_name\_add`\ adds\ a\ string\ reference\ unlike\ the}}
\DoxyCodeLine{\textcolor{comment}{//\ add\_str\ and\ add\_strn\ variants.}}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_name\_add(B,\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_inventory\_add(B,\ inventory));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_color\_add(B,\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(\mbox{\hyperlink{enums__generated_8h_a738b1b8abd03ae11a7632283c3a13ae3a03e71bffe64b5a7e9d60d7e51a43a669}{Color\_Red}})));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_weapons\_add(B,\ weapons));}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_equipped\_add(B,\ equipped));}
\DoxyCodeLine{\textcolor{comment}{//\ Complete\ the\ monster\ object\ and\ make\ it\ the\ buffer\ root\ object.}}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_end\_as\_root(B));}

\end{DoxyCode}
 

 
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ start\ =\ Monster.startMonster(\&builder)}
\DoxyCodeLine{Monster.add(pos:\ Vec3(x:\ 1,\ y:\ 2,\ z:\ 3),\ \&builder)}
\DoxyCodeLine{Monster.add(hp:\ 300,\ \&builder)}
\DoxyCodeLine{Monster.add(name:\ name,\ \&builder)}
\DoxyCodeLine{Monster.addVectorOf(inventory:\ inventoryOffset,\ \&builder)}
\DoxyCodeLine{Monster.add(color:\ .red,\ \&builder)}
\DoxyCodeLine{Monster.addVectorOf(weapons:\ weaponsOffset,\ \&builder)}
\DoxyCodeLine{Monster.add(equippedType:\ .weapon,\ \&builder)}
\DoxyCodeLine{Monster.add(equipped:\ axe,\ \&builder)}
\DoxyCodeLine{var\ orc\ =\ Monster.endMonster(\&builder,\ start:\ start)}

\end{DoxyCode}
 

Before finishing the serialization, let\textquotesingle{}s take a quick look at Flat\+Buffer {\ttfamily union Equipped}. There are two parts to each Flat\+Buffer {\ttfamily union}. The first is a hidden field {\ttfamily \+\_\+type} that is generated to hold the type of {\ttfamily table} referred to by the {\ttfamily union}. This allows you to know which type to cast to at runtime. Second is the {\ttfamily union}\textquotesingle{}s data.

In our example, the last two things we added to our {\ttfamily Monster} were the {\ttfamily Equipped Type} and the {\ttfamily Equipped} union itself.

Here is a repetition of these lines, to help highlight them more clearly\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{monster\_builder.add\_equipped\_type(Equipment\_Weapon);\ \textcolor{comment}{//\ Union\ type}}
\DoxyCodeLine{monster\_builder.add\_equipped(axe.Union());\ \textcolor{comment}{//\ Union\ data}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addEquippedType(builder,\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_add5600c8554383eb7a8c7793a9da2a92}{Equipment}}.Weapon);\ \textcolor{comment}{//\ Union\ type}}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.addEquipped(axe);\ \textcolor{comment}{//\ Union\ data}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{Monster.addEquippedType(builder,\ Equipment.Weapon)\ //\ Union\ type}
\DoxyCodeLine{Monster.addEquipped(axe)\ //\ Union\ data}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddEquippedType(builder,\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_add5600c8554383eb7a8c7793a9da2a92}{Equipment}}.Weapon);\ \textcolor{comment}{//\ Union\ type}}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.AddEquipped(builder,\ axe.Value);\ \textcolor{comment}{//\ Union\ data}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{sample.MonsterAddEquippedType(builder,\ sample.EquipmentWeapon)\ //\ Union\ type}
\DoxyCodeLine{sample.MonsterAddEquipped(builder,\ axe)\ //\ Union\ data}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{MyGame.Sample.Monster.AddEquippedType(\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Union\ type}}
\DoxyCodeLine{\ \ \ \ builder,\ MyGame.Sample.Equipment.Equipment().Weapon)}
\DoxyCodeLine{MyGame.Sample.Monster.AddEquipped(builder,\ axe)\ \ \ \textcolor{comment}{\#\ Union\ data}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{MyGame.Sample.Monster.addEquippedType(builder,\ MyGame.Sample.Equipment.Weapon);\ //\ Union\ type}
\DoxyCodeLine{MyGame.Sample.Monster.addEquipped(builder,\ axe);\ //\ Union\ data}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{MyGame.Sample.Monster.addEquippedType(builder,\ MyGame.Sample.Equipment.Weapon);\ //\ Union\ type}
\DoxyCodeLine{MyGame.Sample.Monster.addEquipped(builder,\ axe);\ //\ Union\ data}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddEquippedType(\$builder,\ \(\backslash\)\mbox{\hyperlink{namespaceMyGame}{MyGame}}\(\backslash\)Sample\(\backslash\)Equipment::Weapon);\ \textcolor{comment}{//\ Union\ type}}
\DoxyCodeLine{\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::AddEquipped(\$builder,\ \$axe);\ \textcolor{comment}{//\ Union\ data}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Add\ union\ type\ and\ data\ simultaneously.}}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_equipped\_Weapon\_add(B,\ axe));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ using\ the\ builder\ API:}
\DoxyCodeLine{..addEquippedType(myGame.EquipmentTypeId.Weapon)}
\DoxyCodeLine{..addEquippedOffset(axe)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ in\ the\ ObjectBuilder\ API:}
\DoxyCodeLine{equippedTypeId:\ myGame.EquipmentTypeId.Weapon,\ \ //\ Union\ type}
\DoxyCodeLine{equipped:\ axe,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ Union\ data}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{monster.AddEquippedType(builder,\ equipment.Weapon)\ -\/-\/\ Union\ type}
\DoxyCodeLine{monster.AddEquipped(builder,\ axe)\ -\/-\/\ Union\ data}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{.add\_equipped\_type(MyGame\_Sample\_Equipment\_Weapon)}
\DoxyCodeLine{.add\_equipped(axe)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ You\ need\ to\ call\ \`{}as\_union\_value`\ to\ turn\ an\ object\ into\ a\ type\ that}
\DoxyCodeLine{//\ can\ be\ used\ as\ a\ union\ value.}
\DoxyCodeLine{monster\_builder.add\_equipped\_type(Equipment::Weapon);\ //\ Union\ type}
\DoxyCodeLine{monster\_builder.add\_equipped(axe.as\_union\_value());\ //\ Union\ data}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{Monster.add(equippedType:\ .weapon,\ builder)\ //\ Type\ of\ union}
\DoxyCodeLine{Monster.add(equipped:\ axe,\ builder)\ //\ Union\ data}

\end{DoxyCode}
 

After you have created your buffer, you will have the offset to the root of the data in the {\ttfamily orc} variable, so you can finish the buffer by calling the appropriate {\ttfamily finish} method.

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Call\ \`{}Finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}}
\DoxyCodeLine{\textcolor{comment}{//\ Note:\ Regardless\ of\ how\ you\ created\ the\ \`{}orc`,\ you\ still\ need\ to\ call}}
\DoxyCodeLine{\textcolor{comment}{//\ \`{}Finish()`\ on\ the\ \`{}FlatBufferBuilder`.}}
\DoxyCodeLine{\mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.Finish(orc);\ \textcolor{comment}{//\ You\ could\ also\ call\ \`{}FinishMonsterBuffer(builder,\ orc);`.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Call\ \`{}finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}}
\DoxyCodeLine{\mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.finish(orc);\ \textcolor{comment}{//\ You\ could\ also\ call\ \`{}Monster.finishMonsterBuffer(builder,\ orc);`.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder.finish(orc)\ //\ You\ could\ also\ call\ \`{}Monster.finishMonsterBuffer(builder,\ orc);`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Call\ \`{}Finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}}
\DoxyCodeLine{\mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.Finish(orc.Value);\ \textcolor{comment}{//\ You\ could\ also\ call\ \`{}Monster.FinishMonsterBuffer(builder,\ orc);`.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}Finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder.Finish(orc)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{\#\ Call\ \`{}Finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}}
\DoxyCodeLine{builder.Finish(orc)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder.finish(orc);\ //\ You\ could\ also\ call\ \`{}MyGame.Sample.Monster.finishMonsterBuffer(builder,\ orc);`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder.finish(orc);\ //\ You\ could\ also\ call\ \`{}MyGame.Sample.Monster.finishMonsterBuffer(builder,\ orc);`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Call\ \`{}finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}}
\DoxyCodeLine{\ \$builder-\/>finish(\$orc);\ \textcolor{comment}{//\ You\ may\ also\ call\ \`{}\(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::FinishMonsterBuffer(\$builder,\ \$orc);`.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Because\ we\ used\ \`{}Monster\_create\_as\_root`,\ we\ do\ not\ need\ a\ \`{}finish`\ call\ in\ C`.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{//\ See\ the\ next\ code\ section,\ as\ in\ Dart\ \`{}finish`\ will\ also\ return\ the\ byte\ array.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ Call\ 'Finish()'\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder:Finish(orc)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}Finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder.Finish(orc)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}finish()`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder.finish(orc,\ None);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Call\ \`{}finish(offset:)`\ to\ instruct\ the\ builder\ that\ this\ monster\ is\ complete.}
\DoxyCodeLine{builder.finish(offset:\ orc)}

\end{DoxyCode}
 

The buffer is now ready to be stored somewhere, sent over the network, be compressed, or whatever you\textquotesingle{}d like to do with it. You can access the buffer like so\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ This\ must\ be\ called\ after\ \`{}Finish()`.}}
\DoxyCodeLine{uint8\_t\ *buf\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.GetBufferPointer();}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ size\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.GetSize();\ \textcolor{comment}{//\ Returns\ the\ size\ of\ the\ buffer\ that}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \`{}GetBufferPointer()`\ points\ to.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ This\ must\ be\ called\ after\ \`{}finish()`.}}
\DoxyCodeLine{java.nio.ByteBuffer\ buf\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.dataBuffer();}
\DoxyCodeLine{\textcolor{comment}{//\ The\ data\ in\ this\ ByteBuffer\ does\ NOT\ start\ at\ 0,\ but\ at\ buf.position().}}
\DoxyCodeLine{\textcolor{comment}{//\ The\ number\ of\ bytes\ is\ buf.remaining().}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Alternatively\ this\ copies\ the\ above\ data\ out\ of\ the\ ByteBuffer\ for\ you:}}
\DoxyCodeLine{\textcolor{keywordtype}{byte}[]\ buf\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.sizedByteArray();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ This\ must\ be\ called\ after\ \`{}finish()`.}
\DoxyCodeLine{val\ buf\ =\ builder.dataBuffer()}
\DoxyCodeLine{//\ The\ data\ in\ this\ ByteBuffer\ does\ NOT\ start\ at\ 0,\ but\ at\ buf.position().}
\DoxyCodeLine{//\ The\ number\ of\ bytes\ is\ buf.remaining().}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Alternatively\ this\ copies\ the\ above\ data\ out\ of\ the\ ByteBuffer\ for\ you:}
\DoxyCodeLine{val\ buf\ =\ builder.sizedByteArray()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ This\ must\ be\ called\ after\ \`{}Finish()`.}}
\DoxyCodeLine{var\ buf\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.DataBuffer;\ \textcolor{comment}{//\ Of\ type\ \`{}FlatBuffers.ByteBuffer`.}}
\DoxyCodeLine{\textcolor{comment}{//\ The\ data\ in\ this\ ByteBuffer\ does\ NOT\ start\ at\ 0,\ but\ at\ buf.Position.}}
\DoxyCodeLine{\textcolor{comment}{//\ The\ end\ of\ the\ data\ is\ marked\ by\ buf.Length,\ so\ the\ size\ is}}
\DoxyCodeLine{\textcolor{comment}{//\ buf.Length\ -\/\ buf.Position.}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Alternatively\ this\ copies\ the\ above\ data\ out\ of\ the\ ByteBuffer\ for\ you:}}
\DoxyCodeLine{\textcolor{keywordtype}{byte}[]\ buf\ =\ \mbox{\hyperlink{namespacebuild_ac88b0ec8265b8fb42c15db20ec716d54}{builder}}.SizedByteArray();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ This\ must\ be\ called\ after\ \`{}Finish()`.}
\DoxyCodeLine{buf\ :=\ builder.FinishedBytes()\ //\ Of\ type\ \`{}byte[]`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{\#\ This\ must\ be\ called\ after\ \`{}Finish()`.}}
\DoxyCodeLine{buf\ =\ builder.Output()\ //\ Of\ type\ \`{}bytearray\`{}.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ This\ must\ be\ called\ after\ \`{}finish()`.}
\DoxyCodeLine{var\ buf\ =\ builder.asUint8Array();\ //\ Of\ type\ \`{}Uint8Array`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ This\ must\ be\ called\ after\ \`{}finish()`.}
\DoxyCodeLine{let\ buf\ =\ builder.asUint8Array();\ //\ Of\ type\ \`{}Uint8Array`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ This\ must\ be\ called\ after\ \`{}finish()`.}}
\DoxyCodeLine{\$buf\ =\ \$builder-\/>dataBuffer();\ \textcolor{comment}{//\ Of\ type\ \`{}Google\(\backslash\)FlatBuffers\(\backslash\)ByteBuffer`}}
\DoxyCodeLine{\textcolor{comment}{//\ The\ data\ in\ this\ ByteBuffer\ does\ NOT\ start\ at\ 0,\ but\ at\ buf-\/>getPosition().}}
\DoxyCodeLine{\textcolor{comment}{//\ The\ end\ of\ the\ data\ is\ marked\ by\ buf-\/>capacity(),\ so\ the\ size\ is}}
\DoxyCodeLine{\textcolor{comment}{//\ buf-\/>capacity()\ -\/\ buf-\/>getPosition().}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{uint8\_t\ *buf;}
\DoxyCodeLine{\textcolor{keywordtype}{size\_t}\ size;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Allocate\ and\ extract\ a\ readable\ buffer\ from\ internal\ builder\ heap.}}
\DoxyCodeLine{\textcolor{comment}{//\ The\ returned\ buffer\ must\ be\ deallocated\ using\ \`{}free`.}}
\DoxyCodeLine{\textcolor{comment}{//\ NOTE:\ Finalizing\ the\ buffer\ does\ NOT\ change\ the\ builder,\ it}}
\DoxyCodeLine{\textcolor{comment}{//\ just\ creates\ a\ snapshot\ of\ the\ builder\ content.}}
\DoxyCodeLine{buf\ =\ flatcc\_builder\_finalize\_buffer(B,\ \&size);}
\DoxyCodeLine{\textcolor{comment}{//\ use\ buf}}
\DoxyCodeLine{free(buf);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Optionally\ reset\ builder\ to\ reuse\ builder\ without\ deallocating}}
\DoxyCodeLine{\textcolor{comment}{//\ internal\ stack\ and\ heap.}}
\DoxyCodeLine{flatcc\_builder\_reset(B);}
\DoxyCodeLine{\textcolor{comment}{//\ build\ next\ buffer.}}
\DoxyCodeLine{\textcolor{comment}{//\ ...}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Cleanup.}}
\DoxyCodeLine{flatcc\_builder\_clear(B);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{final\ Uint8List\ buf\ =\ builder.finish(orc);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ Get\ the\ flatbuffer\ as\ a\ string\ containing\ the\ binary\ data}
\DoxyCodeLine{local\ bufAsString\ =\ builder:Output()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ This\ must\ be\ called\ after\ \`{}Finish()`.}
\DoxyCodeLine{let\ buf\ =\ builder.SizedCopy()\ //\ Of\ type\ \`{}string`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ This\ must\ be\ called\ after\ \`{}finish()`.}
\DoxyCodeLine{//\ \`{}finished\_data`\ returns\ a\ byte\ slice.}
\DoxyCodeLine{let\ buf\ =\ builder.finished\_data();\ //\ Of\ type\ \`{}\&[u8]`}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ This\ must\ be\ called\ after\ \`{}finish()`.}
\DoxyCodeLine{//\ \`{}sizedByteArray`\ returns\ the\ finished\ buf\ of\ type\ [UInt8].}
\DoxyCodeLine{let\ buf\ =\ builder.sizedByteArray}
\DoxyCodeLine{//\ or\ you\ can\ use\ to\ get\ an\ object\ of\ type\ Data}
\DoxyCodeLine{let\ bufData\ =\ ByteBuffer(data:\ builder.data)}

\end{DoxyCode}
 

Now you can write the bytes to a file or send them over the network. {\bfseries{Make sure your file mode (or transfer protocol) is set to BINARY, not text.}} If you transfer a Flat\+Buffer in text mode, the buffer will be corrupted, which will lead to hard to find problems when you read the buffer.

 For example, in Node you can simply do\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{writeFileSync('monster.bin',\ buf,\ 'binary');}

\end{DoxyCode}
   For example, in Node you can simply do\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{writeFileSync('monster.bin',\ buf,\ 'binary');}

\end{DoxyCode}
 

\doxysubsubsection*{Reading Orc Flat\+Buffers}

Now that we have successfully created an {\ttfamily Orc} Flat\+Buffer, the monster data can be saved, sent over a network, etc. Let\textquotesingle{}s now adventure into the inverse, and access a Flat\+Buffer.

This section requires the same import/include, namespace, etc. requirements as before\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{monster__generated_8h}{monster\_generated.h}}"{}}\ \textcolor{comment}{//\ This\ was\ generated\ by\ \`{}flatc`.}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespaceMyGame_1_1Sample}{MyGame::Sample}};\ \textcolor{comment}{//\ Specified\ in\ the\ schema.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{import}\ \mbox{\hyperlink{namespaceMyGame}{MyGame}}.\mbox{\hyperlink{namespaceMyGame_1_1Sample}{Sample}}.*;\ \textcolor{comment}{//The\ \`{}flatc`\ generated\ files.\ (Monster,\ Vec3,\ etc.)}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{import}\ \mbox{\hyperlink{namespacecom}{com}}.\mbox{\hyperlink{namespacecom_1_1google}{google}}.\mbox{\hyperlink{namespacecom_1_1google_1_1flatbuffers}{flatbuffers}}.\mbox{\hyperlink{classcom_1_1google_1_1flatbuffers_1_1FlatBufferBuilder}{FlatBufferBuilder}};}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ MyGame.Sample.*\ //The\ \`{}flatc`\ generated\ files.\ (Monster,\ Vec3,\ etc.)}
\DoxyCodeLine{}
\DoxyCodeLine{import\ com.google.flatbuffers.FlatBufferBuilder}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceGoogle_1_1FlatBuffers}{Google.FlatBuffers}};}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceMyGame_1_1Sample}{MyGame.Sample}};\ \textcolor{comment}{//\ The\ \`{}flatc`\ generated\ files.\ (Monster,\ Vec3,\ etc.)}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ (}
\DoxyCodeLine{\ \ \ \ \ \ \ \ flatbuffers\ "{}github.com/google/flatbuffers/go"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ sample\ "{}MyGame/Sample"{}}
\DoxyCodeLine{)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{import}\ flatbuffers}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ Generated\ by\ \`{}flatc`.}}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Any}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Color}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Monster}
\DoxyCodeLine{\textcolor{keyword}{import}\ MyGame.Sample.Vec3}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ The\ following\ code\ is\ an\ example\ -\/\ use\ your\ desired\ module\ flavor\ by\ transpiling\ from\ TS.\ }
\DoxyCodeLine{var\ flatbuffers\ =\ require('/js/flatbuffers').flatbuffers;}
\DoxyCodeLine{var\ MyGame\ =\ require('./monster\_generated').MyGame;\ //\ Generated\ by\ \`{}flatc`.}
\DoxyCodeLine{}
\DoxyCodeLine{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\///}
\DoxyCodeLine{}
\DoxyCodeLine{//\ The\ following\ code\ an\ example\ for\ browser-\/based\ HTML/JavaScript.\ Use\ the\ above\ code}
\DoxyCodeLine{//\ for\ JavaScript\ module\ loaders\ (e.g.\ Node.js).}
\DoxyCodeLine{<script\ src="{}../js/flatbuffers.js"{}></script>}
\DoxyCodeLine{<script\ src="{}monster\_generated.js"{}></script>\ //\ Generated\ by\ \`{}flatc`.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ note:\ import\ flatbuffers\ with\ your\ desired\ import\ method}
\DoxyCodeLine{}
\DoxyCodeLine{//\ note:\ the\ \`{}./monster\_generated.js`\ file\ was\ previously\ generated\ by\ \`{}flatc`\ above\ using\ the\ \`{}monster.fbs`\ schema}
\DoxyCodeLine{import\ \{\ MyGame\ \}\ from\ './monster\_generated';}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ It\ is\ recommended\ that\ your\ use\ PSR\ autoload\ when\ using\ FlatBuffers\ in\ PHP.}}
\DoxyCodeLine{\textcolor{comment}{//\ Here\ is\ an\ example\ from\ \`{}SampleBinary.php`:}}
\DoxyCodeLine{\textcolor{keyword}{function}\ \mbox{\hyperlink{SampleBinary_8php_a80a3892ecad687b96b542109495df0f0}{\_\_autoload}}(\$class\_name)\ \{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ The\ last\ segment\ of\ the\ class\ name\ matches\ the\ file\ name.}}
\DoxyCodeLine{\ \ \$class\ =\ substr(\$class\_name,\ strrpos(\$class\_name,\ \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}})\ +\ 1);}
\DoxyCodeLine{\ \ \$root\_dir\ =\ join(DIRECTORY\_SEPARATOR,\ array(dirname(dirname(\_\_FILE\_\_))));\ \textcolor{comment}{//\ \`{}flatbuffers`\ root.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ Contains\ the\ \`{}*.php`\ files\ for\ the\ FlatBuffers\ library\ and\ the\ \`{}flatc`\ generated\ files.}}
\DoxyCodeLine{\ \ \$paths\ =\ array(join(DIRECTORY\_SEPARATOR,\ array(\$root\_dir,\ \textcolor{stringliteral}{"{}php"{}})),}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ join(DIRECTORY\_SEPARATOR,\ array(\$root\_dir,\ \textcolor{stringliteral}{"{}samples"{}},\ \textcolor{stringliteral}{"{}MyGame"{}},\ \textcolor{stringliteral}{"{}Sample"{}})));}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{foreach}\ (\$paths\ as\ \$path)\ \{}
\DoxyCodeLine{\ \ \ \ \$file\ =\ join(DIRECTORY\_SEPARATOR,\ array(\$path,\ \$class\ .\ \textcolor{stringliteral}{"{}.php"{}}));}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (file\_exists(\$file))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ require(\$file);}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Only\ needed\ if\ we\ don't\ have\ \`{}\#include\ "{}monster\_builder.h"{}`.}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}monster\_reader.h"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#undef\ ns}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ ns(x)\ FLATBUFFERS\_WRAP\_NAMESPACE(MyGame\_Sample,\ x)\ }\textcolor{comment}{//\ Specified\ in\ the\ schema.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ 'package:flat\_buffers/flat\_buffers.dart'\ as\ fb;}
\DoxyCodeLine{import\ './monster\_my\_game.sample\_generated.dart'\ as\ myGame;}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/-\/\ require\ the\ flatbuffers\ module}
\DoxyCodeLine{local\ flatbuffers\ =\ require("{}flatbuffers"{})}
\DoxyCodeLine{}
\DoxyCodeLine{-\/-\/\ require\ the\ generated\ files\ from\ \`{}flatc`.}
\DoxyCodeLine{local\ color\ =\ require("{}MyGame.Sample.Color"{})}
\DoxyCodeLine{local\ equipment\ =\ require("{}MyGame.Sample.Equipment"{})}
\DoxyCodeLine{local\ monster\ =\ require("{}MyGame.Sample.Monster"{})}
\DoxyCodeLine{local\ vec3\ =\ require("{}MyGame.Sample.Vec3"{})}
\DoxyCodeLine{local\ weapon\ =\ require("{}MyGame.Sample.Weapon"{})}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{import\ from\ "{}../lobster/"{}\ \ //\ Where\ to\ find\ flatbuffers.lobster}
\DoxyCodeLine{import\ monster\_generated}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ import\ the\ flatbuffers\ runtime\ library}
\DoxyCodeLine{extern\ crate\ flatbuffers;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ import\ the\ generated\ code}
\DoxyCodeLine{\#[allow(dead\_code,\ unused\_imports)]}
\DoxyCodeLine{\#[path\ =\ "{}./monster\_generated.rs"{}]}
\DoxyCodeLine{mod\ monster\_generated;}
\DoxyCodeLine{pub\ use\ monster\_generated::my\_game::sample::\{root\_as\_monster,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Color,\ Equipment,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Monster,\ MonsterArgs,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Vec3,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Weapon,\ WeaponArgs\};}

\end{DoxyCode}
 

Then, assuming you have a buffer of bytes received from disk, network, etc., you can start accessing the buffer like so\+:

{\bfseries{Again, make sure you read the bytes in BINARY mode, otherwise the code below won\textquotesingle{}t work.}}

 
\begin{DoxyCode}{0}
\DoxyCodeLine{uint8\_t\ *buffer\_pointer\ =\ \textcolor{comment}{/*\ the\ data\ you\ just\ read\ */};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Get\ a\ pointer\ to\ the\ root\ object\ inside\ the\ buffer.}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ monster\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_aeffc316d8b80546edb0f37b6ec9f8d7b}{GetMonster}}(buffer\_pointer);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ \`{}monster`\ is\ of\ type\ \`{}Monster\ *`.}}
\DoxyCodeLine{\textcolor{comment}{//\ Note:\ root\ object\ pointers\ are\ NOT\ the\ same\ as\ \`{}buffer\_pointer`.}}
\DoxyCodeLine{\textcolor{comment}{//\ \`{}GetMonster`\ is\ a\ convenience\ function\ that\ calls\ \`{}GetRoot<Monster>`,}}
\DoxyCodeLine{\textcolor{comment}{//\ the\ latter\ is\ also\ available\ for\ non-\/root\ types.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{byte}[]\ bytes\ =\ \textcolor{comment}{/*\ the\ data\ you\ just\ read\ */}}
\DoxyCodeLine{java.nio.ByteBuffer\ buf\ =\ java.nio.ByteBuffer.wrap(bytes);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}\ monster\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.getRootAsMonster(buf);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ bytes\ =\ /*\ the\ data\ you\ just\ read\ */}
\DoxyCodeLine{val\ buf\ =\ java.nio.ByteBuffer.wrap(bytes)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{Monster\ monster\ =\ Monster.getRootAsMonster(buf)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{byte}[]\ bytes\ =\ \textcolor{comment}{/*\ the\ data\ you\ just\ read\ */}}
\DoxyCodeLine{var\ buf\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classGoogle_1_1FlatBuffers_1_1ByteBuffer}{ByteBuffer}}(bytes);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}}
\DoxyCodeLine{var\ monster\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.GetRootAsMonster(buf);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ buf\ []byte\ =\ /*\ the\ data\ you\ just\ read\ */}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{monster\ :=\ sample.GetRootAsMonster(buf,\ 0)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Note:\ We\ use\ \`{}0`\ for\ the\ offset\ here,\ which\ is\ typical\ for\ most\ buffers}
\DoxyCodeLine{//\ you\ would\ read.\ If\ you\ wanted\ to\ read\ from\ \`{}builder.Bytes`\ directly,\ you}
\DoxyCodeLine{//\ would\ need\ to\ pass\ in\ the\ offset\ of\ \`{}builder.Head()`,\ as\ the\ builder}
\DoxyCodeLine{//\ constructs\ the\ buffer\ backwards,\ so\ may\ not\ start\ at\ offset\ 0.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{buf\ =\ /*\ the\ data\ you\ just\ read,\ \textcolor{keywordflow}{in}\ an\ object\ of\ type\ \textcolor{stringliteral}{"{}bytearray"{}}\ */}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{monster\ =\ MyGame.Sample.Monster.Monster.GetRootAs(buf,\ 0)}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{\#\ Note:\ We\ use\ \`{}0`\ for\ the\ offset\ here,\ which\ is\ typical\ for\ most\ buffers}}
\DoxyCodeLine{\textcolor{comment}{\#\ you\ would\ read.\ \ If\ you\ wanted\ to\ read\ from\ the\ \`{}builder.Bytes`\ directly,}}
\DoxyCodeLine{\textcolor{comment}{\#\ you\ would\ need\ to\ pass\ in\ the\ offset\ of\ \`{}builder.Head()`,\ as\ the\ builder}}
\DoxyCodeLine{\textcolor{comment}{\#\ constructs\ the\ buffer\ backwards,\ so\ may\ not\ start\ at\ offset\ 0.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ the\ data\ you\ just\ read,\ as\ a\ \`{}Uint8Array`}
\DoxyCodeLine{//\ Note\ that\ the\ example\ here\ uses\ \`{}readFileSync`\ from\ the\ built-\/in\ \`{}fs`\ module,}
\DoxyCodeLine{//\ but\ other\ methods\ for\ accessing\ the\ file\ contents\ will\ also\ work.}
\DoxyCodeLine{var\ bytes\ =\ new\ Uint8Array(readFileSync('./monsterdata.bin'));}
\DoxyCodeLine{}
\DoxyCodeLine{var\ buf\ =\ new\ flatbuffers.ByteBuffer(bytes);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{var\ monster\ =\ MyGame.Sample.Monster.getRootAsMonster(buf);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ the\ data\ you\ just\ read,\ as\ a\ \`{}Uint8Array`.}
\DoxyCodeLine{//\ Note\ that\ the\ example\ here\ uses\ \`{}readFileSync`\ from\ the\ built-\/in\ \`{}fs`\ module,}
\DoxyCodeLine{//\ but\ other\ methods\ for\ accessing\ the\ file\ contents\ will\ also\ work.}
\DoxyCodeLine{let\ bytes\ =\ new\ Uint8Array(readFileSync('./monsterdata.bin'));}
\DoxyCodeLine{}
\DoxyCodeLine{let\ buf\ =\ new\ flatbuffers.ByteBuffer(bytes);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{let\ monster\ =\ MyGame.Sample.Monster.getRootAsMonster(buf);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\$bytes\ =\ \textcolor{comment}{/*\ the\ data\ you\ just\ read,\ in\ a\ string\ */}}
\DoxyCodeLine{\$buf\ =\ Google\(\backslash\)FlatBuffers\(\backslash\)ByteBuffer::wrap(\$bytes);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}}
\DoxyCodeLine{\$monster\ =\ \(\backslash\)MyGame\(\backslash\)Sample\(\backslash\)Monster::GetRootAsMonster(\$buf);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Note\ that\ we\ use\ the\ \`{}table\_t`\ suffix\ when\ reading\ a\ table\ object}}
\DoxyCodeLine{\textcolor{comment}{//\ as\ opposed\ to\ the\ \`{}ref\_t`\ suffix\ used\ during\ the\ construction\ of}}
\DoxyCodeLine{\textcolor{comment}{//\ the\ buffer.}}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_table\_t)\ monster\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_as\_root(buffer));}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Note:\ root\ object\ pointers\ are\ NOT\ the\ same\ as\ the\ \`{}buffer`\ pointer.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{List<int>\ data\ =\ ...\ //\ the\ data,\ e.g.\ from\ file\ or\ network}
\DoxyCodeLine{//\ A\ generated\ factory\ constructor\ that\ will\ read\ the\ data.}
\DoxyCodeLine{myGame.Monster\ monster\ =\ new\ myGame.Monster(data);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{local\ bufAsString\ =\ \ \ -\/-\/\ The\ data\ you\ just\ read\ in}
\DoxyCodeLine{}
\DoxyCodeLine{-\/-\/\ Convert\ the\ string\ representation\ into\ binary\ array\ Lua\ structure}
\DoxyCodeLine{local\ buf\ =\ flatbuffers.binaryArray.New(bufAsString)}
\DoxyCodeLine{}
\DoxyCodeLine{-\/-\/\ Get\ an\ accessor\ to\ the\ root\ object\ insert\ the\ buffer}
\DoxyCodeLine{local\ mon\ =\ monster.GetRootAsMonster(buf,\ 0)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{buf\ =\ /*\ the\ data\ you\ just\ read,\ in\ a\ string\ */}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{let\ monster\ =\ MyGame\_Sample\_GetRootAsMonster(buf)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ buf\ =\ /*\ the\ data\ you\ just\ read,\ in\ a\ \&[u8]\ */}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{let\ monster\ =\ root\_as\_monster(buf).unwrap();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ create\ a\ ByteBuffer(:)\ from\ an\ [UInt8]\ or\ Data()}
\DoxyCodeLine{var\ buf\ =\ //\ Get\ your\ data}
\DoxyCodeLine{//\ Get\ an\ accessor\ to\ the\ root\ object\ inside\ the\ buffer.}
\DoxyCodeLine{let\ monster:\ Monster\ =\ try!\ getCheckedRoot(byteBuffer:\ \&byteBuffer)}
\DoxyCodeLine{//\ let\ monster:\ Monster\ =\ getRoot(byteBuffer:\ \&byteBuffer)}

\end{DoxyCode}
 

If you look in the generated files from the schema compiler, you will see it generated accessors for all non-\/{\ttfamily deprecated} fields. For example\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ hp\ =\ monster-\/>hp();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ mana\ =\ monster-\/>mana();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ monster-\/>name()-\/>c\_str();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{short}\ hp\ =\ monster.hp();}
\DoxyCodeLine{\textcolor{keywordtype}{short}\ mana\ =\ monster.mana();}
\DoxyCodeLine{\mbox{\hyperlink{namespacereflection_a94d99018201fa75e6e29207136c64d98a31dbbb45901c4d63a13a5c93bb549af6}{String}}\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ monster.name();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ hp\ =\ monster.hp}
\DoxyCodeLine{val\ mana\ =\ monster.mana}
\DoxyCodeLine{val\ name\ =\ monster.name}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ For\ C\#,\ unlike\ most\ other\ languages\ support\ by\ FlatBuffers,\ most\ values\ (except\ for}}
\DoxyCodeLine{\textcolor{comment}{//\ vectors\ and\ unions)\ are\ available\ as\ properties\ instead\ of\ accessor\ methods.}}
\DoxyCodeLine{var\ hp\ =\ monster.Hp}
\DoxyCodeLine{var\ mana\ =\ monster.Mana}
\DoxyCodeLine{var\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ monster.Name}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{hp\ :=\ monster.Hp()}
\DoxyCodeLine{mana\ :=\ monster.Mana()}
\DoxyCodeLine{name\ :=\ string(monster.Name())\ //\ Note:\ \`{}monster.Name()`\ returns\ a\ byte[].}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{hp\ =\ monster.Hp()}
\DoxyCodeLine{mana\ =\ monster.Mana()}
\DoxyCodeLine{name\ =\ monster.Name()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ hp\ =\ monster.hp();}
\DoxyCodeLine{var\ mana\ =\ monster.mana();}
\DoxyCodeLine{var\ name\ =\ monster.name();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ hp\ =\ monster.hp();}
\DoxyCodeLine{let\ mana\ =\ monster.mana();}
\DoxyCodeLine{let\ name\ =\ monster.name();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\$hp\ =\ \$monster-\/>getHp();}
\DoxyCodeLine{\$mana\ =\ \$monster-\/>getMana();}
\DoxyCodeLine{\$name\ =\ monster-\/>getName();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{uint16\_t\ hp\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_hp(monster));}
\DoxyCodeLine{uint16\_t\ mana\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_mana(monster));}
\DoxyCodeLine{flatbuffers\_string\_t\ \mbox{\hyperlink{idl__gen__ts_8cpp_a9b45b3e13bd9167aab02e17e08916231}{name}}\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_name(monster));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ For\ Dart,\ unlike\ other\ languages\ support\ by\ FlatBuffers,\ most\ values}
\DoxyCodeLine{//\ are\ available\ as\ properties\ instead\ of\ accessor\ methods.}
\DoxyCodeLine{var\ hp\ =\ monster.hp;}
\DoxyCodeLine{var\ mana\ =\ monster.mana;}
\DoxyCodeLine{var\ name\ =\ monster.name;}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{local\ hp\ =\ mon:Hp()}
\DoxyCodeLine{local\ mana\ =\ mon:Mana()}
\DoxyCodeLine{local\ name\ =\ mon:Name()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ hp\ =\ monster.hp}
\DoxyCodeLine{let\ mana\ =\ monster.mana}
\DoxyCodeLine{let\ name\ =\ monster.name}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ and\ test\ some\ scalar\ types\ from\ the\ FlatBuffer.}
\DoxyCodeLine{let\ hp\ =\ monster.hp();}
\DoxyCodeLine{let\ mana\ =\ monster.mana();}
\DoxyCodeLine{let\ name\ =\ monster.name();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ hp\ =\ monster.hp}
\DoxyCodeLine{let\ mana\ =\ monster.mana}
\DoxyCodeLine{let\ name\ =\ monster.name\ //\ returns\ an\ optional\ string}

\end{DoxyCode}
 

These should hold {\ttfamily 300}, {\ttfamily 150}, and {\ttfamily "{}\+Orc"{}} respectively.

{\itshape Note\+: The default value {\ttfamily 150} wasn\textquotesingle{}t stored in {\ttfamily mana}, but we are still able to retrieve it.}

To access sub-\/objects, in the case of our {\ttfamily pos}, which is a {\ttfamily Vec3}\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ pos\ =\ monster-\/>pos();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a6150e0515f7202e2fb518f7206ed97dc}{x}}\ =\ pos-\/>x();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a39cb44155237f0205e0feb931d5acbed}{y}}\ =\ pos-\/>y();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a196ff6a287f53f758b1506f21269fc77}{z}}\ =\ pos-\/>z();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{Vec3\ pos\ =\ monster.pos();}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a6150e0515f7202e2fb518f7206ed97dc}{x}}\ =\ pos.x();}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a39cb44155237f0205e0feb931d5acbed}{y}}\ =\ pos.y();}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a196ff6a287f53f758b1506f21269fc77}{z}}\ =\ pos.z();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ pos\ =\ monster.pos!!}
\DoxyCodeLine{val\ x\ =\ pos.x}
\DoxyCodeLine{val\ y\ =\ pos.y}
\DoxyCodeLine{val\ z\ =\ pos.z}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ pos\ =\ monster.Pos.Value;}
\DoxyCodeLine{var\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a6150e0515f7202e2fb518f7206ed97dc}{x}}\ =\ pos.X;}
\DoxyCodeLine{var\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a39cb44155237f0205e0feb931d5acbed}{y}}\ =\ pos.Y;}
\DoxyCodeLine{var\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a196ff6a287f53f758b1506f21269fc77}{z}}\ =\ pos.Z;}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{pos\ :=\ monster.Pos(nil)}
\DoxyCodeLine{x\ :=\ pos.X()}
\DoxyCodeLine{y\ :=\ pos.Y()}
\DoxyCodeLine{z\ :=\ pos.Z()}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Note:\ Whenever\ you\ access\ a\ new\ object,\ like\ in\ \`{}Pos()`,\ a\ new\ temporary}
\DoxyCodeLine{//\ accessor\ object\ gets\ created.\ If\ your\ code\ is\ very\ performance\ sensitive,}
\DoxyCodeLine{//\ you\ can\ pass\ in\ a\ pointer\ to\ an\ existing\ \`{}Vec3`\ instead\ of\ \`{}nil`.\ This}
\DoxyCodeLine{//\ allows\ you\ to\ reuse\ it\ across\ many\ calls\ to\ reduce\ the\ amount\ of\ object}
\DoxyCodeLine{//\ allocation/garbage\ collection.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{pos\ =\ monster.Pos()}
\DoxyCodeLine{x\ =\ pos.X()}
\DoxyCodeLine{y\ =\ pos.Y()}
\DoxyCodeLine{z\ =\ pos.Z()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ pos\ =\ monster.pos();}
\DoxyCodeLine{var\ x\ =\ pos.x();}
\DoxyCodeLine{var\ y\ =\ pos.y();}
\DoxyCodeLine{var\ z\ =\ pos.z();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ pos\ =\ monster.pos();}
\DoxyCodeLine{let\ x\ =\ pos.x();}
\DoxyCodeLine{let\ y\ =\ pos.y();}
\DoxyCodeLine{let\ z\ =\ pos.z();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\$pos\ =\ \$monster-\/>getPos();}
\DoxyCodeLine{\$x\ =\ \$pos-\/>getX();}
\DoxyCodeLine{\$y\ =\ \$pos-\/>getY();}
\DoxyCodeLine{\$z\ =\ \$pos-\/>getZ();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Vec3\_struct\_t)\ pos\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_pos(monster));}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a6150e0515f7202e2fb518f7206ed97dc}{x}}\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Vec3\_x(pos));}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a39cb44155237f0205e0feb931d5acbed}{y}}\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Vec3\_y(pos));}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ \mbox{\hyperlink{gmock-matchers-containers__test_8cc_a196ff6a287f53f758b1506f21269fc77}{z}}\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Vec3\_z(pos));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{myGame.Vec3\ pos\ =\ monster.pos;}
\DoxyCodeLine{double\ x\ =\ pos.x;}
\DoxyCodeLine{double\ y\ =\ pos.y;}
\DoxyCodeLine{double\ z\ =\ pos.z;}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{local\ pos\ =\ mon:Pos()}
\DoxyCodeLine{local\ x\ =\ pos:X()}
\DoxyCodeLine{local\ y\ =\ pos:Y()}
\DoxyCodeLine{local\ z\ =\ pos:Z()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ pos\ =\ monster.pos}
\DoxyCodeLine{let\ x\ =\ pos.x}
\DoxyCodeLine{let\ y\ =\ pos.y}
\DoxyCodeLine{let\ z\ =\ pos.z}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ pos\ =\ monster.pos().unwrap();}
\DoxyCodeLine{let\ x\ =\ pos.x();}
\DoxyCodeLine{let\ y\ =\ pos.y();}
\DoxyCodeLine{let\ z\ =\ pos.z();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ pos\ =\ monster.pos}
\DoxyCodeLine{let\ x\ =\ pos.x}
\DoxyCodeLine{let\ y\ =\ pos.y}
\DoxyCodeLine{let\ z\ =\ pos.z}

\end{DoxyCode}
 

{\ttfamily x}, {\ttfamily y}, and {\ttfamily z} will contain {\ttfamily 1.\+0}, {\ttfamily 2.\+0}, and {\ttfamily 3.\+0}, respectively.

{\itshape Note\+: Had we not set {\ttfamily pos} during serialization, it would be a {\ttfamily null}-\/value.}

Similarly, we can access elements of the inventory {\ttfamily vector} by indexing it. You can also iterate over the length of the array/vector representing the Flat\+Buffers {\ttfamily vector}.

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ inv\ =\ monster-\/>inventory();\ \textcolor{comment}{//\ A\ pointer\ to\ a\ \`{}flatbuffers::Vector<>`.}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ inv\_len\ =\ inv-\/>size();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ third\_item\ =\ inv-\/>Get(2);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ invLength\ =\ monster.inventoryLength();}
\DoxyCodeLine{\textcolor{keywordtype}{byte}\ thirdItem\ =\ monster.inventory(2);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ invLength\ =\ monster.inventoryLength}
\DoxyCodeLine{val\ thirdItem\ =\ monster.inventory(2)!!}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ invLength\ =\ monster.InventoryLength;}
\DoxyCodeLine{var\ thirdItem\ =\ monster.Inventory(2);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{invLength\ :=\ monster.InventoryLength()}
\DoxyCodeLine{thirdItem\ :=\ monster.Inventory(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{inv\_len\ =\ monster.InventoryLength()}
\DoxyCodeLine{third\_item\ =\ monster.Inventory(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ invLength\ =\ monster.inventoryLength();}
\DoxyCodeLine{var\ thirdItem\ =\ monster.inventory(2);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ invLength\ =\ monster.inventoryLength();}
\DoxyCodeLine{let\ thirdItem\ =\ monster.inventory(2);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\$inv\_len\ =\ \$monster-\/>getInventoryLength();}
\DoxyCodeLine{\$third\_item\ =\ \$monster-\/>getInventory(2);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ If\ \`{}inv`\ hasn't\ been\ set,\ it\ will\ be\ null.\ It\ is\ valid\ get}}
\DoxyCodeLine{\textcolor{comment}{//\ the\ length\ of\ null\ which\ will\ be\ 0,\ useful\ for\ iteration.}}
\DoxyCodeLine{flatbuffers\_uint8\_vec\_t\ inv\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_inventory(monster));}
\DoxyCodeLine{\textcolor{keywordtype}{size\_t}\ inv\_len\ =\ flatbuffers\_uint8\_vec\_len(inv);}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{int\ invLength\ =\ monster.inventory.length;}
\DoxyCodeLine{var\ thirdItem\ =\ monster.inventory[2];}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{local\ invLength\ =\ mon:InventoryLength()}
\DoxyCodeLine{local\ thirdItem\ =\ mon:Inventory(3)\ -\/-\/\ Lua\ is\ 1-\/based}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ inv\_len\ =\ monster.inventory\_length}
\DoxyCodeLine{let\ third\_item\ =\ monster.inventory(2)}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ and\ test\ an\ element\ from\ the\ \`{}inventory`\ FlatBuffer's\ \`{}vector`.}
\DoxyCodeLine{let\ inv\ =\ monster.inventory().unwrap();}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Note\ that\ this\ vector\ is\ returned\ as\ a\ slice,\ because\ direct\ access\ for}
\DoxyCodeLine{//\ this\ type,\ a\ \`{}u8`\ vector,\ is\ safe\ on\ all\ platforms:}
\DoxyCodeLine{let\ third\_item\ =\ inv[2];}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ a\ the\ count\ of\ objects\ in\ the\ vector}
\DoxyCodeLine{let\ count\ =\ monster.inventoryCount}
\DoxyCodeLine{}
\DoxyCodeLine{//\ get\ item\ at\ index\ 4}
\DoxyCodeLine{let\ object\ =\ monster.inventory(at:\ 4)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ or\ you\ can\ fetch\ the\ entire\ array}
\DoxyCodeLine{let\ inv\ =\ monster.inventory}
\DoxyCodeLine{//\ inv[4]\ should\ equal\ object}

\end{DoxyCode}
 

For {\ttfamily vector}s of {\ttfamily table}s, you can access the elements like any other vector, except you need to handle the result as a Flat\+Buffer {\ttfamily table}\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ weapons\ =\ monster-\/>weapons();\ \textcolor{comment}{//\ A\ pointer\ to\ a\ \`{}flatbuffers::Vector<>`.}}
\DoxyCodeLine{\textcolor{keyword}{auto}\ weapon\_len\ =\ weapons-\/>size();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ second\_weapon\_name\ =\ weapons-\/>Get(1)-\/>name()-\/>str();}
\DoxyCodeLine{\textcolor{keyword}{auto}\ second\_weapon\_damage\ =\ weapons-\/>Get(1)-\/>damage()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ weaponsLength\ =\ monster.weaponsLength();}
\DoxyCodeLine{\mbox{\hyperlink{namespacereflection_a94d99018201fa75e6e29207136c64d98a31dbbb45901c4d63a13a5c93bb549af6}{String}}\ secondWeaponName\ =\ monster.weapons(1).name();}
\DoxyCodeLine{\textcolor{keywordtype}{short}\ secondWeaponDamage\ =\ monster.weapons(1).damage();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ weaponsLength\ =\ monster.weaponsLength}
\DoxyCodeLine{val\ secondWeaponName\ =\ monster.weapons(1)!!.name}
\DoxyCodeLine{val\ secondWeaponDamage\ =\ monster.weapons(1)!!.damage}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ weaponsLength\ =\ monster.WeaponsLength;}
\DoxyCodeLine{var\ secondWeaponName\ =\ monster.Weapons(1).Name;}
\DoxyCodeLine{var\ secondWeaponDamage\ =\ monster.Weapons(1).Damage;}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{weaponLength\ :=\ monster.WeaponsLength()}
\DoxyCodeLine{weapon\ :=\ new(sample.Weapon)\ //\ We\ need\ a\ \`{}sample.Weapon`\ to\ pass\ into\ \`{}monster.Weapons()`}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ to\ capture\ the\ output\ of\ the\ function.}
\DoxyCodeLine{if\ monster.Weapons(weapon,\ 1)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ secondWeaponName\ :=\ weapon.Name()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ secondWeaponDamage\ :=\ weapon.Damage()}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{weapons\_length\ =\ monster.WeaponsLength()}
\DoxyCodeLine{second\_weapon\_name\ =\ monster.Weapons(1).Name()}
\DoxyCodeLine{second\_weapon\_damage\ =\ monster.Weapons(1).Damage()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ weaponsLength\ =\ monster.weaponsLength();}
\DoxyCodeLine{var\ secondWeaponName\ =\ monster.weapons(1).name();}
\DoxyCodeLine{var\ secondWeaponDamage\ =\ monster.weapons(1).damage();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ weaponsLength\ =\ monster.weaponsLength();}
\DoxyCodeLine{let\ secondWeaponName\ =\ monster.weapons(1).name();}
\DoxyCodeLine{let\ secondWeaponDamage\ =\ monster.weapons(1).damage();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\$weapons\_len\ =\ \$monster-\/>getWeaponsLength();}
\DoxyCodeLine{\$second\_weapon\_name\ =\ \$monster-\/>getWeapons(1)-\/>getName();}
\DoxyCodeLine{\$second\_weapon\_damage\ =\ \$monster-\/>getWeapons(1)-\/>getDamage();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_t)\ weapons\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_weapons(monster));}
\DoxyCodeLine{\textcolor{keywordtype}{size\_t}\ weapons\_len\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_len(weapons));}
\DoxyCodeLine{\textcolor{comment}{//\ We\ can\ use\ \`{}const\ char\ *`\ instead\ of\ \`{}flatbuffers\_string\_t`.}}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *second\_weapon\_name\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_name(\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_at(weapons,\ 1))));}
\DoxyCodeLine{uint16\_t\ second\_weapon\_damage\ =\ \ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_damage(\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_vec\_at(weapons,\ 1))));}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{int\ weaponsLength\ =\ monster.weapons.length;}
\DoxyCodeLine{var\ secondWeaponName\ =\ monster.weapons[1].name;}
\DoxyCodeLine{var\ secondWeaponDamage\ =\ monster.Weapons[1].damage;}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{local\ weaponsLength\ =\ mon:WeaponsLength()}
\DoxyCodeLine{local\ secondWeaponName\ =\ mon:Weapon(2):Name()}
\DoxyCodeLine{local\ secondWeaponDamage\ =\ mon:Weapon(2):Damage()}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ weapons\_length\ =\ monster.weapons\_length}
\DoxyCodeLine{let\ second\_weapon\_name\ =\ monster.weapons(1).name}
\DoxyCodeLine{let\ second\_weapon\_damage\ =\ monster.weapons(1).damage}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ and\ test\ the\ \`{}weapons`\ FlatBuffers's\ \`{}vector`.}
\DoxyCodeLine{let\ weps\ =\ monster.weapons().unwrap();}
\DoxyCodeLine{let\ weps\_len\ =\ weps.len();}
\DoxyCodeLine{}
\DoxyCodeLine{let\ wep2\ =\ weps.get(1);}
\DoxyCodeLine{let\ second\_weapon\_name\ =\ wep2.name();}
\DoxyCodeLine{let\ second\_weapon\_damage\ =\ wep2.damage();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ the\ count\ of\ weapon\ objects}
\DoxyCodeLine{let\ wepsCount\ =\ monster.weaponsCount}
\DoxyCodeLine{}
\DoxyCodeLine{let\ weapon2\ =\ monster.weapons(at:\ 1)}
\DoxyCodeLine{let\ weaponName\ =\ weapon2.name}
\DoxyCodeLine{let\ weaponDmg\ =\ weapon2.damage}

\end{DoxyCode}
 

Last, we can access our {\ttfamily Equipped} Flat\+Buffer {\ttfamily union}. Just like when we created the {\ttfamily union}, we need to get both parts of the {\ttfamily union}\+: the type and the data.

We can access the type to dynamically cast the data as needed (since the {\ttfamily union} only stores a Flat\+Buffer {\ttfamily table}).

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ union\_type\ =\ monster-\/>equipped\_type();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (union\_type\ ==\ Equipment\_Weapon)\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{auto}\ weapon\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Weapon*\textcolor{keyword}{>}(monster-\/>equipped());\ \textcolor{comment}{//\ Requires\ \`{}static\_cast`}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ type\ \`{}const\ Weapon*`.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{auto}\ weapon\_name\ =\ weapon-\/>name()-\/>str();\ \textcolor{comment}{//\ "{}Axe"{}}}
\DoxyCodeLine{\ \ \textcolor{keyword}{auto}\ weapon\_damage\ =\ weapon-\/>damage();\ \ \ \ \textcolor{comment}{//\ 5}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ unionType\ =\ monster.EquippedType();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (unionType\ ==\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_add5600c8554383eb7a8c7793a9da2a92}{Equipment}}.Weapon)\ \{}
\DoxyCodeLine{\ \ Weapon\ weapon\ =\ (Weapon)monster.equipped(\textcolor{keyword}{new}\ Weapon());\ \textcolor{comment}{//\ Requires\ explicit\ cast}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ \`{}Weapon`.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{namespacereflection_a94d99018201fa75e6e29207136c64d98a31dbbb45901c4d63a13a5c93bb549af6}{String}}\ weaponName\ =\ weapon.name();\ \ \ \ \textcolor{comment}{//\ "{}Axe"{}}}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{short}\ weaponDamage\ =\ weapon.damage();\ \textcolor{comment}{//\ 5}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ unionType\ =\ monster.EquippedType}
\DoxyCodeLine{}
\DoxyCodeLine{if\ (unionType\ ==\ Equipment.Weapon)\ \{}
\DoxyCodeLine{\ \ val\ weapon\ =\ monster.equipped(Weapon())\ as\ Weapon\ //\ Requires\ explicit\ cast}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ to\ \`{}Weapon`.}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ val\ weaponName\ =\ weapon.name\ \ \ //\ "{}Axe"{}}
\DoxyCodeLine{\ \ val\ weaponDamage\ =\ weapon.damage\ //\ 5}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ unionType\ =\ monster.EquippedType;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (unionType\ ==\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_add5600c8554383eb7a8c7793a9da2a92}{Equipment}}.Weapon)\ \{}
\DoxyCodeLine{\ \ var\ weapon\ =\ monster.Equipped<Weapon>().Value;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ var\ weaponName\ =\ weapon.Name;\ \ \ \ \ \textcolor{comment}{//\ "{}Axe"{}}}
\DoxyCodeLine{\ \ var\ weaponDamage\ =\ weapon.Damage;\ \textcolor{comment}{//\ 5}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ We\ need\ a\ \`{}flatbuffers.Table`\ to\ capture\ the\ output\ of\ the}
\DoxyCodeLine{//\ \`{}monster.Equipped()`\ function.}
\DoxyCodeLine{unionTable\ :=\ new(flatbuffers.Table)}
\DoxyCodeLine{}
\DoxyCodeLine{if\ monster.Equipped(unionTable)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ unionType\ :=\ monster.EquippedType()}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ unionType\ ==\ sample.EquipmentWeapon\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ Create\ a\ \`{}sample.Weapon`\ object\ that\ can\ be\ initialized\ with\ the\ contents}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ of\ the\ \`{}flatbuffers.Table`\ (`unionTable`),\ which\ was\ populated\ by}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ \`{}monster.Equipped()`.}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unionWeapon\ =\ new(sample.Weapon)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unionWeapon.Init(unionTable.Bytes,\ unionTable.Pos)}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ weaponName\ =\ unionWeapon.Name()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ weaponDamage\ =\ unionWeapon.Damage()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{union\_type\ =\ monster.EquippedType()}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ union\_type\ ==\ MyGame.Sample.Equipment.Equipment().Weapon:}
\DoxyCodeLine{\ \ \textcolor{comment}{\#\ \`{}monster.Equipped()`\ returns\ a\ \`{}flatbuffers.Table`,\ which\ can\ be\ used\ to}}
\DoxyCodeLine{\ \ \textcolor{comment}{\#\ initialize\ a\ \`{}MyGame.Sample.Weapon.Weapon()`.}}
\DoxyCodeLine{\ \ union\_weapon\ =\ MyGame.Sample.Weapon.Weapon()}
\DoxyCodeLine{\ \ union\_weapon.Init(monster.Equipped().Bytes,\ monster.Equipped().Pos)}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ weapon\_name\ =\ union\_weapon.Name()\ \ \ \ \ //\ \textcolor{stringliteral}{'Axe'}}
\DoxyCodeLine{\ \ weapon\_damage\ =\ union\_weapon.Damage()\ //\ 5}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ unionType\ =\ monster.equippedType();}
\DoxyCodeLine{}
\DoxyCodeLine{if\ (unionType\ ==\ MyGame.Sample.Equipment.Weapon)\ \{}
\DoxyCodeLine{\ \ var\ weaponName\ =\ monster.equipped(new\ MyGame.Sample.Weapon()).name();\ \ \ \ \ //\ 'Axe'}
\DoxyCodeLine{\ \ var\ weaponDamage\ =\ monster.equipped(new\ MyGame.Sample.Weapon()).damage();\ //\ 5}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ unionType\ =\ monster.equippedType();}
\DoxyCodeLine{}
\DoxyCodeLine{if\ (unionType\ ==\ MyGame.Sample.Equipment.Weapon)\ \{}
\DoxyCodeLine{\ \ let\ weaponName\ =\ monster.equipped(new\ MyGame.Sample.Weapon()).name();\ \ \ \ \ //\ 'Axe'}
\DoxyCodeLine{\ \ let\ weaponDamage\ =\ monster.equipped(new\ MyGame.Sample.Weapon()).damage();\ //\ 5}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\$union\_type\ =\ \$monster-\/>getEquippedType();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (\$union\_type\ ==\ \(\backslash\)\mbox{\hyperlink{namespaceMyGame}{MyGame}}\(\backslash\)Sample\(\backslash\)Equipment::Weapon)\ \{}
\DoxyCodeLine{\ \ \$weapon\_name\ =\ \$monster-\/>getEquipped(\textcolor{keyword}{new}\ \(\backslash\)\mbox{\hyperlink{namespaceMyGame}{MyGame}}\(\backslash\)Sample\(\backslash\)Weapon())-\/>getName();\ \ \ \ \ \textcolor{comment}{//\ "{}Axe"{}}}
\DoxyCodeLine{\ \ \$weapon\_damage\ =\ \$monster-\/>getEquipped(\textcolor{keyword}{new}\ \(\backslash\)\mbox{\hyperlink{namespaceMyGame}{MyGame}}\(\backslash\)Sample\(\backslash\)Weapon())-\/>getDamage();\ \textcolor{comment}{//\ 5}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Access\ union\ type\ field.}}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (\mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_equipped\_type(monster))\ ==\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Equipment\_Weapon))\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Cast\ to\ appropriate\ type:}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ C\ allows\ for\ silent\ void\ pointer\ assignment,\ so\ we\ need\ no\ explicit\ cast.}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_table\_t)\ weapon\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Monster\_equipped(monster));}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *weapon\_name\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_name(weapon));\ \textcolor{comment}{//\ "{}Axe"{}}}
\DoxyCodeLine{\ \ \ \ uint16\_t\ weapon\_damage\ =\ \mbox{\hyperlink{idl__gen__ts_8cpp_a97618fe2e31e62d92ace9b30478febba}{ns}}(Weapon\_damage(weapon));\ \textcolor{comment}{//\ 5}}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ unionType\ =\ monster.equippedType.value;}
\DoxyCodeLine{}
\DoxyCodeLine{if\ (unionType\ ==\ myGame.EquipmentTypeId.Weapon.value)\ \{}
\DoxyCodeLine{\ \ myGame.Weapon\ weapon\ =\ mon.equipped\ as\ myGame.Weapon;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ var\ weaponName\ =\ weapon.name;\ \ \ \ \ //\ "{}Axe"{}}
\DoxyCodeLine{\ \ var\ weaponDamage\ =\ weapon.damage;\ //\ 5}
\DoxyCodeLine{\}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{local\ unionType\ =\ mon:EquippedType()}
\DoxyCodeLine{}
\DoxyCodeLine{if\ unionType\ ==\ equipment.Weapon\ then}
\DoxyCodeLine{\ \ local\ unionWeapon\ =\ weapon.New()}
\DoxyCodeLine{\ \ unionWeapon:Init(mon:Equipped().bytes,\ mon:Equipped().pos)}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ local\ weaponName\ =\ unionWeapon:Name()\ \ \ \ \ -\/-\/\ 'Axe'}
\DoxyCodeLine{\ \ local\ weaponDamage\ =\ unionWeapon:Damage()\ -\/-\/\ 5}
\DoxyCodeLine{end}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{union\_type\ =\ monster.equipped\_type}
\DoxyCodeLine{}
\DoxyCodeLine{if\ union\_type\ ==\ MyGame\_Sample\_Equipment\_Weapon:}
\DoxyCodeLine{\ \ \ \ //\ \`{}monster.equipped\_as\_Weapon`\ returns\ a\ FlatBuffer\ handle\ much\ like\ normal\ table\ fields,}
\DoxyCodeLine{\ \ \ \ //\ but\ this\ is\ only\ valid\ to\ call\ if\ we\ already\ know\ it\ is\ the\ correct\ type.}
\DoxyCodeLine{\ \ \ \ let\ union\_weapon\ =\ monster.equipped\_as\_Weapon}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ let\ weapon\_name\ =\ union\_weapon.name\ \ \ \ \ //\ "{}Axe"{}}
\DoxyCodeLine{\ \ \ \ let\ weapon\_damage\ =\ union\_weapon.damage\ //\ 5}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ and\ test\ the\ \`{}Equipment`\ union\ (`equipped`\ field).}
\DoxyCodeLine{//\ \`{}equipped\_as\_weapon`\ returns\ a\ FlatBuffer\ handle\ much\ like\ normal\ table}
\DoxyCodeLine{//\ fields,\ but\ this\ will\ return\ \`{}None`\ if\ the\ union\ is\ not\ actually\ of\ that}
\DoxyCodeLine{//\ type.}
\DoxyCodeLine{if\ monster.equipped\_type()\ ==\ Equipment::Weapon\ \{}
\DoxyCodeLine{\ \ let\ equipped\ =\ monster.equipped\_as\_weapon().unwrap();}
\DoxyCodeLine{\ \ let\ weapon\_name\ =\ equipped.name();}
\DoxyCodeLine{\ \ let\ weapon\_damage\ =\ equipped.damage();}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{//\ Get\ and\ check\ if\ the\ monster\ has\ an\ equipped\ item}
\DoxyCodeLine{if\ monster.equippedType\ ==\ .weapon\ \{}
\DoxyCodeLine{\ \ let\ \_weapon\ =\ monster.equipped(type:\ Weapon.self)}
\DoxyCodeLine{\ \ let\ name\ =\ \_weapon.name\ //\ should\ return\ "{}Axe"{}}
\DoxyCodeLine{\ \ let\ dmg\ =\ \_weapon.damage\ //\ should\ return\ 5}
\DoxyCodeLine{\}}

\end{DoxyCode}
 

\doxysection*{Mutating Flat\+Buffers}

As you saw above, typically once you have created a Flat\+Buffer, it is read-\/only from that moment on. There are, however, cases where you have just received a Flat\+Buffer, and you\textquotesingle{}d like to modify something about it before sending it on to another recipient. With the above functionality, you\textquotesingle{}d have to generate an entirely new Flat\+Buffer, while tracking what you modified in your own data structures. This is inconvenient.

For this reason Flat\+Buffers can also be mutated in-\/place. While this is great for making small fixes to an existing buffer, you generally want to create buffers from scratch whenever possible, since it is much more efficient and the API is much more general purpose.

To get non-\/const accessors, invoke {\ttfamily flatc} with {\ttfamily -\/-\/gen-\/mutable}.

Similar to how we read fields using the accessors above, we can now use the mutators like so\+:

 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{auto}\ monster\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Sample_a6eafccfe16b681c7e45bb0d335e669af}{GetMutableMonster}}(buffer\_pointer);\ \ \textcolor{comment}{//\ non-\/const}}
\DoxyCodeLine{monster-\/>mutate\_hp(10);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ table\ \`{}hp`\ field.}}
\DoxyCodeLine{monster-\/>mutable\_pos()-\/>mutate\_z(4);\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ struct\ field.}}
\DoxyCodeLine{monster-\/>mutable\_inventory()-\/>Mutate(0,\ 1);\ \ \textcolor{comment}{//\ Set\ vector\ element.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}\ monster\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.getRootAsMonster(buf);}
\DoxyCodeLine{monster.mutateHp(10);\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ table\ field.}}
\DoxyCodeLine{monster.pos().mutateZ(4);\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ struct\ field.}}
\DoxyCodeLine{monster.mutateInventory(0,\ 1);\ \ \ \textcolor{comment}{//\ Set\ vector\ element.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{val\ monster\ =\ Monster.getRootAsMonster(buf)}
\DoxyCodeLine{monster.mutateHp(10)\ \ \ \ \ \ \ \ \ \ \ \ //\ Set\ table\ field.}
\DoxyCodeLine{monster.pos!!.mutateZ(4)\ \ \ \ \ \ \ \ //\ Set\ struct\ field.}
\DoxyCodeLine{monster.mutateInventory(0,\ 1)\ \ \ //\ Set\ vector\ element.}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ monster\ =\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ac1ea6e173e6c1b0fb8585ffc416d9b88a243a3afa44aed85d504dbd53fd9804e9}{Monster}}.GetRootAsMonster(buf);}
\DoxyCodeLine{monster.MutateHp(10);\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ table\ field.}}
\DoxyCodeLine{monster.Pos.MutateZ(4);\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ struct\ field.}}
\DoxyCodeLine{monster.MutateInventory(0,\ 1);\ \ \ \textcolor{comment}{//\ Set\ vector\ element.}}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ for\ mutating\ FlatBuffers\ is\ not\ yet\ available\ in\ Go.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ \textcolor{keywordflow}{for}\ mutating\ FlatBuffers\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ yet\ available\ \textcolor{keywordflow}{in}\ Python.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ for\ mutating\ FlatBuffers\ is\ not\ yet\ supported\ in\ JavaScript.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ for\ mutating\ FlatBuffers\ is\ not\ yet\ supported\ in\ TypeScript.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ \textcolor{keywordflow}{for}\ mutating\ FlatBuffers\ is\ not\ yet\ supported\ in\ PHP.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ \textcolor{keywordflow}{for}\ in-\/place\ mutating\ FlatBuffers\ will\ not\ be\ supported\ in\ \mbox{\hyperlink{namespaceMyGame_1_1Example_ae1991218ee8cc642c45550d117f89dc8a0d61f8370cad1d412f80b84d143e1257}{C}}}
\DoxyCodeLine{(except\ in-\/place\ vector\ sorting\ is\ possible).>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ for\ mutating\ FlatBuffers\ not\ yet\ available\ in\ Dart.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ for\ mutating\ FlatBuffers\ is\ not\ yet\ available\ in\ Lua.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ for\ mutating\ FlatBuffers\ is\ not\ yet\ available\ in\ Lobster.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{<API\ for\ mutating\ FlatBuffers\ is\ not\ yet\ available\ in\ Rust.>}

\end{DoxyCode}
   
\begin{DoxyCode}{0}
\DoxyCodeLine{let\ monster\ =\ Monster.getRootAsMonster(bb:\ ByteBuffer(bytes:\ buf))}
\DoxyCodeLine{monster.mutate(hp:\ 10)\ //\ mutates\ a\ value\ in\ a\ table}
\DoxyCodeLine{///\ to\ mutate\ structs\ in\ swift\ you\ have\ to\ use\ the\ mutable\ accessors}
\DoxyCodeLine{monster.mutablePos.mutate(z:\ 4)\ //\ mutates\ a\ value\ in\ a\ struct}
\DoxyCodeLine{monster.mutate(inventory:\ 6,\ at\ index:\ 0)\ //\ mutates\ a\ value\ in\ an\ Scalar\ array}

\end{DoxyCode}
 

We use the somewhat verbose term {\ttfamily mutate} instead of {\ttfamily set} to indicate that this is a special use case, not to be confused with the default way of constructing Flat\+Buffer data.

After the above mutations, you can send on the Flat\+Buffer to a new recipient without any further work!

Note that any {\ttfamily mutate} functions on a table will return a boolean, which is {\ttfamily false} if the field we\textquotesingle{}re trying to set is not present in the buffer. Fields are not present if they weren\textquotesingle{}t set, or even if they happen to be equal to the default value. For example, in the creation code above, the {\ttfamily mana} field is equal to {\ttfamily 150}, which is the default value, so it was never stored in the buffer. Trying to call the corresponding {\ttfamily mutate} method for {\ttfamily mana} on such data will return {\ttfamily false}, and the value won\textquotesingle{}t actually be modified!

One way to solve this is to call {\ttfamily Force\+Defaults} on a \doxylink{classFlatBufferBuilder}{Flat\+Buffer\+Builder} to force all fields you set to actually be written. This, of course, increases the size of the buffer somewhat, but this may be acceptable for a mutable buffer.

If this is not sufficient, other ways of mutating Flat\+Buffers may be supported in your language through an object based API ({\ttfamily -\/-\/gen-\/object-\/api}) or reflection. See the individual language documents for support.

\doxysection*{Using {\ttfamily flatc} as a JSON Conversion Tool}

If you are working with C, C++, or Lobster, you can parse JSON at runtime. If your language does not support JSON at the moment, {\ttfamily flatc} may provide an alternative. Using {\ttfamily flatc} is often the preferred method, as it doesn\textquotesingle{}t require you to add any new code to your program. It is also efficient, since you can ship with the binary data. The drawback is that it requires an extra step for your users/developers to perform (although it may be able to be automated as part of your compilation).

\doxysubsubsection*{JSON to binary representation}

Let\textquotesingle{}s say you have a JSON file that describes your monster. In this example, we will use the file {\ttfamily flatbuffers/samples/monsterdata.\+json}.

Here are the contents of the file\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}pos"{}:\ \{}
\DoxyCodeLine{\ \ \ \ "{}x"{}:\ 1.0,}
\DoxyCodeLine{\ \ \ \ "{}y"{}:\ 2.0,}
\DoxyCodeLine{\ \ \ \ "{}z"{}:\ 3.0}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ "{}hp"{}:\ 300,}
\DoxyCodeLine{\ \ "{}name"{}:\ "{}Orc"{},}
\DoxyCodeLine{\ \ "{}weapons"{}:\ [}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ "{}name"{}:\ "{}axe"{},}
\DoxyCodeLine{\ \ \ \ \ \ "{}damage"{}:\ 100}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ "{}name"{}:\ "{}bow"{},}
\DoxyCodeLine{\ \ \ \ \ \ "{}damage"{}:\ 90}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ ],}
\DoxyCodeLine{\ \ "{}equipped\_type"{}:\ "{}Weapon"{},}
\DoxyCodeLine{\ \ "{}equipped"{}:\ \{}
\DoxyCodeLine{\ \ \ \ "{}name"{}:\ "{}bow"{},}
\DoxyCodeLine{\ \ \ \ "{}damage"{}:\ 90}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


You can run this file through the {\ttfamily flatc} compiler with the {\ttfamily -\/b} flag and our {\ttfamily monster.\+fbs} schema to produce a Flat\+Buffer binary file.


\begin{DoxyCode}{0}
\DoxyCodeLine{./../flatc\ -\/-\/binary\ monster.fbs\ monsterdata.json}

\end{DoxyCode}


The output of this will be a file {\ttfamily monsterdata.\+bin}, which will contain the Flat\+Buffer binary representation of the contents from our {\ttfamily .json} file.

 {\itshape Note\+: If you\textquotesingle{}re working in C++, you can also parse JSON at runtime. See the \doxysectlink{flatbuffers_guide_use_cpp}{Use in C++}{0} section of the Programmer\textquotesingle{}s Guide for more information.}   {\itshape Note\+: If you\textquotesingle{}re working in C, the {\ttfamily flatcc -\/-\/json} (not {\ttfamily flatc}) compiler will generate schema specific high performance json parsers and printers that you can compile and use at runtime. The {\ttfamily flatc} compiler (not {\ttfamily flatcc}) on the other hand, is still useful for general offline json to flatbuffer conversion from a given schema. There are no current plans for {\ttfamily flatcc} to support this.}   {\itshape Note\+: If you\textquotesingle{}re working in Lobster, you can also parse JSON at runtime. See the \doxysectlink{flatbuffers_guide_use_lobster}{Use in Lobster}{0} section of the Programmer\textquotesingle{}s Guide for more information.} 

\doxysubsubsection*{Flat\+Buffer binary to JSON}

Converting from a Flat\+Buffer binary representation to JSON is supported as well\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{./../flatc\ -\/-\/json\ -\/-\/raw-\/binary\ monster.fbs\ -\/-\/\ monsterdata.bin}

\end{DoxyCode}
 This will convert {\ttfamily monsterdata.\+bin} back to its original JSON representation. You need to pass the corresponding Flat\+Buffers schema so that flatc knows how to interpret the binary buffer. Since {\ttfamily monster.\+fbs} does not specify an explicit {\ttfamily file\+\_\+identifier} for binary buffers, {\ttfamily flatc} needs to be forced into reading the {\ttfamily .bin} file using the {\ttfamily -\/-\/raw-\/binary} option.

The Flat\+Buffer binary representation does not explicitly encode default values, therefore they are not present in the resulting JSON unless you specify {\ttfamily -\/-\/defaults-\/json}.

If you intend to process the JSON with other tools, you may consider switching on {\ttfamily -\/-\/strict-\/json} so that identifiers are quoted properly.

{\itshape Note\+: The resulting JSON file is not necessarily identical with the original JSON. If the binary representation contains floating point numbers, floats and doubles are rounded to 6 and 12 digits, respectively, in order to represent them as decimals in the JSON document.}

\doxysection*{Advanced Features for Each Language}

\doxysubsection*{Vector of Unions}

Some languages support storing unions directly in a vector.


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ File\ found\ in\ tests/union\_vector/union\_vector.fbs}
\DoxyCodeLine{namespace\ Example.VectorOfUnions;}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Demonstrates\ the\ ability\ to\ have\ vectors\ of\ unions,\ and\ also\ to}
\DoxyCodeLine{//\ store\ structs\ and\ strings\ in\ unions.}
\DoxyCodeLine{}
\DoxyCodeLine{table\ Attacker\ \{}
\DoxyCodeLine{\ \ sword\_attack\_damage:\ int;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{struct\ Rapunzel\ \{}
\DoxyCodeLine{\ \ hair\_length:\ int;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{struct\ BookReader\ \{}
\DoxyCodeLine{\ \ books\_read:\ int;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{union\ Character\ \{}
\DoxyCodeLine{\ \ MuLan:\ Attacker,\ \ //\ Can\ have\ name\ be\ different\ from\ type.}
\DoxyCodeLine{\ \ Rapunzel,\ \ \ \ \ \ \ \ \ //\ Or\ just\ both\ the\ same,\ as\ before.}
\DoxyCodeLine{\ \ Belle:\ BookReader,}
\DoxyCodeLine{\ \ BookFan:\ BookReader,}
\DoxyCodeLine{\ \ Other:\ string,}
\DoxyCodeLine{\ \ Unused:\ string}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{table\ Movie\ \{}
\DoxyCodeLine{\ \ main\_character:\ Character;}
\DoxyCodeLine{\ \ characters:\ [Character];}
\DoxyCodeLine{\}}

\end{DoxyCode}


\doxysubsubsection*{Creating}

Analagously to how a union adds two fields to a table a vector of unions creates two different vectors\+: one for the union data and one for the data types.

 C++ supports vectors of unions, but it isn\textquotesingle{}t currently documented.   Typescript supports vectors of unions, but it isn\textquotesingle{}t currently documented.   PHP supports vectors of unions, but it isn\textquotesingle{}t currently documented.   Java supports vectors of unions, but it isn\textquotesingle{}t currently documented.   
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespaceGoogle_1_1FlatBuffers}{Google.FlatBuffers}};}
\DoxyCodeLine{\textcolor{keyword}{using\ }Example.VectorOfUnions;}
\DoxyCodeLine{}
\DoxyCodeLine{var\ fbb\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classFlatBufferBuilder}{FlatBufferBuilder}}(100);}
\DoxyCodeLine{}
\DoxyCodeLine{var\ characterTypes\ =\ \textcolor{keyword}{new}[]}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classCharacter}{Character}}.\mbox{\hyperlink{classCharacter_a3aaf7344885b9a62c823280c7e1df897}{MuLan}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classCharacter}{Character}}.\mbox{\hyperlink{classCharacter_ab15f054dc9414eaf1750c453a1e48d15}{Belle}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classCharacter}{Character}}.\mbox{\hyperlink{classCharacter_a61f00b3b1b288c222577059d23a827b9}{Other}},}
\DoxyCodeLine{\};}
\DoxyCodeLine{var\ characterTypesOffset\ =\ \mbox{\hyperlink{structMovie}{Movie}}.\mbox{\hyperlink{structMovie_a7b9af87aae4b307042015d3c3c2624e7}{CreateCharactersTypeVector}}(fbb,\ characterTypes);}
\DoxyCodeLine{}
\DoxyCodeLine{var\ characters\ =\ \textcolor{keyword}{new}[]}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structAttacker}{Attacker}}.\mbox{\hyperlink{structAttacker_a1920c2a60c4e32b77911aff4c76bbeb6}{CreateAttacker}}(fbb,\ 10).Value,}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structBookReader}{BookReader}}.\mbox{\hyperlink{structBookReader_a559b29192e19695964d59a22b36d21aa}{CreateBookReader}}(fbb,\ 20).Value,}
\DoxyCodeLine{\ \ \ \ fbb.CreateSharedString(\textcolor{stringliteral}{"{}Chip"{}}).Value,}
\DoxyCodeLine{\};}
\DoxyCodeLine{var\ charactersOffset\ =\ \mbox{\hyperlink{structMovie}{Movie}}.\mbox{\hyperlink{structMovie_a0b30317563ca66948246a35c8099c761}{CreateCharactersVector}}(fbb,\ characters);}
\DoxyCodeLine{}
\DoxyCodeLine{var\ movieOffset\ =\ \mbox{\hyperlink{structMovie}{Movie}}.\mbox{\hyperlink{structMovie_a023ea33c5051d7ba0db225a750d4ab1c}{CreateMovie}}(}
\DoxyCodeLine{\ \ \ \ fbb,}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classCharacter}{Character}}.\mbox{\hyperlink{classCharacter_ab8dd6ec79947742e917a6d09bdb7390b}{Rapunzel}},}
\DoxyCodeLine{\ \ \ \ rapunzel,}
\DoxyCodeLine{\ \ \ \ characterTypesOffset,}
\DoxyCodeLine{\ \ \ \ charactersOffset);}
\DoxyCodeLine{\mbox{\hyperlink{structMovie}{Movie}}.\mbox{\hyperlink{structMovie_aa46cc8bf1e0d4001c54325b59ffeb73d}{FinishMovieBuffer}}(fbb,\ movieOffset);}

\end{DoxyCode}
   Kotlin supports vectors of unions, but it isn\textquotesingle{}t currently documented.   Swift supports vectors of unions, but it isn\textquotesingle{}t currently documented. 

\doxysubsubsection*{Reading}

 
\begin{DoxyCode}{0}
\DoxyCodeLine{var\ movie\ =\ \mbox{\hyperlink{structMovie}{Movie}}.\mbox{\hyperlink{structMovie_a188482944bb5b203124d803127eb16a7}{GetRootAsMovie}}(fbb.DataBuffer);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ (var\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}\ <=\ movie.CharactersLength;\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}++)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (movie.CharactersType(\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}})\ ==\ \mbox{\hyperlink{classCharacter}{Character}}.\mbox{\hyperlink{classCharacter_a3aaf7344885b9a62c823280c7e1df897}{MuLan}})}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ var\ mulanSwordDamage\ =\ movie.Characters<\mbox{\hyperlink{structAttacker}{Attacker}}>(\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}).\mbox{\hyperlink{namespaceunion__value__collsion_a8635c4ecd0457fa137e78d33d40eb25a}{Value}}.SwordAttackDamage;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (movie.CharactersType(\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}})\ ==\ \mbox{\hyperlink{classCharacter}{Character}}.\mbox{\hyperlink{classCharacter_ab15f054dc9414eaf1750c453a1e48d15}{Belle}})}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ var\ belleBooksRead\ =\ movie.Characters<\mbox{\hyperlink{structBookReader}{BookReader}}>(\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}).\mbox{\hyperlink{namespaceunion__value__collsion_a8635c4ecd0457fa137e78d33d40eb25a}{Value}}.BooksRead;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (movie.CharactersType(\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}})\ ==\ \mbox{\hyperlink{classCharacter}{Character}}.\mbox{\hyperlink{classCharacter_a61f00b3b1b288c222577059d23a827b9}{Other}})}
\DoxyCodeLine{\ \ \{}
\DoxyCodeLine{\ \ \ \ var\ otherStr\ =\ movie.CharactersAsString(\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}});}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 

\doxysubsection*{Further Reading}

Each language has a dedicated {\ttfamily Use in XXX} page in the Programmer\textquotesingle{}s Guide to cover the nuances of Flat\+Buffers in that language.

For your chosen language, see\+:

 \doxysectlink{flatbuffers_guide_use_cpp}{Use in C++}{0}   \doxysectlink{flatbuffers_guide_use_java}{Use in Java}{0}   \doxysectlink{flatbuffers_guide_use_kotlin}{Use in Kotlin}{0}   \doxysectlink{flatbuffers_guide_use_c-sharp}{Use in C\#}{0}   \doxysectlink{flatbuffers_guide_use_go}{Use in Go}{0}   \doxysectlink{flatbuffers_guide_use_python}{Use in Python}{0}   \doxysectlink{flatbuffers_guide_use_javascript}{Use in Java\+Script}{0}   \doxysectlink{flatbuffers_guide_use_typescript}{Use in Type\+Script}{0}   \doxysectlink{flatbuffers_guide_use_php}{Use in PHP}{0}   \doxysectlink{flatbuffers_guide_use_c}{Use in C}{0}   \doxysectlink{flatbuffers_guide_use_dart}{Use in Dart}{0}   \doxysectlink{flatbuffers_guide_use_lua}{Use in Lua}{0}   \doxysectlink{flatbuffers_guide_use_lobster}{Use in Lobster}{0}   \doxysectlink{flatbuffers_guide_use_rust}{Use in Rust}{0}   \doxysectlink{flatbuffers_guide_use_swift}{Use in Swift}{0}  ~\newline
 