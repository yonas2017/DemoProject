\doxysection{flatbuffers/grpc/tests/message\+\_\+builder\+\_\+test.cpp File Reference}
\hypertarget{message__builder__test_8cpp}{}\label{message__builder__test_8cpp}\index{flatbuffers/grpc/tests/message\_builder\_test.cpp@{flatbuffers/grpc/tests/message\_builder\_test.cpp}}
{\ttfamily \#include "{}flatbuffers/grpc.\+h"{}}\newline
{\ttfamily \#include "{}monster\+\_\+test\+\_\+generated.\+h"{}}\newline
{\ttfamily \#include "{}test\+\_\+assert.\+h"{}}\newline
{\ttfamily \#include "{}test\+\_\+builder.\+h"{}}\newline
Include dependency graph for message\+\_\+builder\+\_\+test.\+cpp\+:
% FIG 0
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structBuilderReuseTests_3_01flatbuffers_1_1grpc_1_1MessageBuilder_00_01SrcBuilder_01_4}{Builder\+Reuse\+Tests$<$ flatbuffers\+::grpc\+::\+Message\+Builder, Src\+Builder $>$}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{message__builder__test_8cpp_ac09bab0afb6774b3a070503c2b88139d}{verify}} (\mbox{\hyperlink{classflatbuffers_1_1grpc_1_1Message}{flatbuffers\+::grpc\+::\+Message}}$<$ \mbox{\hyperlink{structMyGame_1_1Example_1_1Monster}{Monster}} $>$ \&msg, const std\+::string \&expected\+\_\+name, \mbox{\hyperlink{classMyGame_1_1Example_1_1Color}{Color}} expected\+\_\+color)
\item 
bool \mbox{\hyperlink{message__builder__test_8cpp_a55c5176e6e0d5d8d2619b58ca1e15377}{release\+\_\+n\+\_\+verify}} (\mbox{\hyperlink{classflatbuffers_1_1grpc_1_1MessageBuilder}{flatbuffers\+::grpc\+::\+Message\+Builder}} \&mbb, const std\+::string \&expected\+\_\+name, \mbox{\hyperlink{classMyGame_1_1Example_1_1Color}{Color}} expected\+\_\+color)
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a64d72bfa43cb88d1398cbe60cbe586e1}{builder\+\_\+move\+\_\+assign\+\_\+after\+\_\+releaseraw\+\_\+test}} (\mbox{\hyperlink{classflatbuffers_1_1grpc_1_1MessageBuilder}{flatbuffers\+::grpc\+::\+Message\+Builder}} dst)
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a94c060b9f2775c48fbfc73a461624b3d}{slice\+\_\+allocator\+\_\+tests}} ()
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a322eed17d07a4cdc01ab4a68160a5a17}{populate\+\_\+first\+\_\+half}} (\mbox{\hyperlink{structMyGame_1_1Example_1_1MonsterBuilder}{My\+Game\+::\+Example\+::\+Monster\+Builder}} \&wrapper, flatbuffers\+::\+Offset$<$ \mbox{\hyperlink{structflatbuffers_1_1String}{flatbuffers\+::\+String}} $>$ name\+\_\+offset)
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_aec5723465f46f5a895e6f0a4a7f3111d}{populate\+\_\+second\+\_\+half}} (\mbox{\hyperlink{structMyGame_1_1Example_1_1MonsterBuilder}{My\+Game\+::\+Example\+::\+Monster\+Builder}} \&wrapper)
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a5aaff46b8e5f2e11b57fbef8e477c43a}{test\+\_\+only\+\_\+hack\+\_\+update\+\_\+fbb\+\_\+reference}} (\mbox{\hyperlink{structMyGame_1_1Example_1_1MonsterBuilder}{My\+Game\+::\+Example\+::\+Monster\+Builder}} \&monster\+Builder, \mbox{\hyperlink{classflatbuffers_1_1grpc_1_1MessageBuilder}{flatbuffers\+::grpc\+::\+Message\+Builder}} \&mb)
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a6701d24a0d026c767ab028f6124ff207}{builder\+\_\+move\+\_\+ctor\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+half\+\_\+n\+\_\+half\+\_\+table\+\_\+test}} ()
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a803c3c76e3fafaec8163cdbc916547bc}{builder\+\_\+move\+\_\+ctor\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+test}} ()
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a80b5218113679e5b1c6d005d179a6020}{builder\+\_\+move\+\_\+assign\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+half\+\_\+n\+\_\+half\+\_\+table\+\_\+test}} ()
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_ad458fcfa1e8cc04d126dad7aef6ff6d2}{builder\+\_\+move\+\_\+assign\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+test}} ()
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_aceb8eb8d91f9da6422f91613f8d016a7}{builder\+\_\+move\+\_\+ctor\+\_\+conversion\+\_\+after\+\_\+finish\+\_\+test}} ()
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a2fa9e6a732040705b5ce8d45c8633030}{builder\+\_\+move\+\_\+assign\+\_\+conversion\+\_\+after\+\_\+finish\+\_\+test}} ()
\item 
void \mbox{\hyperlink{message__builder__test_8cpp_a86b31262299caf080737a91789fd673e}{message\+\_\+builder\+\_\+tests}} ()
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{message__builder__test_8cpp_a64d72bfa43cb88d1398cbe60cbe586e1}\label{message__builder__test_8cpp_a64d72bfa43cb88d1398cbe60cbe586e1} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!builder\_move\_assign\_after\_releaseraw\_test@{builder\_move\_assign\_after\_releaseraw\_test}}
\index{builder\_move\_assign\_after\_releaseraw\_test@{builder\_move\_assign\_after\_releaseraw\_test}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{builder\_move\_assign\_after\_releaseraw\_test()}{builder\_move\_assign\_after\_releaseraw\_test()}}
{\footnotesize\ttfamily void builder\+\_\+move\+\_\+assign\+\_\+after\+\_\+releaseraw\+\_\+test (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classflatbuffers_1_1grpc_1_1MessageBuilder}{flatbuffers\+::grpc\+::\+Message\+Builder}}}]{dst }\end{DoxyParamCaption})}

\Hypertarget{message__builder__test_8cpp_a2fa9e6a732040705b5ce8d45c8633030}\label{message__builder__test_8cpp_a2fa9e6a732040705b5ce8d45c8633030} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!builder\_move\_assign\_conversion\_after\_finish\_test@{builder\_move\_assign\_conversion\_after\_finish\_test}}
\index{builder\_move\_assign\_conversion\_after\_finish\_test@{builder\_move\_assign\_conversion\_after\_finish\_test}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{builder\_move\_assign\_conversion\_after\_finish\_test()}{builder\_move\_assign\_conversion\_after\_finish\_test()}}
{\footnotesize\ttfamily void builder\+\_\+move\+\_\+assign\+\_\+conversion\+\_\+after\+\_\+finish\+\_\+test (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This test populates data, finishes the buffer, and does move conversion after. \Hypertarget{message__builder__test_8cpp_a80b5218113679e5b1c6d005d179a6020}\label{message__builder__test_8cpp_a80b5218113679e5b1c6d005d179a6020} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!builder\_move\_assign\_conversion\_before\_finish\_half\_n\_half\_table\_test@{builder\_move\_assign\_conversion\_before\_finish\_half\_n\_half\_table\_test}}
\index{builder\_move\_assign\_conversion\_before\_finish\_half\_n\_half\_table\_test@{builder\_move\_assign\_conversion\_before\_finish\_half\_n\_half\_table\_test}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{builder\_move\_assign\_conversion\_before\_finish\_half\_n\_half\_table\_test()}{builder\_move\_assign\_conversion\_before\_finish\_half\_n\_half\_table\_test()}}
{\footnotesize\ttfamily void builder\+\_\+move\+\_\+assign\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+half\+\_\+n\+\_\+half\+\_\+table\+\_\+test (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This test validates correctness of move conversion of \doxylink{classFlatBufferBuilder}{Flat\+Buffer\+Builder} to a Message\+Builder DURING a table construction. Half of the table is constructed using \doxylink{classFlatBufferBuilder}{Flat\+Buffer\+Builder} and the other half of the table is constructed using a Message\+Builder. \Hypertarget{message__builder__test_8cpp_ad458fcfa1e8cc04d126dad7aef6ff6d2}\label{message__builder__test_8cpp_ad458fcfa1e8cc04d126dad7aef6ff6d2} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!builder\_move\_assign\_conversion\_before\_finish\_test@{builder\_move\_assign\_conversion\_before\_finish\_test}}
\index{builder\_move\_assign\_conversion\_before\_finish\_test@{builder\_move\_assign\_conversion\_before\_finish\_test}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{builder\_move\_assign\_conversion\_before\_finish\_test()}{builder\_move\_assign\_conversion\_before\_finish\_test()}}
{\footnotesize\ttfamily void builder\+\_\+move\+\_\+assign\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+test (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This test populates a COMPLETE inner table before move conversion and later populates more members in the outer table. \Hypertarget{message__builder__test_8cpp_aceb8eb8d91f9da6422f91613f8d016a7}\label{message__builder__test_8cpp_aceb8eb8d91f9da6422f91613f8d016a7} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!builder\_move\_ctor\_conversion\_after\_finish\_test@{builder\_move\_ctor\_conversion\_after\_finish\_test}}
\index{builder\_move\_ctor\_conversion\_after\_finish\_test@{builder\_move\_ctor\_conversion\_after\_finish\_test}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{builder\_move\_ctor\_conversion\_after\_finish\_test()}{builder\_move\_ctor\_conversion\_after\_finish\_test()}}
{\footnotesize\ttfamily void builder\+\_\+move\+\_\+ctor\+\_\+conversion\+\_\+after\+\_\+finish\+\_\+test (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This test populates data, finishes the buffer, and does move conversion after. \Hypertarget{message__builder__test_8cpp_a6701d24a0d026c767ab028f6124ff207}\label{message__builder__test_8cpp_a6701d24a0d026c767ab028f6124ff207} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!builder\_move\_ctor\_conversion\_before\_finish\_half\_n\_half\_table\_test@{builder\_move\_ctor\_conversion\_before\_finish\_half\_n\_half\_table\_test}}
\index{builder\_move\_ctor\_conversion\_before\_finish\_half\_n\_half\_table\_test@{builder\_move\_ctor\_conversion\_before\_finish\_half\_n\_half\_table\_test}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{builder\_move\_ctor\_conversion\_before\_finish\_half\_n\_half\_table\_test()}{builder\_move\_ctor\_conversion\_before\_finish\_half\_n\_half\_table\_test()}}
{\footnotesize\ttfamily void builder\+\_\+move\+\_\+ctor\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+half\+\_\+n\+\_\+half\+\_\+table\+\_\+test (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This test validates correctness of move conversion of \doxylink{classFlatBufferBuilder}{Flat\+Buffer\+Builder} to a Message\+Builder DURING a table construction. Half of the table is constructed using \doxylink{classFlatBufferBuilder}{Flat\+Buffer\+Builder} and the other half of the table is constructed using a Message\+Builder. \Hypertarget{message__builder__test_8cpp_a803c3c76e3fafaec8163cdbc916547bc}\label{message__builder__test_8cpp_a803c3c76e3fafaec8163cdbc916547bc} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!builder\_move\_ctor\_conversion\_before\_finish\_test@{builder\_move\_ctor\_conversion\_before\_finish\_test}}
\index{builder\_move\_ctor\_conversion\_before\_finish\_test@{builder\_move\_ctor\_conversion\_before\_finish\_test}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{builder\_move\_ctor\_conversion\_before\_finish\_test()}{builder\_move\_ctor\_conversion\_before\_finish\_test()}}
{\footnotesize\ttfamily void builder\+\_\+move\+\_\+ctor\+\_\+conversion\+\_\+before\+\_\+finish\+\_\+test (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This test populates a COMPLETE inner table before move conversion and later populates more members in the outer table. \Hypertarget{message__builder__test_8cpp_a86b31262299caf080737a91789fd673e}\label{message__builder__test_8cpp_a86b31262299caf080737a91789fd673e} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!message\_builder\_tests@{message\_builder\_tests}}
\index{message\_builder\_tests@{message\_builder\_tests}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{message\_builder\_tests()}{message\_builder\_tests()}}
{\footnotesize\ttfamily void message\+\_\+builder\+\_\+tests (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\Hypertarget{message__builder__test_8cpp_a322eed17d07a4cdc01ab4a68160a5a17}\label{message__builder__test_8cpp_a322eed17d07a4cdc01ab4a68160a5a17} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!populate\_first\_half@{populate\_first\_half}}
\index{populate\_first\_half@{populate\_first\_half}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{populate\_first\_half()}{populate\_first\_half()}}
{\footnotesize\ttfamily void populate\+\_\+first\+\_\+half (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structMyGame_1_1Example_1_1MonsterBuilder}{My\+Game\+::\+Example\+::\+Monster\+Builder}} \&}]{wrapper,  }\item[{flatbuffers\+::\+Offset$<$ \mbox{\hyperlink{structflatbuffers_1_1String}{flatbuffers\+::\+String}} $>$}]{name\+\_\+offset }\end{DoxyParamCaption})}

This function does not populate exactly the first half of the table. But it could. \Hypertarget{message__builder__test_8cpp_aec5723465f46f5a895e6f0a4a7f3111d}\label{message__builder__test_8cpp_aec5723465f46f5a895e6f0a4a7f3111d} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!populate\_second\_half@{populate\_second\_half}}
\index{populate\_second\_half@{populate\_second\_half}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{populate\_second\_half()}{populate\_second\_half()}}
{\footnotesize\ttfamily void populate\+\_\+second\+\_\+half (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structMyGame_1_1Example_1_1MonsterBuilder}{My\+Game\+::\+Example\+::\+Monster\+Builder}} \&}]{wrapper }\end{DoxyParamCaption})}

This function does not populate exactly the second half of the table. But it could. \Hypertarget{message__builder__test_8cpp_a55c5176e6e0d5d8d2619b58ca1e15377}\label{message__builder__test_8cpp_a55c5176e6e0d5d8d2619b58ca1e15377} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!release\_n\_verify@{release\_n\_verify}}
\index{release\_n\_verify@{release\_n\_verify}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{release\_n\_verify()}{release\_n\_verify()}}
{\footnotesize\ttfamily bool release\+\_\+n\+\_\+verify (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classflatbuffers_1_1grpc_1_1MessageBuilder}{flatbuffers\+::grpc\+::\+Message\+Builder}} \&}]{mbb,  }\item[{const std\+::string \&}]{expected\+\_\+name,  }\item[{\mbox{\hyperlink{classMyGame_1_1Example_1_1Color}{Color}}}]{expected\+\_\+color }\end{DoxyParamCaption})}

\Hypertarget{message__builder__test_8cpp_a94c060b9f2775c48fbfc73a461624b3d}\label{message__builder__test_8cpp_a94c060b9f2775c48fbfc73a461624b3d} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!slice\_allocator\_tests@{slice\_allocator\_tests}}
\index{slice\_allocator\_tests@{slice\_allocator\_tests}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{slice\_allocator\_tests()}{slice\_allocator\_tests()}}
{\footnotesize\ttfamily void slice\+\_\+allocator\+\_\+tests (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\Hypertarget{message__builder__test_8cpp_a5aaff46b8e5f2e11b57fbef8e477c43a}\label{message__builder__test_8cpp_a5aaff46b8e5f2e11b57fbef8e477c43a} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!test\_only\_hack\_update\_fbb\_reference@{test\_only\_hack\_update\_fbb\_reference}}
\index{test\_only\_hack\_update\_fbb\_reference@{test\_only\_hack\_update\_fbb\_reference}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{test\_only\_hack\_update\_fbb\_reference()}{test\_only\_hack\_update\_fbb\_reference()}}
{\footnotesize\ttfamily void test\+\_\+only\+\_\+hack\+\_\+update\+\_\+fbb\+\_\+reference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structMyGame_1_1Example_1_1MonsterBuilder}{My\+Game\+::\+Example\+::\+Monster\+Builder}} \&}]{monster\+Builder,  }\item[{\mbox{\hyperlink{classflatbuffers_1_1grpc_1_1MessageBuilder}{flatbuffers\+::grpc\+::\+Message\+Builder}} \&}]{mb }\end{DoxyParamCaption})}

This function is a hack to update the \doxylink{classFlatBufferBuilder}{Flat\+Buffer\+Builder} reference (fbb\+\_\+) in the Monster\+Builder object. This function will break if fbb\+\_\+ is not the first member in Monster\+Builder. In that case, some offset must be added. This function is used exclusively for testing correctness of move operations between Flat\+Buffer\+Builders. If Monster\+Builder had a fbb\+\_\+ pointer, this hack would be unnecessary. That involves a code-\/generator change though. \Hypertarget{message__builder__test_8cpp_ac09bab0afb6774b3a070503c2b88139d}\label{message__builder__test_8cpp_ac09bab0afb6774b3a070503c2b88139d} 
\index{message\_builder\_test.cpp@{message\_builder\_test.cpp}!verify@{verify}}
\index{verify@{verify}!message\_builder\_test.cpp@{message\_builder\_test.cpp}}
\doxysubsubsection{\texorpdfstring{verify()}{verify()}}
{\footnotesize\ttfamily bool verify (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classflatbuffers_1_1grpc_1_1Message}{flatbuffers\+::grpc\+::\+Message}}$<$ \mbox{\hyperlink{structMyGame_1_1Example_1_1Monster}{Monster}} $>$ \&}]{msg,  }\item[{const std\+::string \&}]{expected\+\_\+name,  }\item[{\mbox{\hyperlink{classMyGame_1_1Example_1_1Color}{Color}}}]{expected\+\_\+color }\end{DoxyParamCaption})}

