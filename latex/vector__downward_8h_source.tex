\doxysection{vector\+\_\+downward.\+h}
\hypertarget{vector__downward_8h_source}{}\label{vector__downward_8h_source}\index{flatbuffers/include/flatbuffers/vector\_downward.h@{flatbuffers/include/flatbuffers/vector\_downward.h}}
\mbox{\hyperlink{vector__downward_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Copyright\ 2021\ Google\ Inc.\ All\ rights\ reserved.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#ifndef\ FLATBUFFERS\_VECTOR\_DOWNWARD\_H\_}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ FLATBUFFERS\_VECTOR\_DOWNWARD\_H\_}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{base_8h}{flatbuffers/base.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{default__allocator_8h}{flatbuffers/default\_allocator.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{detached__buffer_8h}{flatbuffers/detached\_buffer.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceflatbuffers}{flatbuffers}}\ \{}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{//\ This\ is\ a\ minimal\ replication\ of\ std::vector<uint8\_t>\ functionality,}}
\DoxyCodeLine{00030\ \textcolor{comment}{//\ except\ growing\ from\ higher\ to\ lower\ addresses.\ i.e.\ push\_back()\ inserts\ data}}
\DoxyCodeLine{00031\ \textcolor{comment}{//\ in\ the\ lowest\ address\ in\ the\ vector.}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ Since\ this\ vector\ leaves\ the\ lower\ part\ unused,\ we\ support\ a\ "{}scratch-\/pad"{}}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ that\ can\ be\ stored\ there\ for\ temporary\ data,\ to\ share\ the\ allocated\ space.}}
\DoxyCodeLine{00034\ \textcolor{comment}{//\ Essentially,\ this\ supports\ 2\ std::vectors\ in\ a\ single\ buffer.}}
\DoxyCodeLine{00035\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ SizeT\ =\ uoffset\_t>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \{}
\DoxyCodeLine{00036\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a611e9b41a69a089da6ed9004d13390f3}{vector\_downward}}(\textcolor{keywordtype}{size\_t}\ initial\_size,\ \mbox{\hyperlink{classflatbuffers_1_1Allocator}{Allocator}}\ *allocator,}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ own\_allocator,\ \textcolor{keywordtype}{size\_t}\ buffer\_minalign,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ SizeT\ max\_size\ =\ FLATBUFFERS\_MAX\_BUFFER\_SIZE)}
\DoxyCodeLine{00040\ \ \ \ \ \ \ :\ allocator\_(allocator),}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ own\_allocator\_(own\_allocator),}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ initial\_size\_(initial\_size),}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ max\_size\_(max\_size),}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ buffer\_minalign\_(buffer\_minalign),}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ reserved\_(0),}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ size\_(0),}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ buf\_(nullptr),}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ cur\_(nullptr),}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ scratch\_(nullptr)\ \{\}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_abc1188f44e2b055a2fa488aa25b44d5a}{vector\_downward}}(\mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&\&other)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \textcolor{comment}{//\ clang-\/format\ on}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ :\ allocator\_(other.allocator\_),}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ own\_allocator\_(other.own\_allocator\_),}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ initial\_size\_(other.initial\_size\_),}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ max\_size\_(other.max\_size\_),}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ buffer\_minalign\_(other.buffer\_minalign\_),}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ reserved\_(other.reserved\_),}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ size\_(other.size\_),}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ buf\_(other.buf\_),}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ cur\_(other.cur\_),}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ scratch\_(other.scratch\_)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ No\ change\ in\ other.allocator\_}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ No\ change\ in\ other.initial\_size\_}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ No\ change\ in\ other.buffer\_minalign\_}}
\DoxyCodeLine{00066\ \ \ \ \ other.own\_allocator\_\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00067\ \ \ \ \ other.reserved\_\ =\ 0;}
\DoxyCodeLine{00068\ \ \ \ \ other.buf\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00069\ \ \ \ \ other.cur\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00070\ \ \ \ \ other.scratch\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00071\ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&\mbox{\hyperlink{classflatbuffers_1_1vector__downward_a8591fde5a794482bd77746bed9a27ff1}{operator=}}(\mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&\&other)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ Move\ construct\ a\ temporary\ and\ swap\ idiom}}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ temp(std::move(other));}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(temp);}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00078\ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a989cdc1fa4c8cc94ce0bbadc651ec817}{\string~vector\_downward}}()\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a9774e0d56343d6e0178838918fa756f3}{clear\_buffer}}();}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_abd57f524a7eddae9c1bc07b2ddb2913c}{clear\_allocator}}();}
\DoxyCodeLine{00083\ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a95513f8bdd9df9068716318bebe84876}{reset}}()\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a9774e0d56343d6e0178838918fa756f3}{clear\_buffer}}();}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_ae3d391747a6c6310fd4141663cc6744e}{clear}}();}
\DoxyCodeLine{00088\ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_ae3d391747a6c6310fd4141663cc6744e}{clear}}()\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{if}\ (buf\_)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ cur\_\ =\ buf\_\ +\ reserved\_;}
\DoxyCodeLine{00093\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ reserved\_\ =\ 0;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ cur\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ size\_\ =\ 0;}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a174f1fce33709e148d7d62529a56dfad}{clear\_scratch}}();}
\DoxyCodeLine{00099\ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a174f1fce33709e148d7d62529a56dfad}{clear\_scratch}}()\ \{\ scratch\_\ =\ buf\_;\ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_abd57f524a7eddae9c1bc07b2ddb2913c}{clear\_allocator}}()\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{if}\ (own\_allocator\_\ \&\&\ allocator\_)\ \{\ \textcolor{keyword}{delete}\ allocator\_;\ \}}
\DoxyCodeLine{00105\ \ \ \ \ allocator\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00106\ \ \ \ \ own\_allocator\_\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00107\ \ \ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a9774e0d56343d6e0178838918fa756f3}{clear\_buffer}}()\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{if}\ (buf\_)\ \mbox{\hyperlink{namespaceflatbuffers_ab4e316cb50b04b9c80411c528bf815e4}{Deallocate}}(allocator\_,\ buf\_,\ reserved\_);}
\DoxyCodeLine{00111\ \ \ \ \ buf\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00112\ \ \ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{//\ Relinquish\ the\ pointer\ to\ the\ caller.}}
\DoxyCodeLine{00115\ \ \ uint8\_t\ *\mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6cdd442a84234d6471a126ce7f669818}{release\_raw}}(\textcolor{keywordtype}{size\_t}\ \&allocated\_bytes,\ \textcolor{keywordtype}{size\_t}\ \&\mbox{\hyperlink{classflatbuffers_1_1vector__downward_afaea588921cac5b7de10964168804ad4}{offset}})\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{auto}\ *buf\ =\ buf\_;}
\DoxyCodeLine{00117\ \ \ \ \ allocated\_bytes\ =\ reserved\_;}
\DoxyCodeLine{00118\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_afaea588921cac5b7de10964168804ad4}{offset}}\ =\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_afaea588921cac5b7de10964168804ad4}{vector\_downward::offset}}();}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{comment}{//\ release\_raw\ only\ relinquishes\ the\ buffer\ ownership.}}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//\ Does\ not\ deallocate\ or\ reset\ the\ allocator.\ Destructor\ will\ do\ that.}}
\DoxyCodeLine{00122\ \ \ \ \ buf\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00123\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_ae3d391747a6c6310fd4141663cc6744e}{clear}}();}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{return}\ buf;}
\DoxyCodeLine{00125\ \ \ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \textcolor{comment}{//\ Relinquish\ the\ pointer\ to\ the\ caller.}}
\DoxyCodeLine{00128\ \ \ \mbox{\hyperlink{classflatbuffers_1_1DetachedBuffer}{DetachedBuffer}}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a727993ff8b552fc36ee8864f2137bd80}{release}}()\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{comment}{//\ allocator\ ownership\ (if\ any)\ is\ transferred\ to\ DetachedBuffer.}}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1DetachedBuffer}{DetachedBuffer}}\ fb(allocator\_,\ own\_allocator\_,\ buf\_,\ reserved\_,\ cur\_,}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a3a3bfadc3f2fa70faadb81c15ef2e72d}{size}}());}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordflow}{if}\ (own\_allocator\_)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ allocator\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00134\ \ \ \ \ \ \ own\_allocator\_\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00135\ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ buf\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_ae3d391747a6c6310fd4141663cc6744e}{clear}}();}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordflow}{return}\ fb;}
\DoxyCodeLine{00139\ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_acf48bdf27e6585521ce9d6a2804d99fb}{ensure\_space}}(\textcolor{keywordtype}{size\_t}\ len)\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{base_8h_ab2116a3957cb3c19761609ea7fd796fe}{FLATBUFFERS\_ASSERT}}(cur\_\ >=\ scratch\_\ \&\&\ scratch\_\ >=\ buf\_);}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//\ If\ the\ length\ is\ larger\ than\ the\ unused\ part\ of\ the\ buffer,\ we\ need\ to}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ grow.}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ >\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a50e046376ecef8240c7ba6fc904af8d9}{unused\_buffer\_size}}())\ \{\ reallocate(len);\ \}}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{base_8h_ab2116a3957cb3c19761609ea7fd796fe}{FLATBUFFERS\_ASSERT}}(\mbox{\hyperlink{classflatbuffers_1_1vector__downward_a3a3bfadc3f2fa70faadb81c15ef2e72d}{size}}()\ <\ max\_size\_);}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ len;}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \textcolor{keyword}{inline}\ uint8\_t\ *\mbox{\hyperlink{classflatbuffers_1_1vector__downward_a68477ac4d5bf9637e1981d03b7363845}{make\_space}}(\textcolor{keywordtype}{size\_t}\ len)\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordflow}{if}\ (len)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_acf48bdf27e6585521ce9d6a2804d99fb}{ensure\_space}}(len);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ cur\_\ -\/=\ len;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ size\_\ +=\ \textcolor{keyword}{static\_cast<}SizeT\textcolor{keyword}{>}(len);}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{return}\ cur\_;}
\DoxyCodeLine{00157\ \ \ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \textcolor{comment}{//\ Returns\ nullptr\ if\ using\ the\ DefaultAllocator.}}
\DoxyCodeLine{00160\ \ \ \mbox{\hyperlink{classflatbuffers_1_1Allocator}{Allocator}}\ *\mbox{\hyperlink{classflatbuffers_1_1vector__downward_a8f465348750c3e9dcbff4aed897ed848}{get\_custom\_allocator}}()\ \{\ \textcolor{keywordflow}{return}\ allocator\_;\ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{comment}{//\ The\ current\ offset\ into\ the\ buffer.}}
\DoxyCodeLine{00163\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_afaea588921cac5b7de10964168804ad4}{offset}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ cur\_\ -\/\ buf\_;\ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \textcolor{comment}{//\ The\ total\ size\ of\ the\ vector\ (both\ the\ buffer\ and\ scratch\ parts).}}
\DoxyCodeLine{00166\ \ \ \textcolor{keyword}{inline}\ SizeT\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a3a3bfadc3f2fa70faadb81c15ef2e72d}{size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ size\_;\ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \textcolor{comment}{//\ The\ size\ of\ the\ buffer\ part\ of\ the\ vector\ that\ is\ currently\ unused.}}
\DoxyCodeLine{00169\ \ \ SizeT\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a50e046376ecef8240c7ba6fc904af8d9}{unused\_buffer\_size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}SizeT\textcolor{keyword}{>}(cur\_\ -\/\ scratch\_);}
\DoxyCodeLine{00171\ \ \ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \textcolor{comment}{//\ The\ size\ of\ the\ scratch\ part\ of\ the\ vector.}}
\DoxyCodeLine{00174\ \ \ SizeT\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a47a10ab2ff8e06e90c03f60f3d2566f2}{scratch\_size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}SizeT\textcolor{keyword}{>}(scratch\_\ -\/\ buf\_);\ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_afa1970ec8d3b0e1cf998396ae78925a3}{capacity}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ reserved\_;\ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ uint8\_t\ *\mbox{\hyperlink{classflatbuffers_1_1vector__downward_ad30e9d92436a551fafa9673f84cce2ea}{data}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00179\ \ \ \ \ \mbox{\hyperlink{base_8h_ab2116a3957cb3c19761609ea7fd796fe}{FLATBUFFERS\_ASSERT}}(cur\_);}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordflow}{return}\ cur\_;}
\DoxyCodeLine{00181\ \ \ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ uint8\_t\ *\mbox{\hyperlink{classflatbuffers_1_1vector__downward_ac9cabeac3e7577d86e3eb90072698ac0}{scratch\_data}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00184\ \ \ \ \ \mbox{\hyperlink{base_8h_ab2116a3957cb3c19761609ea7fd796fe}{FLATBUFFERS\_ASSERT}}(buf\_);}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordflow}{return}\ buf\_;}
\DoxyCodeLine{00186\ \ \ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ uint8\_t\ *\mbox{\hyperlink{classflatbuffers_1_1vector__downward_aeffd5f098fbd7b8658605483cdde2a09}{scratch\_end}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00189\ \ \ \ \ \mbox{\hyperlink{base_8h_ab2116a3957cb3c19761609ea7fd796fe}{FLATBUFFERS\_ASSERT}}(scratch\_);}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordflow}{return}\ scratch\_;}
\DoxyCodeLine{00191\ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ uint8\_t\ *\mbox{\hyperlink{classflatbuffers_1_1vector__downward_ae3f0718bf30962dd537f35651cab175b}{data\_at}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_afaea588921cac5b7de10964168804ad4}{offset}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ buf\_\ +\ reserved\_\ -\/\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_afaea588921cac5b7de10964168804ad4}{offset}};\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a598cafd178ca79a9036c64b30e8a1c8b}{push}}(\textcolor{keyword}{const}\ uint8\_t\ *bytes,\ \textcolor{keywordtype}{size\_t}\ num)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordflow}{if}\ (num\ >\ 0)\ \{\ memcpy(\mbox{\hyperlink{classflatbuffers_1_1vector__downward_a68477ac4d5bf9637e1981d03b7363845}{make\_space}}(num),\ bytes,\ num);\ \}}
\DoxyCodeLine{00197\ \ \ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \textcolor{comment}{//\ Specialized\ version\ of\ push()\ that\ avoids\ memcpy\ call\ for\ small\ data.}}
\DoxyCodeLine{00200\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_ab5d826866a4ef57c6c44d9a974c03d16}{push\_small}}(\textcolor{keyword}{const}\ T\ \&little\_endian\_t)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a68477ac4d5bf9637e1981d03b7363845}{make\_space}}(\textcolor{keyword}{sizeof}(T));}
\DoxyCodeLine{00202\ \ \ \ \ *\textcolor{keyword}{reinterpret\_cast<}T\ *\textcolor{keyword}{>}(cur\_)\ =\ little\_endian\_t;}
\DoxyCodeLine{00203\ \ \ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a72f51a820aeacee685f847618a631ee6}{scratch\_push\_small}}(\textcolor{keyword}{const}\ T\ \&t)\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_acf48bdf27e6585521ce9d6a2804d99fb}{ensure\_space}}(\textcolor{keyword}{sizeof}(T));}
\DoxyCodeLine{00207\ \ \ \ \ *\textcolor{keyword}{reinterpret\_cast<}T\ *\textcolor{keyword}{>}(scratch\_)\ =\ t;}
\DoxyCodeLine{00208\ \ \ \ \ scratch\_\ +=\ \textcolor{keyword}{sizeof}(T);}
\DoxyCodeLine{00209\ \ \ \}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \textcolor{comment}{//\ fill()\ is\ most\ frequently\ called\ with\ small\ byte\ counts\ (<=\ 4),}}
\DoxyCodeLine{00212\ \ \ \textcolor{comment}{//\ which\ is\ why\ we're\ using\ loops\ rather\ than\ calling\ memset.}}
\DoxyCodeLine{00213\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a20799b25b7002aaa4995cd193024deda}{fill}}(\textcolor{keywordtype}{size\_t}\ zero\_pad\_bytes)\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a68477ac4d5bf9637e1981d03b7363845}{make\_space}}(zero\_pad\_bytes);}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}\ =\ 0;\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}\ <\ zero\_pad\_bytes;\ \mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}++)\ cur\_[\mbox{\hyperlink{gmock-matchers-comparisons__test_8cc_acb559820d9ca11295b4500f179ef6392}{i}}]\ =\ 0;}
\DoxyCodeLine{00216\ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \textcolor{comment}{//\ Version\ for\ when\ we\ know\ the\ size\ is\ larger.}}
\DoxyCodeLine{00219\ \ \ \textcolor{comment}{//\ Precondition:\ zero\_pad\_bytes\ >\ 0}}
\DoxyCodeLine{00220\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a7a91b1f80e884de85776a9a56c001709}{fill\_big}}(\textcolor{keywordtype}{size\_t}\ zero\_pad\_bytes)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ memset(\mbox{\hyperlink{classflatbuffers_1_1vector__downward_a68477ac4d5bf9637e1981d03b7363845}{make\_space}}(zero\_pad\_bytes),\ 0,\ zero\_pad\_bytes);}
\DoxyCodeLine{00222\ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_ac209d09c482077257f7055827951e7b6}{pop}}(\textcolor{keywordtype}{size\_t}\ bytes\_to\_remove)\ \{}
\DoxyCodeLine{00225\ \ \ \ \ cur\_\ +=\ bytes\_to\_remove;}
\DoxyCodeLine{00226\ \ \ \ \ size\_\ -\/=\ \textcolor{keyword}{static\_cast<}SizeT\textcolor{keyword}{>}(bytes\_to\_remove);}
\DoxyCodeLine{00227\ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a15bdc3c0b0230e71ea8e99a107c0b566}{scratch\_pop}}(\textcolor{keywordtype}{size\_t}\ bytes\_to\_remove)\ \{\ scratch\_\ -\/=\ bytes\_to\_remove;\ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(\mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&other)\ \{}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keyword}{using\ }std::swap;}
\DoxyCodeLine{00233\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(allocator\_,\ other.allocator\_);}
\DoxyCodeLine{00234\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(own\_allocator\_,\ other.own\_allocator\_);}
\DoxyCodeLine{00235\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(initial\_size\_,\ other.initial\_size\_);}
\DoxyCodeLine{00236\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(buffer\_minalign\_,\ other.buffer\_minalign\_);}
\DoxyCodeLine{00237\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(reserved\_,\ other.reserved\_);}
\DoxyCodeLine{00238\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(size\_,\ other.size\_);}
\DoxyCodeLine{00239\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(max\_size\_,\ other.max\_size\_);}
\DoxyCodeLine{00240\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(buf\_,\ other.buf\_);}
\DoxyCodeLine{00241\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(cur\_,\ other.cur\_);}
\DoxyCodeLine{00242\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(scratch\_,\ other.scratch\_);}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a622fa798b1cabe7320c2d93153258e26}{swap\_allocator}}(\mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&other)\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keyword}{using\ }std::swap;}
\DoxyCodeLine{00247\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(allocator\_,\ other.allocator\_);}
\DoxyCodeLine{00248\ \ \ \ \ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a6e965ea513ed377a5a7ee7b5a9f27c0a}{swap}}(own\_allocator\_,\ other.own\_allocator\_);}
\DoxyCodeLine{00249\ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//\ You\ shouldn't\ really\ be\ copying\ instances\ of\ this\ class.}}
\DoxyCodeLine{00253\ \ \ FLATBUFFERS\_DELETE\_FUNC(\mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&));}
\DoxyCodeLine{00254\ \ \ FLATBUFFERS\_DELETE\_FUNC(\mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&\textcolor{keyword}{operator}=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward}{vector\_downward}}\ \&));}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \mbox{\hyperlink{classflatbuffers_1_1Allocator}{Allocator}}\ *allocator\_;}
\DoxyCodeLine{00257\ \ \ \textcolor{keywordtype}{bool}\ own\_allocator\_;}
\DoxyCodeLine{00258\ \ \ \textcolor{keywordtype}{size\_t}\ initial\_size\_;}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{//\ The\ maximum\ size\ the\ vector\ can\ be.}}
\DoxyCodeLine{00261\ \ \ SizeT\ max\_size\_;}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordtype}{size\_t}\ buffer\_minalign\_;}
\DoxyCodeLine{00263\ \ \ \textcolor{keywordtype}{size\_t}\ reserved\_;}
\DoxyCodeLine{00264\ \ \ SizeT\ size\_;}
\DoxyCodeLine{00265\ \ \ uint8\_t\ *buf\_;}
\DoxyCodeLine{00266\ \ \ uint8\_t\ *cur\_;\ \ \textcolor{comment}{//\ Points\ at\ location\ between\ empty\ (below)\ and\ used\ (above).}}
\DoxyCodeLine{00267\ \ \ uint8\_t\ *scratch\_;\ \ \textcolor{comment}{//\ Points\ to\ the\ end\ of\ the\ scratchpad\ in\ use.}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \textcolor{keywordtype}{void}\ reallocate(\textcolor{keywordtype}{size\_t}\ len)\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keyword}{auto}\ old\_reserved\ =\ reserved\_;}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keyword}{auto}\ old\_size\ =\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a3a3bfadc3f2fa70faadb81c15ef2e72d}{size}}();}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{auto}\ old\_scratch\_size\ =\ \mbox{\hyperlink{classflatbuffers_1_1vector__downward_a47a10ab2ff8e06e90c03f60f3d2566f2}{scratch\_size}}();}
\DoxyCodeLine{00273\ \ \ \ \ reserved\_\ +=}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ (std::max)(len,\ old\_reserved\ ?\ old\_reserved\ /\ 2\ :\ initial\_size\_);}
\DoxyCodeLine{00275\ \ \ \ \ reserved\_\ =\ (reserved\_\ +\ buffer\_minalign\_\ -\/\ 1)\ \&\ \string~(buffer\_minalign\_\ -\/\ 1);}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keywordflow}{if}\ (buf\_)\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \ \ buf\_\ =\ \mbox{\hyperlink{namespaceflatbuffers_a21b917a50571e8b866f8b5185e328b58}{ReallocateDownward}}(allocator\_,\ buf\_,\ old\_reserved,\ reserved\_,}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ old\_size,\ old\_scratch\_size);}
\DoxyCodeLine{00279\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ buf\_\ =\ \mbox{\hyperlink{namespaceflatbuffers_af3b8caf92e8d8f87431ef6754dfa1176}{Allocate}}(allocator\_,\ reserved\_);}
\DoxyCodeLine{00281\ \ \ \ \ \}}
\DoxyCodeLine{00282\ \ \ \ \ cur\_\ =\ buf\_\ +\ reserved\_\ -\/\ old\_size;}
\DoxyCodeLine{00283\ \ \ \ \ scratch\_\ =\ buf\_\ +\ old\_scratch\_size;}
\DoxyCodeLine{00284\ \ \ \}}
\DoxyCodeLine{00285\ \};}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \}\ \ \textcolor{comment}{//\ namespace\ flatbuffers}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ FLATBUFFERS\_VECTOR\_DOWNWARD\_H\_}}

\end{DoxyCode}
