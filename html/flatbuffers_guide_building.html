<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Demo Project: Building</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Demo Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Building</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Building with CMake</h1>
<p>The distribution comes with a <code>cmake</code> file that should allow you to build project/make files for any platform. For details on <code>cmake</code>, see <a href="https://www.cmake.org">https://www.cmake.org</a>. In brief, depending on your platform, use one of e.g.: </p><pre class="fragment">cmake -G "Unix Makefiles" -DCMAKE_BUILD_TYPE=Release
cmake -G "Visual Studio 10" -DCMAKE_BUILD_TYPE=Release
cmake -G "Xcode" -DCMAKE_BUILD_TYPE=Release
</pre><p> Then, build as normal for your platform. This should result in a <code>flatc</code> executable, essential for the next steps. Note that to use clang instead of gcc, you may need to set up your environment variables, e.g. <code>CC=/usr/bin/clang CXX=/usr/bin/clang++ cmake -G "Unix Makefiles"</code>.</p>
<p>Optionally, run the <code>flattests</code> executable from the root <code>flatbuffers/</code> directory to ensure everything is working correctly on your system. If this fails, please contact us!</p>
<p>Building should also produce two sample executables, <code>flatsamplebinary</code> and <code>flatsampletext</code>, see the corresponding <code>.cpp</code> files in the <code>flatbuffers/samples</code> directory.</p>
<p><em>Note that you MUST be in the root of the FlatBuffers distribution when you run 'flattests' or <code>flatsampletext</code>, or it will fail to load its files.</em></p>
<h2>Make all warnings into errors</h2>
<p>By default all Flatbuffers <code>cmake</code> targets are <b>not</b> built with the <code>-Werror</code> (or <code>/WX</code> for MSVC) flag that treats any warning as an error. This allows more flexibility for users of Flatbuffers to use newer compilers and toolsets that may add new warnings that would cause a build failure.</p>
<p>To enable a stricter build that does treat warnings as errors, set the <code>FLATBUFFERS_STRICT_MODE</code> <code>cmake</code> compliation flag to <code>ON</code>.</p>
<div class="fragment"><div class="line">cmake . -DFLATBUFFERS_STRICT_MODE=ON</div>
</div><!-- fragment --><p>Our CI builds run with strict mode on, ensuring the code that is committed to the project is as portable and warning free as possible. Thus developers contributing to the project should enable strict mode locally before making a PR.</p>
<h1>Building with VCPKG</h1>
<p>You can download and install flatbuffers using the <a href="https://github.com/Microsoft/vcpkg/">vcpkg</a> dependency manager: </p><pre class="fragment">git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
./vcpkg install flatbuffers
</pre><p> The flatbuffers port in vcpkg is kept up to date by Microsoft team members and community contributors. If the version is out of date, please <a href="https://github.com/Microsoft/vcpkg">create an issue or pull request</a> on the vcpkg repository.</p>
<h1>Downloading binaries</h1>
<p>You can download the binaries from the <a href="https://github.com/google/flatbuffers/releases">GitHub release page</a>.</p>
<p>We generate <a href="slsa.dev">SLSA3 signatures</a> using the OpenSSF's <a href="https://github.com/slsa-framework/slsa-github-generator">slsa-framework/slsa-github-generator</a>. To verify the binaries:</p><ol type="1">
<li>Install the verification tool from <a href="https://github.com/slsa-framework/slsa-verifier#installation">slsa-framework/slsa-verifier#installation</a></li>
</ol>
<ol type="1">
<li>Download the file named <code>attestation.intoto.jsonl</code> from the GitHub release</li>
</ol>
<ol type="1">
<li>Run: <div class="fragment"><div class="line">$ slsa-verifier -artifact-path &lt;downloaded.zip&gt; -provenance attestation.intoto.jsonl -source github.com/google/flatbuffers -tag &lt;version&gt;</div>
<div class="line">  PASSED: Verified SLSA provenance</div>
<div class="line"> </div>
<div class="line">## Building for Android</div>
<div class="line"> </div>
<div class="line">There is a `flatbuffers/android` directory that contains all you need to build</div>
<div class="line">the test executable on android (use the included `build_apk.sh` script, or use</div>
<div class="line">`ndk_build` / `adb` etc. as usual). Upon running, it will output to the log</div>
<div class="line">if tests succeeded or not.</div>
<div class="line"> </div>
<div class="line">You may also run an android sample from inside the `flatbuffers/samples`, by</div>
<div class="line">running the `android_sample.sh` script. Optionally, you may go to the</div>
<div class="line">`flatbuffers/samples/android` folder and build the sample with the</div>
<div class="line">`build_apk.sh` script or `ndk_build` / `adb` etc.</div>
<div class="line"> </div>
<div class="line">## Using FlatBuffers in your own projects</div>
<div class="line"> </div>
<div class="line">For C++, there is usually no runtime to compile, as the code consists of a</div>
<div class="line">single header, `include/flatbuffers/flatbuffers.h`. You should add the</div>
<div class="line">`include` folder to your include paths. If you wish to be</div>
<div class="line">able to load schemas and/or parse text into binary buffers at runtime,</div>
<div class="line">you additionally need the other headers in `include/flatbuffers`. You must</div>
<div class="line">also compile/link `src/idl_parser.cpp` (and `src/idl_gen_text.cpp` if you</div>
<div class="line">also want to be able convert binary to text).</div>
<div class="line"> </div>
<div class="line">To see how to include FlatBuffers in any of our supported languages, please</div>
<div class="line">view the [Tutorial](@ref flatbuffers_guide_tutorial) and select your appropriate</div>
<div class="line">language using the radio buttons.</div>
<div class="line"> </div>
<div class="line">### Using in CMake-based projects</div>
<div class="line">If you want to use FlatBuffers in a project which already uses CMake, then a more</div>
<div class="line">robust and flexible approach is to build FlatBuffers as part of that project directly.</div>
<div class="line">This is done by making the FlatBuffers source code available to the main build</div>
<div class="line">and adding it using CMake&#39;s `add_subdirectory()` command. This has the</div>
<div class="line">significant advantage that the same compiler and linker settings are used</div>
<div class="line">between FlatBuffers and the rest of your project, so issues associated with using</div>
<div class="line">incompatible libraries (eg debug/release), etc. are avoided. This is</div>
<div class="line">particularly useful on Windows.</div>
<div class="line"> </div>
<div class="line">Suppose you put FlatBuffers source code in directory `${FLATBUFFERS_SRC_DIR}`.</div>
<div class="line">To build it as part of your project, add following code to your `CMakeLists.txt` file:</div>
</div><!-- fragment --> cmake <h1>Add FlatBuffers directly to our build. This defines the <code>flatbuffers</code> target.</h1>
</li>
</ol>
<p>add_subdirectory(${FLATBUFFERS_SRC_DIR} ${CMAKE_CURRENT_BINARY_DIR}/flatbuffers-build EXCLUDE_FROM_ALL)</p>
<h1>Now simply link against flatbuffers as needed to your already declared target.</h1>
<h1>The flatbuffers target carry header search path automatically if CMake &gt; 2.8.11.</h1>
<p>target_link_libraries(own_project_target PRIVATE flatbuffers) </p><div class="fragment"><div class="line">When build your project the `flatbuffers` library will be compiled and linked </div>
<div class="line">to a target as part of your project.</div>
<div class="line"> </div>
<div class="line">#### Override default depth limit of nested objects</div>
<div class="line">To override [the depth limit of recursion](@ref flatbuffers_guide_use_cpp), </div>
<div class="line">add this directive:</div>
</div><!-- fragment --><p> cmake set(FLATBUFFERS_MAX_PARSING_DEPTH 16) ``<code> to</code>CMakeLists.txt<code>file before</code>add_subdirectory(${FLATBUFFERS_SRC_DIR})` line. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
